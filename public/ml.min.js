!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ML=e():t.ML=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=42)}([function(t,e,r){"use strict";r.r(e);var n=r(13);class i{constructor(t){var e,r,n,i,o,s,a,h,u,l=(t=T.checkMatrix(t)).clone(),c=l.rows,f=l.columns,g=new Array(c),d=1;for(e=0;e<c;e++)g[e]=e;for(h=new Array(c),r=0;r<f;r++){for(e=0;e<c;e++)h[e]=l.get(e,r);for(e=0;e<c;e++){for(u=Math.min(e,r),o=0,n=0;n<u;n++)o+=l.get(e,n)*h[n];h[e]-=o,l.set(e,r,h[e])}for(i=r,e=r+1;e<c;e++)Math.abs(h[e])>Math.abs(h[i])&&(i=e);if(i!==r){for(n=0;n<f;n++)s=l.get(i,n),l.set(i,n,l.get(r,n)),l.set(r,n,s);a=g[i],g[i]=g[r],g[r]=a,d=-d}if(r<c&&0!==l.get(r,r))for(e=r+1;e<c;e++)l.set(e,r,l.get(e,r)/l.get(r,r))}this.LU=l,this.pivotVector=g,this.pivotSign=d}isSingular(){for(var t=this.LU,e=t.columns,r=0;r<e;r++)if(0===t[r][r])return!0;return!1}solve(t){t=O.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var r,n,i,o=t.columns,s=t.subMatrixRow(this.pivotVector,0,o-1),a=e.columns;for(i=0;i<a;i++)for(r=i+1;r<a;r++)for(n=0;n<o;n++)s[r][n]-=s[i][n]*e[r][i];for(i=a-1;i>=0;i--){for(n=0;n<o;n++)s[i][n]/=e[i][i];for(r=0;r<i;r++)for(n=0;n<o;n++)s[r][n]-=s[i][n]*e[r][i]}return s}get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var e=this.pivotSign,r=t.columns,n=0;n<r;n++)e*=t[n][n];return e}get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new O(e,r),i=0;i<e;i++)for(var o=0;o<r;o++)n[i][o]=i>o?t[i][o]:i===o?1:0;return n}get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new O(e,r),i=0;i<e;i++)for(var o=0;o<r;o++)n[i][o]=i<=o?t[i][o]:0;return n}get pivotPermutationVector(){return this.pivotVector.slice()}}function o(t,e){var r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0!==e?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}function s(t,e,r){for(var n=new Array(t),i=0;i<t;i++){n[i]=new Array(e);for(var o=0;o<e;o++)n[i][o]=r}return n}class a{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=(t=T.checkMatrix(t)).rows,n=t.columns;const i=e.computeLeftSingularVectors,a=void 0===i||i,h=e.computeRightSingularVectors,u=void 0===h||h,l=e.autoTranspose,c=void 0!==l&&l;var f,g=Boolean(a),d=Boolean(u),m=!1;if(r<n)if(c){r=(f=t.transpose()).rows,n=f.columns,m=!0;var p=g;g=d,d=p}else f=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else f=t.clone();var v=Math.min(r,n),w=Math.min(r+1,n),y=new Array(w),x=s(r,v,0),b=s(n,n,0),M=new Array(n),S=new Array(r),A=new Array(w);for(let t=0;t<w;t++)A[t]=t;var E=Math.min(r-1,n),R=Math.max(0,Math.min(n-2,r)),k=Math.max(E,R);for(let t=0;t<k;t++){if(t<E){y[t]=0;for(let e=t;e<r;e++)y[t]=o(y[t],f[e][t]);if(0!==y[t]){f[t][t]<0&&(y[t]=-y[t]);for(let e=t;e<r;e++)f[e][t]/=y[t];f[t][t]+=1}y[t]=-y[t]}for(let e=t+1;e<n;e++){if(t<E&&0!==y[t]){let n=0;for(let i=t;i<r;i++)n+=f[i][t]*f[i][e];n=-n/f[t][t];for(let i=t;i<r;i++)f[i][e]+=n*f[i][t]}M[e]=f[t][e]}if(g&&t<E)for(let e=t;e<r;e++)x[e][t]=f[e][t];if(t<R){M[t]=0;for(let e=t+1;e<n;e++)M[t]=o(M[t],M[e]);if(0!==M[t]){M[t+1]<0&&(M[t]=0-M[t]);for(let e=t+1;e<n;e++)M[e]/=M[t];M[t+1]+=1}if(M[t]=-M[t],t+1<r&&0!==M[t]){for(let e=t+1;e<r;e++)S[e]=0;for(let e=t+1;e<r;e++)for(let r=t+1;r<n;r++)S[e]+=M[r]*f[e][r];for(let e=t+1;e<n;e++){let n=-M[e]/M[t+1];for(let i=t+1;i<r;i++)f[i][e]+=n*S[i]}}if(d)for(let e=t+1;e<n;e++)b[e][t]=M[e]}}let O=Math.min(n,r+1);if(E<n&&(y[E]=f[E][E]),r<O&&(y[O-1]=0),R+1<O&&(M[R]=f[R][O-1]),M[O-1]=0,g){for(let t=E;t<v;t++){for(let e=0;e<r;e++)x[e][t]=0;x[t][t]=1}for(let t=E-1;t>=0;t--)if(0!==y[t]){for(let e=t+1;e<v;e++){let n=0;for(let i=t;i<r;i++)n+=x[i][t]*x[i][e];n=-n/x[t][t];for(let i=t;i<r;i++)x[i][e]+=n*x[i][t]}for(let e=t;e<r;e++)x[e][t]=-x[e][t];x[t][t]=1+x[t][t];for(let e=0;e<t-1;e++)x[e][t]=0}else{for(let e=0;e<r;e++)x[e][t]=0;x[t][t]=1}}if(d)for(let t=n-1;t>=0;t--){if(t<R&&0!==M[t])for(let e=t+1;e<n;e++){let r=0;for(let i=t+1;i<n;i++)r+=b[i][t]*b[i][e];r=-r/b[t+1][t];for(let i=t+1;i<n;i++)b[i][e]+=r*b[i][t]}for(let e=0;e<n;e++)b[e][t]=0;b[t][t]=1}for(var C=O-1,P=Number.EPSILON;O>0;){let t,e;for(t=O-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+P*Math.abs(y[t]+Math.abs(y[t+1]));if(Math.abs(M[t])<=e||Number.isNaN(M[t])){M[t]=0;break}}if(t===O-2)e=4;else{let r;for(r=O-1;r>=t&&r!==t;r--){let e=(r!==O?Math.abs(M[r]):0)+(r!==t+1?Math.abs(M[r-1]):0);if(Math.abs(y[r])<=P*e){y[r]=0;break}}r===t?e=3:r===O-1?e=1:(e=2,t=r)}switch(t++,e){case 1:{let e=M[O-2];M[O-2]=0;for(let r=O-2;r>=t;r--){let i=o(y[r],e),s=y[r]/i,a=e/i;if(y[r]=i,r!==t&&(e=-a*M[r-1],M[r-1]=s*M[r-1]),d)for(let t=0;t<n;t++)i=s*b[t][r]+a*b[t][O-1],b[t][O-1]=-a*b[t][r]+s*b[t][O-1],b[t][r]=i}break}case 2:{let e=M[t-1];M[t-1]=0;for(let n=t;n<O;n++){let i=o(y[n],e),s=y[n]/i,a=e/i;if(y[n]=i,e=-a*M[n],M[n]=s*M[n],g)for(let e=0;e<r;e++)i=s*x[e][n]+a*x[e][t-1],x[e][t-1]=-a*x[e][n]+s*x[e][t-1],x[e][n]=i}break}case 3:{const e=Math.max(Math.abs(y[O-1]),Math.abs(y[O-2]),Math.abs(M[O-2]),Math.abs(y[t]),Math.abs(M[t])),i=y[O-1]/e,s=y[O-2]/e,a=M[O-2]/e,h=y[t]/e,u=M[t]/e,l=((s+i)*(s-i)+a*a)/2,c=i*a*(i*a);let f=0;0===l&&0===c||(f=c/(l+(f=l<0?0-Math.sqrt(l*l+c):Math.sqrt(l*l+c))));let m=(h+i)*(h-i)+f,p=h*u;for(let e=t;e<O-1;e++){let i=o(m,p);0===i&&(i=Number.MIN_VALUE);let s=m/i,a=p/i;if(e!==t&&(M[e-1]=i),m=s*y[e]+a*M[e],M[e]=s*M[e]-a*y[e],p=a*y[e+1],y[e+1]=s*y[e+1],d)for(let t=0;t<n;t++)i=s*b[t][e]+a*b[t][e+1],b[t][e+1]=-a*b[t][e]+s*b[t][e+1],b[t][e]=i;if(0===(i=o(m,p))&&(i=Number.MIN_VALUE),s=m/i,a=p/i,y[e]=i,m=s*M[e]+a*y[e+1],y[e+1]=-a*M[e]+s*y[e+1],p=a*M[e+1],M[e+1]=s*M[e+1],g&&e<r-1)for(let t=0;t<r;t++)i=s*x[t][e]+a*x[t][e+1],x[t][e+1]=-a*x[t][e]+s*x[t][e+1],x[t][e]=i}M[O-2]=m,1;break}case 4:if(y[t]<=0&&(y[t]=y[t]<0?-y[t]:0,d))for(let e=0;e<=C;e++)b[e][t]=-b[e][t];for(;t<C&&!(y[t]>=y[t+1]);){let e=y[t];if(y[t]=y[t+1],y[t+1]=e,d&&t<n-1)for(let r=0;r<n;r++)e=b[r][t+1],b[r][t+1]=b[r][t],b[r][t]=e;if(g&&t<r-1)for(let n=0;n<r;n++)e=x[n][t+1],x[n][t+1]=x[n][t],x[n][t]=e;t++}0,O--}}if(m){var N=b;b=x,x=N}this.m=r,this.n=n,this.s=y,this.U=x,this.V=b}solve(t){var e=t,r=this.threshold,n=this.s.length,i=O.zeros(n,n);for(let t=0;t<n;t++)Math.abs(this.s[t])<=r?i[t][t]=0:i[t][t]=1/this.s[t];var o=this.U,s=this.rightSingularVectors,a=s.mmul(i),h=s.rows,u=o.length,l=O.zeros(h,u);for(let t=0;t<h;t++)for(let e=0;e<u;e++){let r=0;for(let i=0;i<n;i++)r+=a[t][i]*o[e][i];l[t][e]=r}return l.mmul(e)}solveForDiagonal(t){return this.solve(O.diag(t))}inverse(){var t=this.V,e=this.threshold,r=t.length,n=t[0].length,i=new O(r,this.s.length);for(let o=0;o<r;o++)for(let r=0;r<n;r++)Math.abs(this.s[r])>e?i[o][r]=t[o][r]/this.s[r]:i[o][r]=0;var o=this.U,s=o.length,a=o[0].length,h=new O(r,s);for(let t=0;t<r;t++)for(let e=0;e<s;e++){let r=0;for(let n=0;n<a;n++)r+=i[t][n]*o[e][n];h[t][e]=r}return h}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s,n=0,i=r.length;n<i;n++)r[n]>t&&e++;return e}get diagonal(){return this.s}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return O.isMatrix(this.U)||(this.U=new O(this.U)),this.U}get rightSingularVectors(){return O.isMatrix(this.V)||(this.V=new O(this.V)),this.V}get diagonalMatrix(){return O.diag(this.s)}}function h(t,e,r){var n=r?t.rows:t.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function u(t,e,r){var n=r?t.columns:t.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function l(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function c(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function f(t,e,r){return{row:g(t,e),column:d(t,r)}}function g(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for row indices");if(e.some(e=>e<0||e>=t.rows))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function d(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for column indices");if(e.some(e=>e<0||e>=t.columns))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function m(t,e,r,n,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(p("startRow",e),p("endRow",r),p("startColumn",n),p("endColumn",i),e>r||n>i||e<0||e>=t.rows||r<0||r>=t.rows||n<0||n>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function p(t,e){if("number"!=typeof e)throw new TypeError("".concat(t," must be a number"))}class v extends(k()){constructor(t,e,r){super(),this.matrix=t,this.rows=e,this.columns=r}static get[Symbol.species](){return O}}class w extends v{constructor(t){super(t,t.columns,t.rows)}set(t,e,r){return this.matrix.set(e,t,r),this}get(t,e){return this.matrix.get(e,t)}}class y extends v{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,r){return this.matrix.set(this.row,e,r),this}get(t,e){return this.matrix.get(this.row,e)}}class x extends v{constructor(t,e,r,n,i){m(t,e,r,n,i),super(t,r-e+1,i-n+1),this.startRow=e,this.startColumn=n}set(t,e,r){return this.matrix.set(this.startRow+t,this.startColumn+e,r),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}class b extends v{constructor(t,e,r){var n=f(t,e,r);super(t,n.row.length,n.column.length),this.rowIndices=n.row,this.columnIndices=n.column}set(t,e,r){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],r),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}class M extends v{constructor(t,e){super(t,(e=g(t,e)).length,t.columns),this.rowIndices=e}set(t,e,r){return this.matrix.set(this.rowIndices[t],e,r),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}}class S extends v{constructor(t,e){e=d(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,r){return this.matrix.set(t,this.columnIndices[e],r),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}}class A extends v{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,r){return this.matrix.set(t,this.column,r),this}get(t){return this.matrix.get(t,this.column)}}class E extends v{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(this.rows-t-1,e,r),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}class R extends v{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(t,this.columns-e-1,r),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}function k(t){void 0===t&&(t=Object);class e extends t{static get[Symbol.species](){return this}static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError("Data length does not match given dimensions");for(var n=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r[i*e+o]);return n}static rowVector(t){for(var e=new this(1,t.length),r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){for(var e=new this(t.length,1),r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,r){void 0===r&&(r=Math.random);for(var n=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r());return n}static randInt(t,e,r,n){void 0===r&&(r=1e3),void 0===n&&(n=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var s=0;s<e;s++){var a=Math.floor(n()*r);i.set(o,s,a)}return i}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);for(var n=Math.min(t,e),i=this.zeros(t,e),o=0;o<n;o++)i.set(o,o,r);return i}static diag(t,e,r){var n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);for(var i=Math.min(n,e,r),o=this.zeros(e,r),s=0;s<i;s++)o.set(s,s,t[s]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,Math.min(t.get(o,s),e.get(o,s)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,Math.max(t.get(o,s),e.get(o,s)));return i}static checkMatrix(t){return e.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=this.rows,r=this.columns,n=0;n<e;n++)for(var i=0;i<r;i++)t.call(this,n,i);return this}to1DArray(){for(var t=new Array(this.size),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t[e*this.columns+r]=this.get(e,r);return t}to2DArray(){for(var t=new Array(this.rows),e=0;e<this.rows;e++){t[e]=new Array(this.columns);for(var r=0;r<this.columns;r++)t[e][r]=this.get(e,r)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,r=-1,n=!0,i=!1;for(;t<this.rows&&n;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(i=!0,r=e):(n=!1,i=!0);t++}return n}isReducedEchelonForm(){let t=0,e=0,r=-1,n=!0,i=!1;for(;t<this.rows&&n;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(i=!0,r=e):(n=!1,i=!0);for(let r=e+1;r<this.rows;r++)0!==this.get(t,r)&&(n=!1);t++}return n}set(t,e,r){throw new Error("set method is unimplemented")}get(t,e){throw new Error("get method is unimplemented")}repeat(t,e){t=t||1,e=e||1;for(var r=new this.constructor[Symbol.species](this.rows*t,this.columns*e),n=0;n<t;n++)for(var i=0;i<e;i++)r.setSubMatrix(this,this.rows*n,this.columns*i);return r}fill(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){h(this,t);for(var e=new Array(this.columns),r=0;r<this.columns;r++)e[r]=this.get(t,r);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){h(this,t),e=l(this,e);for(var r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){h(this,t),h(this,e);for(var r=0;r<this.columns;r++){var n=this.get(t,r);this.set(t,r,this.get(e,r)),this.set(e,r,n)}return this}getColumn(t){u(this,t);for(var e=new Array(this.rows),r=0;r<this.rows;r++)e[r]=this.get(r,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){u(this,t),e=c(this,e);for(var r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){u(this,t),u(this,e);for(var r=0;r<this.rows;r++){var n=this.get(r,t);this.set(r,t,this.get(r,e)),this.set(r,e,n)}return this}addRowVector(t){t=l(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=l(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=l(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=l(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=c(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=c(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=c(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=c(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){h(this,t);for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){u(this,t);for(var r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){h(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){h(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){h(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){h(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){u(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){u(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){u(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){u(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){for(var t=Math.min(this.rows,this.columns),e=new Array(t),r=0;r<t;r++)e[r]=this.get(r,r);return e}sum(t){switch(t){case"row":return function(t){for(var e=O.zeros(t.rows,1),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e.set(r,0,e.get(r,0)+t.get(r,n));return e}(this);case"column":return function(t){for(var e=O.zeros(1,t.columns),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e.set(0,n,e.get(0,n)+t.get(r,n));return e}(this);default:return function(t){for(var e=0,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e+=t.get(r,n);return e}(this)}}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t*=this.get(e,r);return t}norm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius";var e=0;if("max"===t)return this.max();if("frobenius"===t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)e+=this.get(r,n)*this.get(r,n);return Math.sqrt(e)}throw new RangeError("unknown norm type: ".concat(t))}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){e.isMatrix(t)&&(t=t.to1DArray());var r=this.to1DArray();if(r.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,i=0;i<r.length;i++)n+=r[i]*t[i];return n}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var e=this.rows,r=this.columns,n=t.columns,i=new this.constructor[Symbol.species](e,n),o=new Array(r),s=0;s<n;s++){for(var a=0;a<r;a++)o[a]=t.get(a,s);for(var h=0;h<e;h++){var u=0;for(a=0;a<r;a++)u+=this.get(h,a)*o[a];i.set(h,s,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2);const r=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),h=this.get(1,1),u=t.get(1,1),l=(r+h)*(n+u),c=(s+h)*n,f=r*(o-u),g=h*(a-n),d=(r+i)*u,m=l+g-d+(i-h)*(a+u),p=f+d,v=c+g,w=l-c+f+(s-r)*(n+o);return e.set(0,0,m),e.set(0,1,p),e.set(1,0,v),e.set(1,1,w),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3);const r=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),h=this.get(2,0),u=this.get(2,1),l=this.get(2,2),c=t.get(0,0),f=t.get(0,1),g=t.get(0,2),d=t.get(1,0),m=t.get(1,1),p=t.get(1,2),v=t.get(2,0),w=t.get(2,1),y=t.get(2,2),x=(r-o)*(-f+m),b=(-r+o+s)*(c-f+m),M=(o+s)*(-c+f),S=r*c,A=(-r+h+u)*(c-g+p),E=(-r+h)*(g-p),R=(h+u)*(-c+g),k=(-i+u+l)*(m+v-w),O=(i-l)*(m-w),C=i*v,T=(u+l)*(-v+w),P=(-i+s+a)*(p+v-y),N=(i-a)*(p-y),_=(s+a)*(-v+y),z=S+C+n*d,V=(r+n+i-o-s-u-l)*m+b+M+S+k+C+T,D=S+A+R+(r+n+i-s-a-h-u)*p+C+P+_,F=x+s*(-c+f+d-m-p-v+y)+b+S+C+P+N,L=x+b+M+S+a*w,j=C+P+N+_+o*g,I=S+A+E+u*(-c+g+d-m-p-v+w)+k+O+C,q=k+O+C+T+h*f,X=S+A+E+R+l*y;return e.set(0,0,z),e.set(0,1,V),e.set(0,2,D),e.set(1,0,F),e.set(1,1,L),e.set(1,2,j),e.set(2,0,I),e.set(2,1,q),e.set(2,2,X),e}mmulStrassen(t){var r=this.clone(),n=r.rows,i=r.columns,o=t.rows,s=t.columns;function a(t,r,n){var i=t.rows,o=t.columns;if(i===r&&o===n)return t;var s=e.zeros(r,n);return s=s.setSubMatrix(t,0,0)}i!==o&&console.warn("Multiplying ".concat(n," x ").concat(i," and ").concat(o," x ").concat(s," matrix: dimensions do not match."));var h=Math.max(n,o),u=Math.max(i,s);return function t(r,n,i,o){if(i<=512||o<=512)return r.mmul(n);i%2==1&&o%2==1?(r=a(r,i+1,o+1),n=a(n,i+1,o+1)):i%2==1?(r=a(r,i+1,o),n=a(n,i+1,o)):o%2==1&&(r=a(r,i,o+1),n=a(n,i,o+1));var s=parseInt(r.rows/2,10),h=parseInt(r.columns/2,10),u=r.subMatrix(0,s-1,0,h-1),l=n.subMatrix(0,s-1,0,h-1),c=r.subMatrix(0,s-1,h,r.columns-1),f=n.subMatrix(0,s-1,h,n.columns-1),g=r.subMatrix(s,r.rows-1,0,h-1),d=n.subMatrix(s,n.rows-1,0,h-1),m=r.subMatrix(s,r.rows-1,h,r.columns-1),p=n.subMatrix(s,n.rows-1,h,n.columns-1),v=t(e.add(u,m),e.add(l,p),s,h),w=t(e.add(g,m),l,s,h),y=t(u,e.sub(f,p),s,h),x=t(m,e.sub(d,l),s,h),b=t(e.add(u,c),p,s,h),M=t(e.sub(g,u),e.add(l,f),s,h),S=t(e.sub(c,m),e.add(d,p),s,h),A=e.add(v,x);A.sub(b),A.add(S);var E=e.add(y,b),R=e.add(w,x),k=e.sub(v,w);k.add(y),k.add(M);var O=e.zeros(2*A.rows,2*A.columns);return(O=(O=(O=(O=O.setSubMatrix(A,0,0)).setSubMatrix(E,A.rows,0)).setSubMatrix(R,0,A.columns)).setSubMatrix(k,A.rows,A.columns)).subMatrix(0,i-1,0,o-1)}(r=a(r,h,u),t=a(t,h,u),h,u)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var r=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++){var o=Object(n.default)(this.getRow(i),{min:t,max:e});r.setRow(i,o)}return r}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var r=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++){var o=Object(n.default)(this.getColumn(i),{min:t,max:e});r.setColumn(i,o)}return r}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*n,r*i),s=0;s<e;s++)for(var a=0;a<r;a++)for(var h=0;h<n;h++)for(var u=0;u<i;u++)o[n*s+h][i*a+u]=this.get(s,a)*t.get(h,u);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t){void 0===t&&(t=r);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=r);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,n){m(this,t,e,r,n);for(var i=new this.constructor[Symbol.species](e-t+1,n-r+1),o=t;o<=e;o++)for(var s=r;s<=n;s++)i[o-t][s-r]=this.get(o,s);return i}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||e<0||e>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");for(var n=new this.constructor[Symbol.species](t.length,r-e+1),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[i]));n.set(i,o-e,this.get(t[i],o))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||e<0||e>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");for(var n=new this.constructor[Symbol.species](r-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[i]));n.set(o-e,i,this.get(o,t[i]))}return n}setSubMatrix(t,e,r){m(this,e,e+(t=this.constructor.checkMatrix(t)).rows-1,r,r+t.columns-1);for(var n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)this[e+n][r+i]=t.get(n,i);return this}selection(t,e){for(var r=f(this,t,e),n=new this.constructor[Symbol.species](t.length,e.length),i=0;i<r.row.length;i++)for(var o=r.row[i],s=0;s<r.column.length;s++){var a=r.column[s];n[i][s]=this.get(o,a)}return n}trace(){for(var t=Math.min(this.rows,this.columns),e=0,r=0;r<t;r++)e+=this.get(r,r);return e}transposeView(){return new w(this)}rowView(t){return h(this,t),new y(this,t)}columnView(t){return u(this,t),new A(this,t)}flipRowView(){return new E(this)}flipColumnView(){return new R(this)}subMatrixView(t,e,r,n){return new x(this,t,e,r,n)}selectionView(t,e){return new b(this,t,e)}rowSelectionView(t){return new M(this,t)}columnSelectionView(t){return new S(this,t)}det(){var t,e,r,n,o,s;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),r=this.get(1,0),t*this.get(1,1)-e*r):3===this.columns?(n=this.selectionView([1,2],[1,2]),o=this.selectionView([1,2],[0,2]),s=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),r=this.get(0,2),t*n.det()-e*o.det()+r*s.det()):new i(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=Number.EPSILON);for(var e=new a(this,{autoTranspose:!0}),r=e.leftSingularVectors,n=e.rightSingularVectors,i=e.diagonal,o=0;o<i.length;o++)Math.abs(i[o])>t?i[o]=1/i[o]:i[o]=0;return i=this.constructor[Symbol.species].diag(i),n.mmul(i.mmul(r.transposeView()))}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}}function r(t,e){return t-e}e.prototype.klass="Matrix",e.random=e.rand,e.diagonal=e.diag,e.prototype.diagonal=e.prototype.diag,e.identity=e.eye,e.prototype.negate=e.prototype.neg,e.prototype.tensorProduct=e.prototype.kroneckerProduct,e.prototype.determinant=e.prototype.det;var o,s="\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",g=eval;for(var d of[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]]){var p=g(U("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",{name:d[1],op:d[0]})),v=g(U("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n",{name:"".concat(d[1],"S"),op:d[0]})),k=g(U("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n",{name:"".concat(d[1],"M"),op:d[0]})),C=g(U("\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n",{name:d[1]}));for(o=1;o<d.length;o++)e.prototype[d[o]]=p,e.prototype["".concat(d[o],"S")]=v,e.prototype["".concat(d[o],"M")]=k,e[d[o]]=C}var T=[["~","not"]];for(var P of(["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(t){T.push(["Math.".concat(t),t])}),T)){var N=g(U("\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n",{name:P[1],method:P[0]})),_=g(U("\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n",{name:P[1]}));for(o=1;o<P.length;o++)e.prototype[P[o]]=N,e[P[o]]=_}for(var z of[["Math.pow",1,"pow"]]){var V="arg0";for(o=1;o<z[1];o++)V+=", arg".concat(o);if(1!==z[1]){var D=g(U("\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n",{name:z[2],method:z[0],args:V})),F=g(U(s,{name:z[2],args:V}));for(o=2;o<z.length;o++)e.prototype[z[o]]=D,e[z[o]]=F}else{var L={name:z[2],args:V,method:z[0]},j=g(U("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",L)),I=g(U("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n",L)),q=g(U("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n",L)),X=g(U("\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",L));for(o=2;o<z.length;o++)e.prototype[z[o]]=j,e.prototype["".concat(z[o],"M")]=q,e.prototype["".concat(z[o],"S")]=I,e[z[o]]=X}}function U(t,e){for(var r in e)t=t.replace(new RegExp("%".concat(r,"%"),"g"),e[r]);return t}return e}class O extends(k(Array)){constructor(t,e){var r;if(1===arguments.length&&"number"==typeof t)return new Array(t);if(O.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>0){if(super(t),!(Number.isInteger(e)&&e>0))throw new TypeError("nColumns must be a positive integer");for(r=0;r<t;r++)this[r]=new Array(e)}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");{const n=t;if(t=n.length,"number"!=typeof(e=n[0].length)||0===e)throw new TypeError("Data must be a 2D array with at least one element");for(super(t),r=0;r<t;r++){if(n[r].length!==e)throw new RangeError("Inconsistent array dimensions");this[r]=[].concat(n[r])}}}return this.rows=t,this.columns=e,this}set(t,e,r){return this[t][e]=r,this}get(t,e){return this[t][e]}removeRow(t){if(h(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),h(this,t,!0),e=l(this,e),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(u(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),u(this,t,!0),e=c(this,e);for(var r=0;r<this.rows;r++)this[r].splice(t,0,e[r]);return this.columns+=1,this}}class C extends(k()){constructor(t){const e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).rows,r=void 0===e?1:e;if(t.length%r!=0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=r,this.columns=t.length/r,this.data=t}set(t,e,r){var n=this._calculateIndex(t,e);return this.data[n]=r,this}get(t,e){var r=this._calculateIndex(t,e);return this.data[r]}_calculateIndex(t,e){return t*this.columns+e}static get[Symbol.species](){return O}}class T extends(k()){constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}static get[Symbol.species](){return O}}function P(t,e){if(Array.isArray(t))return t[0]&&Array.isArray(t[0])?new T(t):new C(t,e);throw new Error("the argument is not an array")}class N{constructor(t){var e,r,n,i,s=(t=T.checkMatrix(t)).clone(),a=t.rows,h=t.columns,u=new Array(h);for(n=0;n<h;n++){var l=0;for(e=n;e<a;e++)l=o(l,s.get(e,n));if(0!==l){for(s.get(n,n)<0&&(l=-l),e=n;e<a;e++)s.set(e,n,s.get(e,n)/l);for(s.set(n,n,s.get(n,n)+1),r=n+1;r<h;r++){for(i=0,e=n;e<a;e++)i+=s.get(e,n)*s.get(e,r);for(i=-i/s.get(n,n),e=n;e<a;e++)s.set(e,r,s.get(e,r)+i*s.get(e,n))}}u[n]=-l}this.QR=s,this.Rdiag=u}solve(t){t=O.checkMatrix(t);var e=this.QR,r=e.rows;if(t.rows!==r)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var n,i,o,s,a=t.columns,h=t.clone(),u=e.columns;for(o=0;o<u;o++)for(i=0;i<a;i++){for(s=0,n=o;n<r;n++)s+=e[n][o]*h[n][i];for(s=-s/e[o][o],n=o;n<r;n++)h[n][i]+=s*e[n][o]}for(o=u-1;o>=0;o--){for(i=0;i<a;i++)h[o][i]/=this.Rdiag[o];for(n=0;n<o;n++)for(i=0;i<a;i++)h[n][i]-=h[o][i]*e[n][o]}return h.subMatrix(0,u-1,0,a-1)}isFullRank(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}get upperTriangularMatrix(){var t,e,r=this.QR,n=r.columns,i=new O(n,n);for(t=0;t<n;t++)for(e=0;e<n;e++)i[t][e]=t<e?r[t][e]:t===e?this.Rdiag[t]:0;return i}get orthogonalMatrix(){var t,e,r,n,i=this.QR,o=i.rows,s=i.columns,a=new O(o,s);for(r=s-1;r>=0;r--){for(t=0;t<o;t++)a[t][r]=0;for(a[r][r]=1,e=r;e<s;e++)if(0!==i[r][r]){for(n=0,t=r;t<o;t++)n+=i[t][r]*a[t][e];for(n=-n/i[r][r],t=r;t<o;t++)a[t][e]+=n*i[t][r]}}return a}}function _(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=T.checkMatrix(t),e?new a(t).inverse():z(t,O.eye(t.rows))}function z(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=T.checkMatrix(t),e=T.checkMatrix(e),r?new a(t).solve(e):t.isSquare()?new i(t).solve(e):new N(t).solve(e)}var V=r(9);function D(t,e){for(var r=[],n=0;n<t;n++)n!==e&&r.push(n);return r}function F(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-9;if(t>(arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-9))return new Array(e.rows+1).fill(0);for(var i=e.addRow(r,[0]),o=0;o<i.rows;o++)Math.abs(i.get(o,0))<n&&i.set(o,0,0);return i.to1DArray()}function L(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.thresholdValue,n=void 0===r?1e-9:r,i=e.thresholdError,o=void 0===i?1e-9:i;for(var s=t.rows,h=new O(s,s),u=0;u<s;u++){var l=O.columnVector(t.getRow(u)),c=t.subMatrixRow(D(s,u)).transposeView(),f=new a(c).solve(l),g=Object(V.default)(O.sub(l,c.mmul(f)).abs().to1DArray());h.setRow(u,F(g,f,u,n,o))}return h}class j{constructor(t){const e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).assumeSymmetric,r=void 0!==e&&e;if(!(t=T.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");var n,i,a=t.columns,h=s(a,a,0),u=new Array(a),l=new Array(a),c=t;if(!!r||t.isSymmetric()){for(n=0;n<a;n++)for(i=0;i<a;i++)h[n][i]=c.get(n,i);!function(t,e,r,n){var i,o,s,a,h,u,l,c;for(h=0;h<t;h++)r[h]=n[t-1][h];for(a=t-1;a>0;a--){for(c=0,s=0,u=0;u<a;u++)c+=Math.abs(r[u]);if(0===c)for(e[a]=r[a-1],h=0;h<a;h++)r[h]=n[a-1][h],n[a][h]=0,n[h][a]=0;else{for(u=0;u<a;u++)r[u]/=c,s+=r[u]*r[u];for(i=r[a-1],o=Math.sqrt(s),i>0&&(o=-o),e[a]=c*o,s-=i*o,r[a-1]=i-o,h=0;h<a;h++)e[h]=0;for(h=0;h<a;h++){for(i=r[h],n[h][a]=i,o=e[h]+n[h][h]*i,u=h+1;u<=a-1;u++)o+=n[u][h]*r[u],e[u]+=n[u][h]*i;e[h]=o}for(i=0,h=0;h<a;h++)e[h]/=s,i+=e[h]*r[h];for(l=i/(s+s),h=0;h<a;h++)e[h]-=l*r[h];for(h=0;h<a;h++){for(i=r[h],o=e[h],u=h;u<=a-1;u++)n[u][h]-=i*e[u]+o*r[u];r[h]=n[a-1][h],n[a][h]=0}}r[a]=s}for(a=0;a<t-1;a++){if(n[t-1][a]=n[a][a],n[a][a]=1,0!==(s=r[a+1])){for(u=0;u<=a;u++)r[u]=n[u][a+1]/s;for(h=0;h<=a;h++){for(o=0,u=0;u<=a;u++)o+=n[u][a+1]*n[u][h];for(u=0;u<=a;u++)n[u][h]-=o*r[u]}}for(u=0;u<=a;u++)n[u][a+1]=0}for(h=0;h<t;h++)r[h]=n[t-1][h],n[t-1][h]=0;n[t-1][t-1]=1,e[0]=0}(a,l,u,h),function(t,e,r,n){var i,s,a,h,u,l,c,f,g,d,m,p,v,w,y,x;for(a=1;a<t;a++)e[a-1]=e[a];e[t-1]=0;var b=0,M=0,S=Number.EPSILON;for(l=0;l<t;l++){for(M=Math.max(M,Math.abs(r[l])+Math.abs(e[l])),c=l;c<t&&!(Math.abs(e[c])<=S*M);)c++;if(c>l){0;do{for(1,i=r[l],f=(r[l+1]-i)/(2*e[l]),g=o(f,1),f<0&&(g=-g),r[l]=e[l]/(f+g),r[l+1]=e[l]*(f+g),d=r[l+1],s=i-r[l],a=l+2;a<t;a++)r[a]-=s;for(b+=s,f=r[c],p=m=1,v=m,w=e[l+1],y=0,x=0,a=c-1;a>=l;a--)for(v=p,p=m,x=y,i=m*e[a],s=m*f,g=o(f,e[a]),e[a+1]=y*g,y=e[a]/g,f=(m=f/g)*r[a]-y*i,r[a+1]=s+y*(m*i+y*r[a]),u=0;u<t;u++)s=n[u][a+1],n[u][a+1]=y*n[u][a]+m*s,n[u][a]=m*n[u][a]-y*s;f=-y*x*v*w*e[l]/d,e[l]=y*f,r[l]=m*f}while(Math.abs(e[l])>S*M)}r[l]=r[l]+b,e[l]=0}for(a=0;a<t-1;a++){for(u=a,f=r[a],h=a+1;h<t;h++)r[h]<f&&(u=h,f=r[h]);if(u!==a)for(r[u]=r[a],r[a]=f,h=0;h<t;h++)f=n[h][a],n[h][a]=n[h][u],n[h][u]=f}}(a,l,u,h)}else{var f=s(a,a,0),g=new Array(a);for(i=0;i<a;i++)for(n=0;n<a;n++)f[n][i]=c.get(n,i);!function(t,e,r,n){var i,o,s,a,h,u,l,c=t-1;for(u=1;u<=c-1;u++){for(l=0,a=u;a<=c;a++)l+=Math.abs(e[a][u-1]);if(0!==l){for(s=0,a=c;a>=u;a--)r[a]=e[a][u-1]/l,s+=r[a]*r[a];for(o=Math.sqrt(s),r[u]>0&&(o=-o),s-=r[u]*o,r[u]=r[u]-o,h=u;h<t;h++){for(i=0,a=c;a>=u;a--)i+=r[a]*e[a][h];for(i/=s,a=u;a<=c;a++)e[a][h]-=i*r[a]}for(a=0;a<=c;a++){for(i=0,h=c;h>=u;h--)i+=r[h]*e[a][h];for(i/=s,h=u;h<=c;h++)e[a][h]-=i*r[h]}r[u]=l*r[u],e[u][u-1]=l*o}}for(a=0;a<t;a++)for(h=0;h<t;h++)n[a][h]=a===h?1:0;for(u=c-1;u>=1;u--)if(0!==e[u][u-1]){for(a=u+1;a<=c;a++)r[a]=e[a][u-1];for(h=u;h<=c;h++){for(o=0,a=u;a<=c;a++)o+=r[a]*n[a][h];for(o=o/r[u]/e[u][u-1],a=u;a<=c;a++)n[a][h]+=o*r[a]}}}(a,f,g,h),function(t,e,r,n,i){var o,s,a,h,u,l,c,f,g,d,m,p,v,w,y,x=t-1,b=t-1,M=Number.EPSILON,S=0,A=0,E=0,R=0,k=0,O=0,C=0,T=0;for(o=0;o<t;o++)for((o<0||o>b)&&(r[o]=i[o][o],e[o]=0),s=Math.max(o-1,0);s<t;s++)A+=Math.abs(i[o][s]);for(;x>=0;){for(h=x;h>0&&(0===(O=Math.abs(i[h-1][h-1])+Math.abs(i[h][h]))&&(O=A),!(Math.abs(i[h][h-1])<M*O));)h--;if(h===x)i[x][x]=i[x][x]+S,r[x]=i[x][x],e[x]=0,x--,T=0;else if(h===x-1){if(c=i[x][x-1]*i[x-1][x],E=(i[x-1][x-1]-i[x][x])/2,R=E*E+c,C=Math.sqrt(Math.abs(R)),i[x][x]=i[x][x]+S,i[x-1][x-1]=i[x-1][x-1]+S,f=i[x][x],R>=0){for(C=E>=0?E+C:E-C,r[x-1]=f+C,r[x]=r[x-1],0!==C&&(r[x]=f-c/C),e[x-1]=0,e[x]=0,f=i[x][x-1],O=Math.abs(f)+Math.abs(C),E=f/O,R=C/O,k=Math.sqrt(E*E+R*R),E/=k,R/=k,s=x-1;s<t;s++)C=i[x-1][s],i[x-1][s]=R*C+E*i[x][s],i[x][s]=R*i[x][s]-E*C;for(o=0;o<=x;o++)C=i[o][x-1],i[o][x-1]=R*C+E*i[o][x],i[o][x]=R*i[o][x]-E*C;for(o=0;o<=b;o++)C=n[o][x-1],n[o][x-1]=R*C+E*n[o][x],n[o][x]=R*n[o][x]-E*C}else r[x-1]=f+E,r[x]=f+E,e[x-1]=C,e[x]=-C;x-=2,T=0}else{if(f=i[x][x],g=0,c=0,h<x&&(g=i[x-1][x-1],c=i[x][x-1]*i[x-1][x]),10===T){for(S+=f,o=0;o<=x;o++)i[o][o]-=f;O=Math.abs(i[x][x-1])+Math.abs(i[x-1][x-2]),f=g=.75*O,c=-.4375*O*O}if(30===T&&(O=(O=(g-f)/2)*O+c)>0){for(O=Math.sqrt(O),g<f&&(O=-O),O=f-c/((g-f)/2+O),o=0;o<=x;o++)i[o][o]-=O;S+=O,f=g=c=.964}for(T+=1,u=x-2;u>=h&&(C=i[u][u],E=((k=f-C)*(O=g-C)-c)/i[u+1][u]+i[u][u+1],R=i[u+1][u+1]-C-k-O,k=i[u+2][u+1],O=Math.abs(E)+Math.abs(R)+Math.abs(k),E/=O,R/=O,k/=O,u!==h)&&!(Math.abs(i[u][u-1])*(Math.abs(R)+Math.abs(k))<M*(Math.abs(E)*(Math.abs(i[u-1][u-1])+Math.abs(C)+Math.abs(i[u+1][u+1]))));)u--;for(o=u+2;o<=x;o++)i[o][o-2]=0,o>u+2&&(i[o][o-3]=0);for(a=u;a<=x-1&&(w=a!==x-1,a!==u&&(E=i[a][a-1],R=i[a+1][a-1],k=w?i[a+2][a-1]:0,0!==(f=Math.abs(E)+Math.abs(R)+Math.abs(k))&&(E/=f,R/=f,k/=f)),0!==f);a++)if(O=Math.sqrt(E*E+R*R+k*k),E<0&&(O=-O),0!==O){for(a!==u?i[a][a-1]=-O*f:h!==u&&(i[a][a-1]=-i[a][a-1]),f=(E+=O)/O,g=R/O,C=k/O,R/=E,k/=E,s=a;s<t;s++)E=i[a][s]+R*i[a+1][s],w&&(E+=k*i[a+2][s],i[a+2][s]=i[a+2][s]-E*C),i[a][s]=i[a][s]-E*f,i[a+1][s]=i[a+1][s]-E*g;for(o=0;o<=Math.min(x,a+3);o++)E=f*i[o][a]+g*i[o][a+1],w&&(E+=C*i[o][a+2],i[o][a+2]=i[o][a+2]-E*k),i[o][a]=i[o][a]-E,i[o][a+1]=i[o][a+1]-E*R;for(o=0;o<=b;o++)E=f*n[o][a]+g*n[o][a+1],w&&(E+=C*n[o][a+2],n[o][a+2]=n[o][a+2]-E*k),n[o][a]=n[o][a]-E,n[o][a+1]=n[o][a+1]-E*R}}}if(0===A)return;for(x=t-1;x>=0;x--)if(E=r[x],0===(R=e[x]))for(h=x,i[x][x]=1,o=x-1;o>=0;o--){for(c=i[o][o]-E,k=0,s=h;s<=x;s++)k+=i[o][s]*i[s][x];if(e[o]<0)C=c,O=k;else if(h=o,0===e[o]?i[o][x]=0!==c?-k/c:-k/(M*A):(f=i[o][o+1],g=i[o+1][o],R=(r[o]-E)*(r[o]-E)+e[o]*e[o],l=(f*O-C*k)/R,i[o][x]=l,i[o+1][x]=Math.abs(f)>Math.abs(C)?(-k-c*l)/f:(-O-g*l)/C),l=Math.abs(i[o][x]),M*l*l>1)for(s=o;s<=x;s++)i[s][x]=i[s][x]/l}else if(R<0)for(h=x-1,Math.abs(i[x][x-1])>Math.abs(i[x-1][x])?(i[x-1][x-1]=R/i[x][x-1],i[x-1][x]=-(i[x][x]-E)/i[x][x-1]):(y=I(0,-i[x-1][x],i[x-1][x-1]-E,R),i[x-1][x-1]=y[0],i[x-1][x]=y[1]),i[x][x-1]=0,i[x][x]=1,o=x-2;o>=0;o--){for(d=0,m=0,s=h;s<=x;s++)d+=i[o][s]*i[s][x-1],m+=i[o][s]*i[s][x];if(c=i[o][o]-E,e[o]<0)C=c,k=d,O=m;else if(h=o,0===e[o]?(y=I(-d,-m,c,R),i[o][x-1]=y[0],i[o][x]=y[1]):(f=i[o][o+1],g=i[o+1][o],p=(r[o]-E)*(r[o]-E)+e[o]*e[o]-R*R,v=2*(r[o]-E)*R,0===p&&0===v&&(p=M*A*(Math.abs(c)+Math.abs(R)+Math.abs(f)+Math.abs(g)+Math.abs(C))),y=I(f*k-C*d+R*m,f*O-C*m-R*d,p,v),i[o][x-1]=y[0],i[o][x]=y[1],Math.abs(f)>Math.abs(C)+Math.abs(R)?(i[o+1][x-1]=(-d-c*i[o][x-1]+R*i[o][x])/f,i[o+1][x]=(-m-c*i[o][x]-R*i[o][x-1])/f):(y=I(-k-g*i[o][x-1],-O-g*i[o][x],C,R),i[o+1][x-1]=y[0],i[o+1][x]=y[1])),l=Math.max(Math.abs(i[o][x-1]),Math.abs(i[o][x])),M*l*l>1)for(s=o;s<=x;s++)i[s][x-1]=i[s][x-1]/l,i[s][x]=i[s][x]/l}for(o=0;o<t;o++)if(o<0||o>b)for(s=o;s<t;s++)n[o][s]=i[o][s];for(s=t-1;s>=0;s--)for(o=0;o<=b;o++){for(C=0,a=0;a<=Math.min(s,b);a++)C+=n[o][a]*i[a][s];n[o][s]=C}}(a,l,u,h,f)}this.n=a,this.e=l,this.d=u,this.V=h}get realEigenvalues(){return this.d}get imaginaryEigenvalues(){return this.e}get eigenvectorMatrix(){return O.isMatrix(this.V)||(this.V=new O(this.V)),this.V}get diagonalMatrix(){var t,e,r=this.n,n=this.e,i=this.d,o=new O(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)o[t][e]=0;o[t][t]=i[t],n[t]>0?o[t][t+1]=n[t]:n[t]<0&&(o[t][t-1]=n[t])}return o}}function I(t,e,r,n){var i,o;return Math.abs(r)>Math.abs(n)?[(t+(i=n/r)*e)/(o=r+i*n),(e-i*t)/o]:[((i=r/n)*t+e)/(o=n+i*r),(i*e-t)/o]}class q{constructor(t){if(!(t=T.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");var e,r,n,i=t,o=i.rows,s=new O(o,o),a=!0;for(r=0;r<o;r++){var h=s[r],u=0;for(n=0;n<r;n++){var l=s[n],c=0;for(e=0;e<n;e++)c+=l[e]*h[e];h[n]=c=(i.get(r,n)-c)/s[n][n],u+=c*c}for(a&=(u=i.get(r,r)-u)>0,s[r][r]=Math.sqrt(Math.max(u,0)),n=r+1;n<o;n++)s[r][n]=0}if(!a)throw new Error("Matrix is not positive definite");this.L=s}solve(t){t=T.checkMatrix(t);var e=this.L,r=e.rows;if(t.rows!==r)throw new Error("Matrix dimensions do not match");var n,i,o,s=t.columns,a=t.clone();for(o=0;o<r;o++)for(i=0;i<s;i++){for(n=0;n<o;n++)a[o][i]-=a[n][i]*e[o][n];a[o][i]/=e[o][o]}for(o=r-1;o>=0;o--)for(i=0;i<s;i++){for(n=o+1;n<r;n++)a[o][i]-=a[n][i]*e[n][o];a[o][i]/=e[o][o]}return a}get lowerTriangularMatrix(){return this.L}}r.d(e,"default",function(){return O}),r.d(e,"Matrix",function(){return O}),r.d(e,"abstractMatrix",function(){return k}),r.d(e,"wrap",function(){return P}),r.d(e,"WrapperMatrix2D",function(){return T}),r.d(e,"WrapperMatrix1D",function(){return C}),r.d(e,"solve",function(){return z}),r.d(e,"inverse",function(){return _}),r.d(e,"linearDependencies",function(){return L}),r.d(e,"SingularValueDecomposition",function(){return a}),r.d(e,"SVD",function(){return a}),r.d(e,"EigenvalueDecomposition",function(){return j}),r.d(e,"EVD",function(){return j}),r.d(e,"CholeskyDecomposition",function(){return q}),r.d(e,"CHO",function(){return q}),r.d(e,"LuDecomposition",function(){return i}),r.d(e,"LU",function(){return i}),r.d(e,"QrDecomposition",function(){return N}),r.d(e,"QR",function(){return N})},function(t,e,r){"use strict";const n=Object.prototype.toString;t.exports=function(t){return n.call(t).endsWith("Array]")}},function(t,e,r){"use strict";function n(t,e){for(var r=0,n=0;n<t.length;n++)r+=(t[n]-e[n])*(t[n]-e[n]);return r}function i(t,e){return Math.sqrt(n(t,e))}t.exports=i,i.squared=n},function(t,e,r){"use strict";e.array=r(21),e.matrix=r(4)},function(t,e,r){"use strict";var n=r(21);function i(t,e){return t-e}e.max=function(t){for(var e=-1/0,r=0;r<t.length;r++)for(var n=0;n<t[r].length;n++)t[r][n]>e&&(e=t[r][n]);return e},e.min=function(t){for(var e=1/0,r=0;r<t.length;r++)for(var n=0;n<t[r].length;n++)t[r][n]<e&&(e=t[r][n]);return e},e.minMax=function(t){for(var e=1/0,r=-1/0,n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)t[n][i]<e&&(e=t[n][i]),t[n][i]>r&&(r=t[n][i]);return{min:e,max:r}},e.entropy=function(t,e){void 0===e&&(e=0);for(var r=0,n=t.length,i=t[0].length,o=0;o<n;o++)for(var s=0;s<i;s++)r+=t[o][s]*Math.log(t[o][s]+e);return-r},e.mean=function(t,e){void 0===e&&(e=0);var r,n,i,o,s=t.length,a=t[0].length;if(-1===e){for(r=[0],n=s*a,i=0;i<s;i++)for(o=0;o<a;o++)r[0]+=t[i][o];r[0]/=n}else if(0===e)for(r=new Array(a),n=s,o=0;o<a;o++){for(r[o]=0,i=0;i<s;i++)r[o]+=t[i][o];r[o]/=n}else{if(1!==e)throw new Error("Invalid dimension");for(r=new Array(s),n=a,o=0;o<s;o++){for(r[o]=0,i=0;i<a;i++)r[o]+=t[o][i];r[o]/=n}}return r},e.sum=function(t,e){void 0===e&&(e=0);var r,n,i,o=t.length,s=t[0].length;if(-1===e)for(r=[0],n=0;n<o;n++)for(i=0;i<s;i++)r[0]+=t[n][i];else if(0===e)for(r=new Array(s),i=0;i<s;i++)for(r[i]=0,n=0;n<o;n++)r[i]+=t[n][i];else{if(1!==e)throw new Error("Invalid dimension");for(r=new Array(o),i=0;i<o;i++)for(r[i]=0,n=0;n<s;n++)r[i]+=t[i][n]}return r},e.product=function(t,e){void 0===e&&(e=0);var r,n,i,o=t.length,s=t[0].length;if(-1===e)for(r=[1],n=0;n<o;n++)for(i=0;i<s;i++)r[0]*=t[n][i];else if(0===e)for(r=new Array(s),i=0;i<s;i++)for(r[i]=1,n=0;n<o;n++)r[i]*=t[n][i];else{if(1!==e)throw new Error("Invalid dimension");for(r=new Array(o),i=0;i<o;i++)for(r[i]=1,n=0;n<s;n++)r[i]*=t[i][n]}return r},e.standardDeviation=function(t,r,n){for(var i=e.variance(t,r,n),o=i.length,s=0;s<o;s++)i[s]=Math.sqrt(i[s]);return i},e.variance=function(t,r,n){void 0===n&&(n=!0),r=r||e.mean(t);var i=t.length;if(0===i)return[];for(var o=t[0].length,s=new Array(o),a=0;a<o;a++){for(var h=0,u=0,l=0,c=0;c<i;c++)h+=l=t[c][a]-r[a],u+=l*l;s[a]=n?(u-h*h/i)/(i-1):(u-h*h/i)/i}return s},e.median=function(t){for(var e=t.length,r=t[0].length,n=new Array(r),o=0;o<r;o++){for(var s=new Array(e),a=0;a<e;a++)s[a]=t[a][o];s.sort(i);var h=s.length;n[o]=h%2==0?.5*(s[h/2]+s[h/2-1]):s[Math.floor(h/2)]}return n},e.mode=function(t){var e,r,n=t.length,i=t[0].length,o=new Array(i);for(e=0;e<i;e++){for(var s=new Array(n),a=0;a<n;a++)s[a]=0;var h=new Array(n),u=0;for(r=0;r<n;r++){var l=h.indexOf(t[r][e]);l>=0?s[l]++:(h[u]=t[r][e],s[u]=1,u++)}var c=0,f=0;for(r=0;r<u;r++)s[r]>c&&(c=s[r],f=r);o[e]=h[f]}return o},e.skewness=function(t,r){void 0===r&&(r=!0);for(var n=e.mean(t),i=t.length,o=n.length,s=new Array(o),a=0;a<o;a++){for(var h=0,u=0,l=0;l<i;l++){var c=t[l][a]-n[a];h+=c*c,u+=c*c*c}var f=h/i,g=u/i/Math.pow(f,1.5);if(r){var d=Math.sqrt(i*(i-1)),m=i-2;s[a]=d/m*g}else s[a]=g}return s},e.kurtosis=function(t,r){void 0===r&&(r=!0);for(var n=e.mean(t),i=t.length,o=t[0].length,s=new Array(o),a=0;a<o;a++){for(var h=0,u=0,l=0;l<i;l++){var c=t[l][a]-n[a];h+=c*c,u+=c*c*c*c}var f=h/i,g=u/i;if(r){var d=h/(i-1),m=i*(i+1)/((i-1)*(i-2)*(i-3)),p=u/(d*d),v=(i-1)*(i-1)/((i-2)*(i-3));s[a]=m*p-3*v}else s[a]=g/(f*f)-3}return s},e.standardError=function(t){for(var r=t.length,n=e.standardDeviation(t),i=n.length,o=new Array(i),s=Math.sqrt(r),a=0;a<i;a++)o[a]=n[a]/s;return o},e.covariance=function(t,r){return e.scatter(t,void 0,r)},e.scatter=function(t,r,n){void 0===n&&(n=0),void 0===r&&(0===n?r=t.length-1:1===n&&(r=t[0].length-1));var i=e.mean(t,n),o=t.length;if(0===o)return[[]];var s,a,h,u,l,c=t[0].length;if(0===n){for(s=new Array(c),a=0;a<c;a++)s[a]=new Array(c);for(a=0;a<c;a++)for(h=a;h<c;h++){for(u=0,l=0;l<o;l++)u+=(t[l][h]-i[h])*(t[l][a]-i[a]);u/=r,s[a][h]=u,s[h][a]=u}}else{if(1!==n)throw new Error("Invalid dimension");for(s=new Array(o),a=0;a<o;a++)s[a]=new Array(o);for(a=0;a<o;a++)for(h=a;h<o;h++){for(u=0,l=0;l<c;l++)u+=(t[h][l]-i[h])*(t[a][l]-i[a]);u/=r,s[a][h]=u,s[h][a]=u}}return s},e.correlation=function(t){var r,n,i=e.mean(t),o=e.standardDeviation(t,!0,i),s=e.zScores(t,i,o),a=t.length,h=t[0].length,u=new Array(h);for(r=0;r<h;r++)u[r]=new Array(h);for(r=0;r<h;r++)for(n=r;n<h;n++){for(var l=0,c=0,f=s.length;c<f;c++)l+=s[c][n]*s[c][r];l/=a-1,u[r][n]=l,u[n][r]=l}return u},e.zScores=function(t,r,n){return r=r||e.mean(t),void 0===n&&(n=e.standardDeviation(t,!0,r)),e.standardize(e.center(t,r,!1),n,!0)},e.center=function(t,r,n){r=r||e.mean(t);var i,o,s,a=t,h=t.length;if(!n)for(a=new Array(h),i=0;i<h;i++)a[i]=new Array(t[i].length);for(i=0;i<h;i++){var u=a[i];for(o=0,s=u.length;o<s;o++)u[o]=t[i][o]-r[o]}return a},e.standardize=function(t,r,n){void 0===r&&(r=e.standardDeviation(t));var i,o,s,a=t,h=t.length;if(!n)for(a=new Array(h),i=0;i<h;i++)a[i]=new Array(t[i].length);for(i=0;i<h;i++){var u=a[i],l=t[i];for(o=0,s=u.length;o<s;o++)0===r[o]||isNaN(r[o])||(u[o]=l[o]/r[o])}return a},e.weightedVariance=function(t,r){var n=e.mean(t),i=t.length;if(0===i)return[];for(var o=t[0].length,s=new Array(o),a=0;a<o;a++){for(var h=0,u=0,l=0,c=0;c<i;c++){var f=t[c][a]-n[a],g=r[c];h+=g*(f*f),l+=g,u+=g*g}s[a]=h*(l/(l*l-u))}return s},e.weightedMean=function(t,e,r){void 0===r&&(r=0);var i=t.length;if(0===i)return[];var o,s,a,h,u,l,c=t[0].length;if(0===r){for(o=new Array(c),s=0;s<c;s++)o[s]=0;for(s=0;s<i;s++)for(l=t[s],u=e[s],h=0;h<c;h++)o[h]+=l[h]*u}else{if(1!==r)throw new Error("Invalid dimension");for(o=new Array(i),s=0;s<i;s++)o[s]=0;for(h=0;h<i;h++)for(l=t[h],u=e[h],s=0;s<c;s++)o[h]+=l[s]*u}var f=n.sum(e);if(0!==f)for(s=0,a=o.length;s<a;s++)o[s]/=f;return o},e.weightedCovariance=function(t,r,n,i){i=i||0,n=n||e.weightedMean(t,r,i);for(var o=0,s=0,a=0,h=r.length;a<h;a++)o+=r[a],s+=r[a]*r[a];var u=o/(o*o-s);return e.weightedScatter(t,r,n,u,i)},e.weightedScatter=function(t,r,n,i,o){o=o||0,n=n||e.weightedMean(t,r,o),void 0===i&&(i=1);var s=t.length;if(0===s)return[[]];var a,h,u,l,c,f=t[0].length;if(0===o){for(a=new Array(f),h=0;h<f;h++)a[h]=new Array(f);for(h=0;h<f;h++)for(u=h;u<f;u++){for(c=0,l=0;l<s;l++)c+=r[l]*(t[l][u]-n[u])*(t[l][h]-n[h]);a[h][u]=c*i,a[u][h]=c*i}}else{if(1!==o)throw new Error("Invalid dimension");for(a=new Array(s),h=0;h<s;h++)a[h]=new Array(s);for(h=0;h<s;h++)for(u=h;u<s;u++){for(c=0,l=0;l<f;l++)c+=r[l]*(t[u][l]-n[u])*(t[h][l]-n[h]);a[h][u]=c*i,a[u][h]=c*i}}return a}},function(t,e,r){"use strict";r.r(e);var n=r(1),i=r.n(n);e.default=function(t){if(!i()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var e=0,r=0;r<t.length;r++)e+=t[r];return e/t.length}},function(t,e){t.exports=function(t,e,r,n,i){var o,s;if(void 0===n)n=0;else if((n|=0)<0||n>=t.length)throw new RangeError("invalid lower bound");if(void 0===i)i=t.length-1;else if((i|=0)<n||i>=t.length)throw new RangeError("invalid upper bound");for(;n<=i;)if((s=+r(t[o=n+(i-n>>1)],e,o,t))<0)n=o+1;else{if(!(s>0))return o;i=o-1}return~n}},function(t,e,r){"use strict";var n=r(74);function i(t){if("number"!=typeof t||n(t))throw new TypeError("Expected a number")}e.asc=function(t,e){return i(t),i(e),t-e},e.desc=function(t,e){return i(t),i(e),e-t}},function(t,e,r){"use strict";r.r(e);var n=r(0),i=r(5);function o(t,e){for(var r=new Array(e).fill(0),i=0;i<t.length;++i)r[t[i]]+=1/t.length;return n.default.rowVector(r)}function s(t){if(0===t.length)return 0;for(var e=o(t,a(t))[0],r=0,n=0;n<e.length;++n)r+=e[n]*e[n];return 1-r}function a(t){return t.filter(function(t,e,r){return r.indexOf(t)===e}).length}function h(t){for(var e=t.length,r=Object(i.default)(t),n=0,o=0;o<e;++o){var s=t[o];n+=(s-r)*(s-r)}return n}const u={gini:function(t,e){for(var r=0,n=["greater","lesser"],i=0;i<n.length;++i){var o=e[n[i]];r+=s(o)*o.length/t.length}return s(t)-r},regression:function(t,e){for(var r=0,n=["greater","lesser"],i=0;i<n.length;++i)r+=h(e[n[i]]);return r}},l={mean:function(t,e){return(t+e)/2}};class c{constructor(t){this.kind=t.kind,this.gainFunction=t.gainFunction,this.splitFunction=t.splitFunction,this.minNumSamples=t.minNumSamples,this.maxDepth=t.maxDepth}bestSplit(t,e){for(var r,n,i="classifier"===this.kind?-1/0:1/0,o="classifier"===this.kind?(t,e)=>t>e:(t,e)=>t<e,s=0;s<t.rows;++s)for(var a=t[s],h=this.featureSplit(a,e),l=0;l<h.length;++l){var c=h[l],f=this.split(a,e,c),g=u[this.gainFunction](e,f);o(g,i)&&(r=s,n=c,i=g)}return{maxGain:i,maxColumn:r,maxValue:n}}split(t,e,r){for(var n=[],i=[],o=0;o<t.length;++o)t[o]<r?n.push(e[o]):i.push(e[o]);return{greater:i,lesser:n}}featureSplit(t,e){var r=[],n=function(t,e){if(t.length!==e.length)throw new TypeError("Error on zip: the size of a: "+t.length+" is different from b: "+e.length);for(var r=new Array(t.length),n=0;n<t.length;++n)r[n]=[t[n],e[n]];return r}(t,e);n.sort(function(t,e){return t[0]-e[0]});for(var i=1;i<n.length;++i)n[i-1][1]!==n[i][1]&&r.push(l[this.splitFunction](n[i-1][0],n[i][0]));return r}calculatePrediction(t){if("classifier"===this.kind){if(this.distribution=o(t,a(t)),0===this.distribution.columns)throw new TypeError("Error on calculate the prediction")}else this.distribution=Object(i.default)(t)}train(t,e,r,i){if(t.rows<=this.minNumSamples)this.calculatePrediction(e);else{void 0===i&&(i=0);var o=t.transpose(),s=this.bestSplit(o,e);this.splitValue=s.maxValue,this.splitColumn=s.maxColumn,this.gain=s.maxGain;var a=function(t,e,r,n){for(var i=[],o=[],s=[],a=[],h=0;h<t.rows;++h)t[h][r]<n?(i.push(t[h]),s.push(e[h])):(o.push(t[h]),a.push(e[h]));return{greaterX:o,greaterY:a,lesserX:i,lesserY:s}}(t,e,this.splitColumn,this.splitValue);if(r<this.maxDepth&&this.gain>.01&&this.gain!==i&&a.lesserX.length>0&&a.greaterX.length>0){this.left=new c(this),this.right=new c(this);var h=new n.default(a.lesserX),u=new n.default(a.greaterX);this.left.train(h,a.lesserY,r+1,this.gain),this.right.train(u,a.greaterY,r+1,this.gain)}else this.calculatePrediction(e)}}classify(t){return this.right&&this.left?t[this.splitColumn]<this.splitValue?this.left.classify(t):this.right.classify(t):this.distribution}setNodeParameters(t){void 0!==t.distribution?this.distribution=t.distribution.constructor===Array?new n.default(t.distribution):t.distribution:(this.distribution=void 0,this.splitValue=t.splitValue,this.splitColumn=t.splitColumn,this.gain=t.gain,this.left=new c(this),this.right=new c(this),t.left!=={}&&this.left.setNodeParameters(t.left),t.right!=={}&&this.right.setNodeParameters(t.right))}}const f={gainFunction:"gini",splitFunction:"mean",minNumSamples:3,maxDepth:1/0};class g{constructor(t,e){!0===t?(this.options=e.options,this.root=new c(e.options),this.root.setNodeParameters(e.root)):(this.options=Object.assign({},f,t),this.options.kind="classifier")}train(t,e){this.root=new c(this.options),t=n.default.checkMatrix(t),this.root.train(t,e,0,null)}predict(t){t=n.default.checkMatrix(t);for(var e=new Array(t.rows),r=0;r<t.rows;++r)e[r]=this.root.classify(t.getRow(r)).maxRowIndex(0)[1];return e}toJSON(){return{options:this.options,root:this.root,name:"DTClassifier"}}static load(t){if("DTClassifier"!==t.name)throw new RangeError("Invalid model: "+t.name);return new g(!0,t)}}const d={gainFunction:"regression",splitFunction:"mean",minNumSamples:3,maxDepth:1/0};class m{constructor(t,e){!0===t?(this.options=e.options,this.root=new c(e.options),this.root.setNodeParameters(e.root)):(this.options=Object.assign({},d,t),this.options.kind="regression")}train(t,e){this.root=new c(this.options),void 0===t[0].length&&(t=n.default.columnVector(t)),t=n.default.checkMatrix(t),this.root.train(t,e,0)}predict(t){void 0!==t[0]&&void 0===t[0].length&&(t=n.default.columnVector(t)),t=n.default.checkMatrix(t);for(var e=new Array(t.rows),r=0;r<t.rows;++r)e[r]=this.root.classify(t.getRow(r));return e}toJSON(){return{options:this.options,root:this.root,name:"DTRegression"}}static load(t){if("DTRegression"!==t.name)throw new RangeError("Invalid model:"+t.name);return new m(!0,t)}}r.d(e,"DecisionTreeClassifier",function(){return g}),r.d(e,"DecisionTreeRegression",function(){return m})},function(t,e,r){"use strict";r.r(e);var n=r(1),i=r.n(n);e.default=function(t){if(!i()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var e=t[0],r=1;r<t.length;r++)t[r]>e&&(e=t[r]);return e}},function(t,e,r){"use strict";const n=r(0).Matrix,i=r(54),o=r(55),s=r(56),a=r(57),h=r(58),u=r(59),l=r(60),c=r(61),f=r(62),g=r(63),d={gaussian:i,rbf:i,polynomial:o,poly:o,anova:s,cauchy:a,exponential:h,histogram:u,min:u,laplacian:l,multiquadratic:c,rational:f,sigmoid:g,mlp:g};t.exports=class{constructor(t,e){if(this.kernelType=t,"linear"!==t)if("string"==typeof t){t=t.toLowerCase();var r=d[t];if(!r)throw new Error("unsupported kernel type: "+t);this.kernelFunction=new r(e)}else{if("object"!=typeof t||"function"!=typeof t.compute)throw new TypeError("first argument must be a valid kernel type or instance");this.kernelFunction=t}}compute(t,e){if(void 0===e&&(e=t),"linear"===this.kernelType)return new n(t).mmul(new n(e).transposeView());const r=new n(t.length,e.length);var i,o;if(t===e)for(i=0;i<t.length;i++)for(o=i;o<t.length;o++)r[i][o]=r[o][i]=this.kernelFunction.compute(t[i],t[o]);else for(i=0;i<t.length;i++)for(o=0;o<e.length;o++)r[i][o]=this.kernelFunction.compute(t[i],e[o]);return r}}},function(t,e,r){"use strict";r.r(e);var n=r(19);const i=1e-8;function o(t,e,r){const n=e();if(r){let t=0;for(;n>r[t];)t++;return t}return Math.floor(n*t)}var s=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.random;const n=e.size,s=void 0===n?1:n,a=e.replace,h=void 0!==a&&a,u=e.probabilities;let l,c;if(l="number"==typeof t?function(t){const e=[];for(let r=0;r<t;r++)e.push(r);return e}(t):t.slice(),u){if(!h)throw new Error("choice with probabilities and no replacement is not implemented");if(u.length!==l.length)throw new Error("the length of probabilities option should be equal to the number of choices");c=[u[0]];for(let t=1;t<u.length;t++)c[t]=c[t-1]+u[t];if(Math.abs(1-c[c.length-1])>i)throw new Error("probabilities should sum to 1, but instead sums to ".concat(c[c.length-1]))}if(!1===h&&s>l.length)throw new Error("size option is too large");const f=[];for(let t=0;t<s;t++){const t=o(l.length,r,c);f.push(l[t]),h||l.splice(t,1)}return f};r.d(e,"default",function(){return a});class a{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random;if("number"==typeof t){const e=new n.default(t);this.randomGenerator=e.random}else this.randomGenerator=t}choice(t,e){return s(t,e,this.randomGenerator)}random(){return this.randomGenerator()}randInt(t,e){return void 0===e&&(e=t,t=0),t+Math.floor(this.randomGenerator()*(e-t))}randomSample(t){const e=[];for(let r=0;r<t;r++)e.push(this.random());return e}}},function(t,e,r){var n;!function(i){"use strict";var o="function"!=typeof Math.imul||-5!==Math.imul(4294967295,5)?function(t,e){var r=65535&t,n=65535&e;return r*n+((t>>>16&65535)*n+r*(e>>>16&65535)<<16>>>0)|0}:Math.imul,s="function"==typeof String.prototype.repeat&&"xxx"==="x".repeat(3)?function(t,e){return t.repeat(e)}:function(t,e){for(var r="";e>0;)1&e&&(r+=t),e>>=1,t+=t;return r};function a(t){if(!(this instanceof a))return new a(t);if(null==t)t=a.engines.nativeMath;else if("function"!=typeof t)throw new TypeError("Expected engine to be a function, got "+typeof t);this.engine=t}var h,u,l=a.prototype;function c(t){return function(){return t}}function f(t,e){return 0===e?t:function(r){return t(r)+e}}function g(t){var e=+t;return e<0?Math.ceil(e):Math.floor(e)}function d(t,e){return t<0?Math.max(t+e,0):Math.min(t,e)}function m(){}a.engines={nativeMath:function(){return 4294967296*Math.random()|0},mt19937:function(t){function e(t){for(var e=0,r=0;(0|e)<227;e=e+1|0)r=2147483648&t[e]|2147483647&t[e+1|0],t[e]=t[e+397|0]^r>>>1^(1&r?2567483615:0);for(;(0|e)<623;e=e+1|0)r=2147483648&t[e]|2147483647&t[e+1|0],t[e]=t[e-227|0]^r>>>1^(1&r?2567483615:0);r=2147483648&t[623]|2147483647&t[0],t[623]=t[396]^r>>>1^(1&r?2567483615:0)}return function(){var r=new t(624),n=0,i=0;function s(){(0|n)>=624&&(e(r),n=0);var t=r[n];return n=n+1|0,i+=1,0|function(t){return t^=t>>>11,t^=t<<7&2636928640,(t^=t<<15&4022730752)^t>>>18}(t)}return s.getUseCount=function(){return i},s.discard=function(t){for(i+=t,(0|n)>=624&&(e(r),n=0);t-n>624;)t-=624-n,e(r),n=0;return n=n+t|0,s},s.seed=function(t){var e=0;r[0]=e=0|t;for(var a=1;a<624;a=a+1|0)r[a]=e=o(e^e>>>30,1812433253)+a|0;return n=624,i=0,s},s.seedWithArray=function(t){return s.seed(19650218),function(t,e){for(var r=1,n=0,i=e.length,s=0|Math.max(i,624),a=0|t[0];(0|s)>0;--s)t[r]=a=(t[r]^o(a^a>>>30,1664525))+(0|e[n])+(0|n)|0,++n,(0|(r=r+1|0))>623&&(t[0]=t[623],r=1),n>=i&&(n=0);for(s=623;(0|s)>0;--s)t[r]=a=(t[r]^o(a^a>>>30,1566083941))-r|0,(0|(r=r+1|0))>623&&(t[0]=t[623],r=1);t[0]=2147483648}(r,t),s},s.autoSeed=function(){return s.seedWithArray(a.generateEntropyArray())},s}}("function"==typeof Int32Array?Int32Array:Array),browserCrypto:"undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof Int32Array?(h=null,u=128,function(){return u>=128&&(null===h&&(h=new Int32Array(128)),crypto.getRandomValues(h),u=0),0|h[u++]}):null},a.generateEntropyArray=function(){for(var t=[],e=a.engines.nativeMath,r=0;r<16;++r)t[r]=0|e();return t.push(0|(new Date).getTime()),t},a.int32=function(t){return 0|t()},l.int32=function(){return a.int32(this.engine)},a.uint32=function(t){return t()>>>0},l.uint32=function(){return a.uint32(this.engine)},a.uint53=function(t){return 4294967296*(2097151&t())+(t()>>>0)},l.uint53=function(){return a.uint53(this.engine)},a.uint53Full=function(t){for(;;){var e=0|t();if(!(2097152&e))return 4294967296*(2097151&e)+(t()>>>0);if(2097152==(4194303&e)&&0==(0|t()))return 9007199254740992}},l.uint53Full=function(){return a.uint53Full(this.engine)},a.int53=function(t){var e=0|t();return 4294967296*(2097151&e)+(t()>>>0)+(2097152&e?-9007199254740992:0)},l.int53=function(){return a.int53(this.engine)},a.int53Full=function(t){for(;;){var e=0|t();if(!(4194304&e))return 4294967296*(2097151&e)+(t()>>>0)+(2097152&e?-9007199254740992:0);if(4194304==(8388607&e)&&0==(0|t()))return 9007199254740992}},l.int53Full=function(){return a.int53Full(this.engine)},a.integer=function(){function t(t){return 0==(t+1&t)}function e(e){return t(e)?(r=e,function(t){return t()&r}):function(t){var e=t+1,r=e*Math.floor(4294967296/e);return function(t){var n=0;do{n=t()>>>0}while(n>=r);return n%e}}(e);var r}function r(e){var r,n=e+1;if(0==(0|n)){var i=(n/4294967296|0)-1;if(t(i))return r=i,function(t){return 4294967296*(t()&r)+(t()>>>0)}}return function(t){var e=t*Math.floor(9007199254740992/t);return function(r){var n=0;do{n=4294967296*(2097151&r())+(r()>>>0)}while(n>=e);return n%t}}(n)}function n(t,e){return function(r){var n=0;do{var i=0|r();n=4294967296*(2097151&i)+(r()>>>0)+(2097152&i?-9007199254740992:0)}while(n<t||n>e);return n}}return function(t,i){if(t=Math.floor(t),i=Math.floor(i),t<-9007199254740992||!isFinite(t))throw new RangeError("Expected min to be at least -9007199254740992");if(i>9007199254740992||!isFinite(i))throw new RangeError("Expected max to be at most 9007199254740992");var o=i-t;return o<=0||!isFinite(o)?c(t):4294967295===o?0===t?a.uint32:f(a.int32,t+2147483648):o<4294967295?f(e(o),t):9007199254740991===o?f(a.uint53,t):o<9007199254740991?f(r(o),t):i-1-t==9007199254740991?f(a.uint53Full,t):-9007199254740992===t&&9007199254740992===i?a.int53Full:-9007199254740992===t&&9007199254740991===i?a.int53:-9007199254740991===t&&9007199254740992===i?f(a.int53,1):9007199254740992===i?f(n(t-1,i-1),1):n(t,i)}}(),l.integer=function(t,e){return a.integer(t,e)(this.engine)},a.realZeroToOneInclusive=function(t){return a.uint53Full(t)/9007199254740992},l.realZeroToOneInclusive=function(){return a.realZeroToOneInclusive(this.engine)},a.realZeroToOneExclusive=function(t){return a.uint53(t)/9007199254740992},l.realZeroToOneExclusive=function(){return a.realZeroToOneExclusive(this.engine)},a.real=function(){return function(t,e,r){if(!isFinite(t))throw new RangeError("Expected left to be a finite number");if(!isFinite(e))throw new RangeError("Expected right to be a finite number");return f((n=r?a.realZeroToOneInclusive:a.realZeroToOneExclusive,1===(i=e-t)?n:0===i?function(){return 0}:function(t){return n(t)*i}),t);var n,i}}(),l.real=function(t,e,r){return a.real(t,e,r)(this.engine)},a.bool=function(){function t(t){return 1==(1&t())}function e(t,e){return function(r){return t(r)<e}}return function(r,n){return null==n?null==r?t:function(t){if(t<=0)return c(!1);if(t>=1)return c(!0);var r=4294967296*t;return r%1==0?e(a.int32,r-2147483648|0):e(a.uint53,Math.round(9007199254740992*t))}(r):r<=0?c(!1):r>=n?c(!0):e(a.integer(0,n-1),r)}}(),l.bool=function(t,e){return a.bool(t,e)(this.engine)},a.pick=function(t,e,r,n){var i=e.length,o=null==r?0:d(g(r),i),s=void 0===n?i:d(g(n),i);if(!(o>=s))return e[a.integer(o,s-1)(t)]},l.pick=function(t,e,r){return a.pick(this.engine,t,e,r)};var p,v,w=Array.prototype.slice;a.picker=function(t,e,r){var n=w.call(t,e,r);if(!n.length)return m;var i=a.integer(0,n.length-1);return function(t){return n[i(t)]}},a.shuffle=function(t,e,r){var n=e.length;if(n){null==r&&(r=0);for(var i=n-1>>>0;i>r;--i){var o=a.integer(0,i)(t);if(i!==o){var s=e[i];e[i]=e[o],e[o]=s}}}return e},l.shuffle=function(t){return a.shuffle(this.engine,t)},a.sample=function(t,e,r){if(r<0||r>e.length||!isFinite(r))throw new RangeError("Expected sampleSize to be within 0 and the length of the population");if(0===r)return[];var n=w.call(e),i=n.length;if(i===r)return a.shuffle(t,n,0);var o=i-r;return a.shuffle(t,n,o-1).slice(o)},l.sample=function(t,e){return a.sample(this.engine,t,e)},a.die=function(t){return a.integer(1,t)},l.die=function(t){return a.die(t)(this.engine)},a.dice=function(t,e){var r=a.die(t);return function(t){var n=[];n.length=e;for(var i=0;i<e;++i)n[i]=r(t);return n}},l.dice=function(t,e){return a.dice(t,e)(this.engine)},a.uuid4=function(){function t(t,e){return s("0",e-t.length)+t}return function(e){var r=e()>>>0,n=0|e(),i=0|e(),o=e()>>>0;return t(r.toString(16),8)+"-"+t((65535&n).toString(16),4)+"-"+t((n>>4&4095|16384).toString(16),4)+"-"+t((16383&i|32768).toString(16),4)+"-"+t((i>>4&65535).toString(16),4)+t(o.toString(16),8)}}(),l.uuid4=function(){return a.uuid4(this.engine)},a.string=function(t){null==t&&(t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-");var e=t.length;if(!e)throw new Error("Expected pool not to be an empty string");var r=a.integer(0,e-1);return function(e,n){for(var i="",o=0;o<n;++o){var s=r(e);i+=t.charAt(s)}return i}},l.string=function(t,e){return a.string(e)(this.engine,t)},a.hex=(p=a.string("0123456789abcdef"),v=a.string("0123456789abcdef".toUpperCase()),function(t){return t?v:p}),l.hex=function(t,e){return a.hex(e)(this.engine,t)},a.date=function(t,e){if(!(t instanceof Date))throw new TypeError("Expected start to be a Date, got "+typeof t);if(!(e instanceof Date))throw new TypeError("Expected end to be a Date, got "+typeof e);var r=a.integer(t.getTime(),e.getTime());return function(t){return new Date(r(t))}},l.date=function(t,e){return a.date(t,e)(this.engine)},void 0===(n=function(){return a}.call(e,r,e,t))||(t.exports=n)}()},function(t,e,r){"use strict";r.r(e);var n=r(9),i=r(17),o=r(1),s=r.n(o);e.default=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!s()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==r.output){if(!s()(r.output))throw new TypeError("output option must be an array if specified");e=r.output}else e=new Array(t.length);var o=Object(i.default)(t),a=Object(n.default)(t);if(o===a)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var h=r.min,u=void 0===h?r.autoMinMax?o:0:h,l=r.max,c=void 0===l?r.autoMinMax?a:1:l;if(u>=c)throw new RangeError("min option must be smaller than max option");for(var f=(c-u)/(a-o),g=0;g<t.length;g++)e[g]=(t[g]-o)*f+u;return e}},function(t,e,r){"use strict";const n=r(72),i=r(73),o=i.nextPrime,s=i.largestPrime,a=0,h=1,u=2,l=150,c=1/6,f=2/3;class g{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t instanceof g)return this.table=t.table.slice(),this.values=t.values.slice(),this.state=t.state.slice(),this.minLoadFactor=t.minLoadFactor,this.maxLoadFactor=t.maxLoadFactor,this.distinct=t.distinct,this.freeEntries=t.freeEntries,this.lowWaterMark=t.lowWaterMark,void(this.highWaterMark=t.maxLoadFactor);const e=void 0===t.initialCapacity?l:t.initialCapacity;if(e<0)throw new RangeError("initial capacity must not be less than zero: ".concat(e));const r=void 0===t.minLoadFactor?c:t.minLoadFactor,i=void 0===t.maxLoadFactor?f:t.maxLoadFactor;if(r<0||r>=1)throw new RangeError("invalid minLoadFactor: ".concat(r));if(i<=0||i>=1)throw new RangeError("invalid maxLoadFactor: ".concat(i));if(r>=i)throw new RangeError("minLoadFactor (".concat(r,") must be smaller than maxLoadFactor (").concat(i,")"));let a=e;0===(a=o(a=a/i|0))&&(a=1),this.table=n(a,0),this.values=n(a,0),this.state=n(a,0),this.minLoadFactor=r,this.maxLoadFactor=a===s?1:i,this.distinct=0,this.freeEntries=a,this.lowWaterMark=0,this.highWaterMark=d(a,this.maxLoadFactor)}clone(){return new g(this)}get size(){return this.distinct}get(t){const e=this.indexOfKey(t);return e<0?0:this.values[e]}set(t,e){let r=this.indexOfInsertion(t);if(r<0)return r=-r-1,this.values[r]=e,!1;if(this.distinct>this.highWaterMark){const r=m(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);return this.rehash(r),this.set(t,e)}if(this.table[r]=t,this.values[r]=e,this.state[r]===a&&this.freeEntries--,this.state[r]=h,this.distinct++,this.freeEntries<1){const t=m(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);this.rehash(t)}return!0}remove(t,e){const r=this.indexOfKey(t);return!(r<0)&&(this.state[r]=u,this.distinct--,e||this.maybeShrinkCapacity(),!0)}delete(t,e){const r=this.indexOfKey(t);return!(r<0)&&(this.state[r]=a,this.distinct--,e||this.maybeShrinkCapacity(),!0)}maybeShrinkCapacity(){if(this.distinct<this.lowWaterMark){const n=(t=this.distinct,e=this.minLoadFactor,r=this.maxLoadFactor,o(Math.max(t+1,4*t/(e+3*r)|0)));this.rehash(n)}var t,e,r}containsKey(t){return this.indexOfKey(t)>=0}indexOfKey(t){const e=this.table,r=this.state,n=this.table.length,i=2147483647&t;let o=i%n,s=i%(n-2);for(0===s&&(s=1);r[o]!==a&&(r[o]===u||e[o]!==t);)(o-=s)<0&&(o+=n);return r[o]===a?-1:o}containsValue(t){return this.indexOfValue(t)>=0}indexOfValue(t){const e=this.values,r=this.state;for(var n=0;n<r.length;n++)if(r[n]===h&&e[n]===t)return n;return-1}indexOfInsertion(t){const e=this.table,r=this.state,n=e.length,i=2147483647&t;let o=i%n,s=i%(n-2);for(0===s&&(s=1);r[o]===h&&e[o]!==t;)(o-=s)<0&&(o+=n);if(r[o]===u){const i=o;for(;r[o]!==a&&(r[o]===u||e[o]!==t);)(o-=s)<0&&(o+=n);r[o]===a&&(o=i)}return r[o]===h?-o-1:o}ensureCapacity(t){if(this.table.length<t){const e=o(t);this.rehash(e)}}rehash(t){const e=this.table.length;if(t<=this.distinct)throw new Error("Unexpected");const r=this.table,i=this.values,o=this.state,s=n(t,0),a=n(t,0),u=n(t,0);var l,c;this.lowWaterMark=(l=t,c=this.minLoadFactor,l*c|0),this.highWaterMark=d(t,this.maxLoadFactor),this.table=s,this.values=a,this.state=u,this.freeEntries=t-this.distinct;for(var f=0;f<e;f++)if(o[f]===h){var g=r[f],m=this.indexOfInsertion(g);s[m]=g,a[m]=i[f],u[m]=h}}forEachKey(t){for(var e=0;e<this.state.length;e++)if(this.state[e]===h&&!t(this.table[e]))return!1;return!0}forEachValue(t){for(var e=0;e<this.state.length;e++)if(this.state[e]===h&&!t(this.values[e]))return!1;return!0}forEachPair(t){for(var e=0;e<this.state.length;e++)if(this.state[e]===h&&!t(this.table[e],this.values[e]))return!1;return!0}}function d(t,e){return Math.min(t-2,t*e|0)}function m(t,e,r){return o(Math.max(t+1,4*t/(3*e+r)|0))}t.exports=g},function(t,e,r){"use strict";const n=r(46);function i(){this.children=[],this.distance=-1,this.index=[]}i.prototype.cut=function(t){if(t<0)throw new RangeError("Threshold too small");var e=new i;e.children=this.children,e.distance=this.distance,e.index=this.index;for(var r=[e],n=[];r.length>0;){var o=r.shift();t>=o.distance?n.push(o):r=r.concat(o.children)}return n},i.prototype.group=function(t){if(!Number.isInteger(t)||t<1)throw new RangeError("Number of groups must be a positive integer");const e=new n(function(t,e){return e.distance-t.distance});for(e.push(this);e.size()<t;){var r=e.pop();if(0===r.children.length)break;r.children.forEach(t=>e.push(t))}var o=new i;return o.children=e.toArray(),o.distance=this.distance,o},i.prototype.traverse=function(t){!function t(e,r){if(r(e),e.children)for(var n=e.children.length-1;n>=0;n--)t(e.children[n],r)}(this,t)},t.exports=i},function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},h=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e,r=n.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&n.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!o)return!1;for(e in t);return void 0===e||n.call(t,e)},u=function(t,e){o&&"__proto__"===e.name?o(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},l=function(t,e){if("__proto__"===e){if(!n.call(t,e))return;if(s)return s(t,e).value}return t[e]};t.exports=function t(){var e,r,n,i,o,s,c=arguments[0],f=1,g=arguments.length,d=!1;for("boolean"==typeof c&&(d=c,c=arguments[1]||{},f=2),(null==c||"object"!=typeof c&&"function"!=typeof c)&&(c={});f<g;++f)if(null!=(e=arguments[f]))for(r in e)n=l(c,r),c!==(i=l(e,r))&&(d&&i&&(h(i)||(o=a(i)))?(o?(o=!1,s=n&&a(n)?n:[]):s=n&&h(n)?n:{},u(c,{name:r,newValue:t(d,s,i)})):void 0!==i&&u(c,{name:r,newValue:i}));return c}},function(t,e,r){"use strict";r.r(e);var n=r(1),i=r.n(n);e.default=function(t){if(!i()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var e=t[0],r=1;r<t.length;r++)t[r]<e&&(e=t[r]);return e}},function(t,e,r){"use strict";r.r(e);var n=r(41),i=r.n(n),o=r(1),s=r.n(o);e.default=function(t){if(!s()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");return i()(t.slice())}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return u});const n=8,i=1/16777216,o=15,s=18,a=11;function h(t,e){const r=65535&(t>>>=0);return((t-r)*(e>>>=0)>>>0)+r*e>>>0}class u{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this.state=new Uint32Array(4),this.init(t),this.random=this.getFloat.bind(this)}getUint32(){return this.nextState(),this.state[3]+this.state[2]>>>0}getFloat(){return(this.getUint32()>>>8)*i}init(t){if(!Number.isInteger(t))throw new TypeError("seed must be an integer");this.state[0]=t,this.state[1]=0,this.state[2]=0,this.state[3]=0;for(let t=1;t<n;t++)this.state[3&t]^=t+h(1812433253,this.state[t-1&3]^this.state[t-1&3]>>>30>>>0)>>>0;this.periodCertification();for(let t=0;t<n;t++)this.nextState()}periodCertification(){0===this.state[0]&&0===this.state[1]&&0===this.state[2]&&0===this.state[3]&&(this.state[0]=88,this.state[1]=83,this.state[2]=65,this.state[3]=68)}nextState(){let t=this.state[0];t^=t<<o,t^=t>>>s,t^=this.state[3]<<a,this.state[0]=this.state[1],this.state[1]=this.state[2],this.state[2]=this.state[3],this.state[3]=t}}},function(t,e,r){"use strict";r.r(e);var n=r(5),i=r(1),o=r.n(i);e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!o()(t))throw new TypeError("input must be an array");for(var r=e.unbiased,i=void 0===r||r,s=e.mean,a=void 0===s?Object(n.default)(t):s,h=0,u=0;u<t.length;u++){var l=t[u]-a;h+=l*l}return i?h/(t.length-1):h/t.length}},function(t,e,r){"use strict";function n(t,e){return t-e}e.sum=function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e},e.max=function(t){for(var e=t[0],r=t.length,n=1;n<r;n++)t[n]>e&&(e=t[n]);return e},e.min=function(t){for(var e=t[0],r=t.length,n=1;n<r;n++)t[n]<e&&(e=t[n]);return e},e.minMax=function(t){for(var e=t[0],r=t[0],n=t.length,i=1;i<n;i++)t[i]<e&&(e=t[i]),t[i]>r&&(r=t[i]);return{min:e,max:r}},e.arithmeticMean=function(t){for(var e=0,r=t.length,n=0;n<r;n++)e+=t[n];return e/r},e.mean=e.arithmeticMean,e.geometricMean=function(t){for(var e=1,r=t.length,n=0;n<r;n++)e*=t[n];return Math.pow(e,1/r)},e.logMean=function(t){for(var e=0,r=t.length,n=0;n<r;n++)e+=Math.log(t[n]);return e/r},e.grandMean=function(t,e){for(var r=0,n=0,i=t.length,o=0;o<i;o++)r+=e[o]*t[o],n+=e[o];return r/n},e.truncatedMean=function(t,e,r){void 0===r&&(r=!1),r||(t=[].concat(t).sort(n));for(var i=t.length,o=Math.floor(i*e),s=0,a=o;a<i-o;a++)s+=t[a];return s/(i-2*o)},e.harmonicMean=function(t){for(var e=0,r=t.length,n=0;n<r;n++){if(0===t[n])throw new RangeError("value at index "+n+"is zero");e+=1/t[n]}return r/e},e.contraHarmonicMean=function(t){for(var e=0,r=0,n=t.length,i=0;i<n;i++)e+=t[i]*t[i],r+=t[i];if(r<0)throw new RangeError("sum of values is negative");return e/r},e.median=function(t,e){void 0===e&&(e=!1),e||(t=[].concat(t).sort(n));var r=t.length,i=Math.floor(r/2);return r%2==0?.5*(t[i-1]+t[i]):t[i]},e.variance=function(t,r){void 0===r&&(r=!0);for(var n=e.mean(t),i=0,o=t.length,s=0;s<o;s++){var a=t[s]-n;i+=a*a}return r?i/(o-1):i/o},e.standardDeviation=function(t,r){return Math.sqrt(e.variance(t,r))},e.standardError=function(t){return e.standardDeviation(t)/Math.sqrt(t.length)},e.robustMeanAndStdev=function(t){var e=0,r=t.length,i=0;for(i=0;i<r;i++)e+=t[i];e/=r;var o=new Array(r);for(i=0;i<r;i++)o[i]=Math.abs(t[i]-e);return o.sort(n),{mean:e,stdev:r%2==1?o[(r-1)/2]/.6745:.5*(o[r/2]+o[r/2-1])/.6745}},e.quartiles=function(t,r){void 0===r&&(r=!1),r||(t=[].concat(t).sort(n));var i=t.length/4;return{q1:t[Math.ceil(i)-1],q2:e.median(t,!0),q3:t[Math.ceil(3*i)-1]}},e.pooledStandardDeviation=function(t,r){return Math.sqrt(e.pooledVariance(t,r))},e.pooledVariance=function(t,r){void 0===r&&(r=!0);for(var n=0,i=0,o=t.length,s=0;s<o;s++){var a=t[s],h=e.variance(a);n+=(a.length-1)*h,i+=r?a.length-1:a.length}return n/i},e.mode=function(t){var e,r=t.length,n=new Array(r);for(e=0;e<r;e++)n[e]=0;var i=new Array(r),o=0;for(e=0;e<r;e++){var s=i.indexOf(t[e]);s>=0?n[s]++:(i[o]=t[e],n[o]=1,o++)}var a=0,h=0;for(e=0;e<o;e++)n[e]>a&&(a=n[e],h=e);return i[h]},e.covariance=function(t,r,n){void 0===n&&(n=!0);var i=e.mean(t),o=e.mean(r);if(t.length!==r.length)throw"Vectors do not have the same dimensions";for(var s=0,a=t.length,h=0;h<a;h++){s+=(t[h]-i)*(r[h]-o)}return n?s/(a-1):s/a},e.skewness=function(t,r){void 0===r&&(r=!0);for(var n=e.mean(t),i=0,o=0,s=t.length,a=0;a<s;a++){var h=t[a]-n;i+=h*h,o+=h*h*h}var u=i/s,l=o/s/Math.pow(u,1.5);return r?Math.sqrt(s*(s-1))/(s-2)*l:l},e.kurtosis=function(t,r){void 0===r&&(r=!0);for(var n=e.mean(t),i=t.length,o=0,s=0,a=0;a<i;a++){var h=t[a]-n;o+=h*h,s+=h*h*h*h}var u=o/i;if(r){var l=o/(i-1);return i*(i+1)/((i-1)*(i-2)*(i-3))*(s/(l*l))-3*((i-1)*(i-1)/((i-2)*(i-3)))}return s/i/(u*u)-3},e.entropy=function(t,e){void 0===e&&(e=0);for(var r=0,n=t.length,i=0;i<n;i++)r+=t[i]*Math.log(t[i]+e);return-r},e.weightedMean=function(t,e){for(var r=0,n=t.length,i=0;i<n;i++)r+=t[i]*e[i];return r},e.weightedStandardDeviation=function(t,r){return Math.sqrt(e.weightedVariance(t,r))},e.weightedVariance=function(t,r){for(var n=e.weightedMean(t,r),i=0,o=t.length,s=0,a=0,h=0;h<o;h++){var u=t[h]-n,l=r[h];i+=l*(u*u),a+=l,s+=l*l}return i*(a/(a*a-s))},e.center=function(t,r){void 0===r&&(r=!1);var n=t;r||(n=[].concat(t));for(var i=e.mean(n),o=n.length,s=0;s<o;s++)n[s]-=i},e.standardize=function(t,r,n){void 0===r&&(r=e.standardDeviation(t)),void 0===n&&(n=!1);for(var i=t.length,o=n?t:new Array(i),s=0;s<i;s++)o[s]=t[s]/r;return o},e.cumulativeSum=function(t){var e=t.length,r=new Array(e);r[0]=t[0];for(var n=1;n<e;n++)r[n]=r[n-1]+t[n];return r}},function(t,e,r){"use strict";const n=r(15);function i(t){n.call(this),this.index=t,this.distance=0,this.children=[]}r(48).inherits(i,n),t.exports=i},function(t,e,r){"use strict";t.exports=function(t,e){const r=t.length;let n=Array.from({length:r}).map(()=>Array.from({length:r}));for(let i=0;i<r;i++)for(let r=0;r<=i;r++)n[i][r]=e(t[i],t[r]);for(let t=0;t<r;t++)for(let e=t+1;e<r;e++)n[t][e]=n[e][t];return n}},function(t,e){class r{constructor(t,e){if(t.length!==t[0].length)throw new Error("Confusion matrix must be square");if(e.length!==t.length)throw new Error("Confusion matrix and labels should have the same length");this.labels=e,this.matrix=t}static fromLabels(t,e){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.length!==t.length)throw new Error("predicted and actual must have the same length");n=i.labels?new Set(i.labels):new Set([...t,...e]),n=Array.from(n),i.sort&&n.sort(i.sort);const o=Array.from({length:n.length});for(let t=0;t<o.length;t++)o[t]=new Array(o.length),o[t].fill(0);for(let r=0;r<e.length;r++){const i=n.indexOf(t[r]),s=n.indexOf(e[r]);i>=0&&s>=0&&o[i][s]++}return new r(o,n)}getMatrix(){return this.matrix}getLabels(){return this.labels}getTotalCount(){let t=0;for(var e=0;e<this.matrix.length;e++)for(var r=0;r<this.matrix.length;r++)t+=this.matrix[e][r];return t}getTrueCount(){for(var t=0,e=0;e<this.matrix.length;e++)t+=this.matrix[e][e];return t}getFalseCount(){return this.getTotalCount()-this.getTrueCount()}getTruePositiveCount(t){const e=this.getIndex(t);return this.matrix[e][e]}getTrueNegativeCount(t){const e=this.getIndex(t);for(var r=0,n=0;n<this.matrix.length;n++)for(var i=0;i<this.matrix.length;i++)n!==e&&i!==e&&(r+=this.matrix[n][i]);return r}getFalsePositiveCount(t){const e=this.getIndex(t);for(var r=0,n=0;n<this.matrix.length;n++)n!==e&&(r+=this.matrix[n][e]);return r}getFalseNegativeCount(t){const e=this.getIndex(t);for(var r=0,n=0;n<this.matrix.length;n++)n!==e&&(r+=this.matrix[e][n]);return r}getPositiveCount(t){return this.getTruePositiveCount(t)+this.getFalseNegativeCount(t)}getNegativeCount(t){return this.getTrueNegativeCount(t)+this.getFalsePositiveCount(t)}getIndex(t){const e=this.labels.indexOf(t);if(-1===e)throw new Error("The label does not exist");return e}getTruePositiveRate(t){return this.getTruePositiveCount(t)/this.getPositiveCount(t)}getTrueNegativeRate(t){return this.getTrueNegativeCount(t)/this.getNegativeCount(t)}getPositivePredictiveValue(t){const e=this.getTruePositiveCount(t);return e/(e+this.getFalsePositiveCount(t))}getNegativePredictiveValue(t){const e=this.getTrueNegativeCount(t);return e/(e+this.getFalseNegativeCount(t))}getFalseNegativeRate(t){return 1-this.getTruePositiveRate(t)}getFalsePositiveRate(t){return 1-this.getTrueNegativeRate(t)}getFalseDiscoveryRate(t){const e=this.getFalsePositiveCount(t);return e/(e+this.getTruePositiveCount(t))}getFalseOmissionRate(t){const e=this.getFalseNegativeCount(t);return e/(e+this.getTruePositiveCount(t))}getF1Score(t){const e=this.getTruePositiveCount(t);return 2*e/(2*e+this.getFalsePositiveCount(t)+this.getFalseNegativeCount(t))}getMatthewsCorrelationCoefficient(t){const e=this.getTruePositiveCount(t),r=this.getTrueNegativeCount(t),n=this.getFalsePositiveCount(t),i=this.getFalseNegativeCount(t);return(e*r-n*i)/Math.sqrt((e+n)*(e+i)*(r+n)*(r+i))}getInformedness(t){return this.getTruePositiveRate(t)+this.getTrueNegativeRate(t)-1}getMarkedness(t){return this.getPositivePredictiveValue(t)+this.getNegativePredictiveValue(t)-1}getConfusionTable(t){return[[this.getTruePositiveCount(t),this.getFalseNegativeCount(t)],[this.getFalsePositiveCount(t),this.getTrueNegativeCount(t)]]}getAccuracy(){let t=0,e=0;for(var r=0;r<this.matrix.length;r++)for(var n=0;n<this.matrix.length;n++)r===n?t+=this.matrix[r][n]:e+=this.matrix[r][n];return t/(t+e)}getCount(t,e){const r=this.getIndex(t),n=this.getIndex(e);return this.matrix[r][n]}get accuracy(){return this.getAccuracy()}get total(){return this.getTotalCount()}}t.exports=r},function(t,e,r){"use strict";var n=r(0).Matrix,i=r(26);const o=r(27);class s{constructor(t){this.inputSize=t.inputSize,this.outputSize=t.outputSize,this.regularization=t.regularization,this.epsilon=t.epsilon,this.activation=t.activation,this.activationParam=t.activationParam;var e=o[t.activation],r=e.activation.length,i=r>1?r=>e.activation(r,t.activationParam):e.activation,s=r>1?r=>e.derivate(r,t.activationParam):e.derivate;this.activationFunction=function(t,e){this[t][e]=i(this[t][e])},this.derivate=function(t,e){this[t][e]=s(this[t][e])},t.model?(this.W=n.checkMatrix(t.W),this.b=n.checkMatrix(t.b)):(this.W=n.rand(this.inputSize,this.outputSize),this.b=n.zeros(1,this.outputSize),this.W.apply(function(e,r){this[e][r]/=Math.sqrt(t.inputSize)}))}forward(t){var e=t.mmul(this.W).addRowVector(this.b);return e.apply(this.activationFunction),this.a=e.clone(),e}backpropagation(t,e){this.dW=e.transposeView().mmul(t),this.db=i.sumCol(t);var r=e.clone();return t.mmul(this.W.transposeView()).mul(r.apply(this.derivate))}update(){this.dW.add(this.W.clone().mul(this.regularization)),this.W.add(this.dW.mul(-this.epsilon)),this.b.add(this.db.mul(-this.epsilon))}toJSON(){return{model:"Layer",inputSize:this.inputSize,outputSize:this.outputSize,regularization:this.regularization,epsilon:this.epsilon,activation:this.activation,W:this.W,b:this.b}}static load(t){if("Layer"!==t.model)throw new RangeError("the current model is not a Layer model");return new s(t)}}t.exports=s},function(t,e,r){"use strict";var n=r(0).Matrix;t.exports={dictOutputs:function(t){for(var e={},r={},n=0,i=0;i<t.length;i+=1)void 0===e[t[i]]&&(e[t[i]]=n,r[n]=t[i],n++);return{inputs:e,outputs:r}},sumCol:function(t){for(var e=n.zeros(1,t.columns),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e[0][i]+=t[r][i];return e},sumRow:function(t){for(var e=n.zeros(t.rows,1),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e[r][0]+=t[r][i];return e}}},function(t,e,r){"use strict";function n(t){return 1/(1+Math.exp(-t))}function i(t,e){return t<0?e*(Math.exp(t)-1):t}const o={tanh:{activation:Math.tanh,derivate:t=>1-t*t},identity:{activation:t=>t,derivate:()=>1},logistic:{activation:n,derivate:t=>n(t)*(1-n(t))},arctan:{activation:Math.atan,derivate:t=>1/(t*t+1)},softsign:{activation:t=>t/(1+Math.abs(t)),derivate:t=>1/((1+Math.abs(t))*(1+Math.abs(t)))},relu:{activation:t=>t<0?0:t,derivate:t=>t<0?0:1},softplus:{activation:t=>Math.log(1+Math.exp(t)),derivate:t=>1/(1+Math.exp(-t))},bent:{activation:t=>(Math.sqrt(t*t+1)-1)/2+t,derivate:t=>t/(2*Math.sqrt(t*t+1))+1},sinusoid:{activation:Math.sin,derivate:Math.cos},sinc:{activation:t=>0===t?1:Math.sin(t)/t,derivate:t=>0===t?0:Math.cos(t)/t-Math.sin(t)/(t*t)},gaussian:{activation:t=>Math.exp(-t*t),derivate:t=>-2*t*Math.exp(-t*t)},"parametric-relu":{activation:(t,e)=>t<0?e*t:t,derivate:(t,e)=>t<0?e:1},"exponential-elu":{activation:i,derivate:(t,e)=>t<0?i(t,e)+e:1},"soft-exponential":{activation:function(t,e){return e<0?-Math.log(1-e*(t+e))/e:e>0?(Math.exp(e*t)-1)/e+e:t},derivate:function(t,e){return e<0?1/(1-e*(e+t)):Math.exp(e*t)}}};t.exports=o},function(t,e){function r(t,e,r,n){this.x=t,this.y=e,this.weights=r,this.som=n,this.neighbors={}}r.prototype.adjustWeights=function(t,e,r){for(var n=0,i=this.weights.length;n<i;n++)this.weights[n]+=e*r*(t[n]-this.weights[n])},r.prototype.getDistance=function(t){return Math.max(Math.abs(this.x-t.x),Math.abs(this.y-t.y))},r.prototype.getDistanceTorus=function(t){var e=Math.abs(this.x-t.x),r=Math.abs(this.y-t.y);return Math.max(Math.min(e,this.som.gridDim.x-e),Math.min(r,this.som.gridDim.y-r))},r.prototype.getNeighbors=function(t){if(!this.neighbors[t]){var e,r,n,i;if(this.neighbors[t]=new Array(2),this[t]>0?e=this[t]-1:this.som.torus&&(e=this.som.gridDim[t]-1),void 0!==e)"x"===t?(r=e,n=this.y):(r=this.x,n=e),this.neighbors[t][0]=this.som.nodes[r][n];this[t]<this.som.gridDim[t]-1?i=this[t]+1:this.som.torus&&(i=0),void 0!==i&&("x"===t?(r=i,n=this.y):(r=this.x,n=i),this.neighbors[t][1]=this.som.nodes[r][n])}return this.neighbors[t]},r.prototype.getPos=function(t,e){var r,n,i=this.getNeighbors(t),o=this.som.distance;i[0]?i[1]?o(e,i[0].weights)<o(e,i[1].weights)?(r=i[0],n=-1):(r=i[1],n=1):(r=i[0],n=-1):(r=i[1],n=1);var s=1-o(e,this.weights),a=1-o(e,r.weights);return.5+.5*((s-a)/(2-s-a))*n},r.prototype.getPosition=function(t){return[this.getPos("x",t),this.getPos("y",t)]},t.exports=r},function(t,e,r){"use strict";e.distance=r(75),e.similarity=r(112)},function(t,e,r){"use strict";t.exports=function(t,e){for(var r=0,n=0,i=0;i<t.length;i++)r+=Math.min(t[i],e[i]),n+=t[i]+e[i];return 2*r/n}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0,s=0;s<r;s++)n+=t[s]*t[s],i+=e[s]*e[s],o+=(t[s]-e[s])*(t[s]-e[s]);return o/(n+i)}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=Math.min(t[i],e[i]);return 1-n}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0,s=0,a=0;a<r;a++)n+=t[a]*e[a],i+=t[a]*t[a],o+=e[a]*e[a],s+=(t[a]-e[a])*(t[a]-e[a]);return s/(i+o-n)}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0;o<r;o++)n+=Math.abs(t[o]-e[o]),i+=Math.min(t[o],e[o]);return n/i}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0;o<r;o++)n+=Math.min(t[o],e[o]),i+=t[o]+e[o];return 1-n/i}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=(Math.sqrt(t[i])-Math.sqrt(e[i]))*(Math.sqrt(t[i])-Math.sqrt(e[i]));return n}},function(t,e){t.exports=function(t,e,r){if(r){for(var n=0,i=0,o=0;o<t.length;o++)n+=t[o]&&e[o],i+=t[o]||e[o];return 0===i?1:n/i}for(var s=t.length,a=0,h=0,u=0,l=0;l<s;l++)a+=t[l],h+=e[l],u+=Math.min(t[l],e[l]);return 1-(a+h-2*u)/(a+h-u)}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0,s=0;s<r;s++)n+=t[s]*e[s],i+=t[s]*t[s],o+=e[s]*e[s];return n/(Math.sqrt(i)*Math.sqrt(o))}},function(t,e,r){"use strict";var n=r(16),i={size:1,value:0};t.exports=function(t,e){if(e=n({},i,e),Array.isArray(t))return Array.isArray(t[0])?function(t,e){throw t.length,t[0].length,void 0===e.size[0]&&(e.size=[e.size,e.size,e.size,e.size]),new Error("matrix not supported yet, sorry")}(t,e):function(t,e){var r=t.length;"number"==typeof e.size&&(e.size=[e.size,e.size]);var n,i,o=r+e.size[0]+e.size[1];if(e.output){if(e.output.length!==o)throw new RangeError("Wrong output size");n=e.output}else n=new Array(o);if("circular"===e.value)for(i=0;i<o;i++)i<e.size[0]?n[i]=t[(r-e.size[0]%r+i)%r]:i<e.size[0]+r?n[i]=t[i-e.size[0]]:n[i]=t[(i-e.size[0])%r];else if("replicate"===e.value)for(i=0;i<o;i++)i<e.size[0]?n[i]=t[0]:i<e.size[0]+r?n[i]=t[i-e.size[0]]:n[i]=t[r-1];else if("symmetric"===e.value){if(e.size[0]>r||e.size[1]>r)throw new RangeError("expanded value should not be bigger than the data length");for(i=0;i<o;i++)i<e.size[0]?n[i]=t[e.size[0]-1-i]:i<e.size[0]+r?n[i]=t[i-e.size[0]]:n[i]=t[2*r+e.size[0]-i-1]}else for(i=0;i<o;i++)i<e.size[0]?n[i]=e.value:i<e.size[0]+r?n[i]=t[i-e.size[0]]:n[i]=e.value;return n}(t,e);throw new TypeError("data should be an array")}},function(t,e,r){"use strict";function n(t,e){return t<0?(t=0-t,"number"==typeof e?"- "+t.toPrecision(e):"- "+t.toString()):"number"==typeof e?t.toPrecision(e):t.toString()}function i(t,e){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("x and y must be arrays");if(t.length!==e.length)throw new RangeError("x and y arrays must have the same length")}r.r(e);class o{constructor(){if(new.target===o)throw new Error("BaseRegression must be subclassed")}predict(t){if("number"==typeof t)return this._predict(t);if(Array.isArray(t)){const e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=this._predict(t[r]);return e}throw new TypeError("x must be a number or array")}_predict(){throw new Error("_predict must be implemented")}train(){}toString(){return""}toLaTeX(){return""}score(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)throw new Error("x and y must be arrays of the same length");const r=t.length,n=new Array(r);for(let e=0;e<r;e++)n[e]=this._predict(t[e]);let i=0,o=0,s=0,a=0,h=0,u=0,l=0;for(let t=0;t<r;t++)i+=n[t],o+=e[t],h+=n[t]*n[t],u+=e[t]*e[t],l+=n[t]*e[t],0!==e[t]&&(s+=(e[t]-n[t])*(e[t]-n[t])/e[t]),a=(e[t]-n[t])*(e[t]-n[t]);const c=(r*l-i*o)/Math.sqrt((r*h-i*i)*(r*u-o*o));return{r:c,r2:c*c,chi2:s,rmsd:a*a/r}}}class s extends o{constructor(t,e){super(),!0===t?(this.slope=e.slope,this.intercept=e.intercept,this.coefficients=[e.intercept,e.slope]):(i(t,e),function(t,e,r){const n=e.length;let i=0,o=0,s=0,a=0;for(let t=0;t<n;t++)i+=e[t],o+=r[t],s+=e[t]*e[t],a+=e[t]*r[t];const h=n*a-i*o;t.slope=h/(n*s-i*i),t.intercept=1/n*o-t.slope*(1/n)*i,t.coefficients=[t.intercept,t.slope]}(this,t,e))}toJSON(){return{name:"simpleLinearRegression",slope:this.slope,intercept:this.intercept}}_predict(t){return this.slope*t+this.intercept}computeX(t){return(t-this.intercept)/this.slope}toString(t){let e="f(x) = ";if(0!==this.slope){const r=n(this.slope,t);if(e+=("1"===r?"":r+" * ")+"x",this.intercept){const r=Math.abs(this.intercept),i=r===this.intercept?"+":"-";e+=" ".concat(i," ").concat(n(r,t))}}else e+=n(this.intercept,t);return e}toLaTeX(t){return this.toString(t)}static load(t){if("simpleLinearRegression"!==t.name)throw new TypeError("not a SLR model");return new s(!0,t)}}var a=r(0);class h extends o{constructor(t,e,r){super(),!0===t?(this.degree=e.degree,this.powers=e.powers,this.coefficients=e.coefficients):(i(t,e),function(t,e,r,n){const i=e.length;let o;if(Array.isArray(n))n=(o=n).length;else{n++,o=new Array(n);for(let t=0;t<n;t++)o[t]=t}const s=new a.default(i,n),h=new a.default([r]);for(let t=0;t<n;t++)for(let r=0;r<i;r++)0===o[t]?s[r][t]=1:s[r][t]=Math.pow(e[r],o[t]);const u=s.transposeView(),l=u.mmul(s),c=u.mmul(h.transposeView());t.degree=n-1,t.powers=o,t.coefficients=Object(a.solve)(l,c).to1DArray()}(this,t,e,r))}_predict(t){let e=0;for(let r=0;r<this.powers.length;r++)e+=this.coefficients[r]*Math.pow(t,this.powers[r]);return e}toJSON(){return{name:"polynomialRegression",degree:this.degree,powers:this.powers,coefficients:this.coefficients}}toString(t){return this._toFormula(t,!1)}toLaTeX(t){return this._toFormula(t,!0)}_toFormula(t,e){let r="^",i="",o=" * ";e&&(r="^{",i="}",o="");let s="",a="";for(let e=0;e<this.coefficients.length;e++)a="",0!==this.coefficients[e]&&(a=0===this.powers[e]?n(this.coefficients[e],t):1===this.powers[e]?n(this.coefficients[e],t)+o+"x":n(this.coefficients[e],t)+o+"x"+r+this.powers[e]+i,this.coefficients[e]>0&&e!==this.coefficients.length-1?a=" + "+a:e!==this.coefficients.length-1&&(a=" "+a)),s=a+s;return"+"===s.charAt(0)&&(s=s.slice(1)),"f(x) = "+s}static load(t){if("polynomialRegression"!==t.name)throw new TypeError("not a polynomial regression model");return new h(!0,t)}}class u extends o{constructor(t,e){super(),!0===t?(this.A=e.A,this.B=e.B):(i(t,e),function(t,e,r){const n=e.length,i=new Array(n);for(let t=0;t<n;t++)i[t]=Math.log(r[t]);const o=new s(e,i);t.A=o.slope,t.B=Math.exp(o.intercept)}(this,t,e))}_predict(t){return this.B*Math.exp(t*this.A)}toJSON(){return{name:"exponentialRegression",A:this.A,B:this.B}}toString(t){return"f(x) = "+n(this.B,t)+" * e^("+n(this.A,t)+" * x)"}toLaTeX(t){return this.A>=0?"f(x) = "+n(this.B,t)+"e^{"+n(this.A,t)+"x}":"f(x) = \\frac{"+n(this.B,t)+"}{e^{"+n(-this.A,t)+"x}}"}static load(t){if("exponentialRegression"!==t.name)throw new TypeError("not a exponential regression model");return new u(!0,t)}}class l extends o{constructor(t,e){super(),!0===t?(this.A=e.A,this.B=e.B):(i(t,e),function(t,e,r){const n=e.length,i=new Array(n),o=new Array(n);for(let t=0;t<n;t++)i[t]=Math.log(e[t]),o[t]=Math.log(r[t]);const a=new s(i,o);t.A=Math.exp(a.intercept),t.B=a.slope}(this,t,e))}_predict(t){return this.A*Math.pow(t,this.B)}toJSON(){return{name:"powerRegression",A:this.A,B:this.B}}toString(t){return"f(x) = "+n(this.A,t)+" * x^"+n(this.B,t)}toLaTeX(t){return this.B>=0?"f(x) = "+n(this.A,t)+"x^{"+n(this.B,t)+"}":"f(x) = \\frac{"+n(this.A,t)+"}{x^{"+n(-this.B,t)+"}}"}static load(t){if("powerRegression"!==t.name)throw new TypeError("not a power regression model");return new l(!0,t)}}class c extends o{constructor(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=r.intercept,i=void 0===n||n,o=r.statistics,s=void 0===o||o;if(super(),this.statistics=s,!0===t)this.weights=e.weights,this.inputs=e.inputs,this.outputs=e.outputs,this.intercept=e.intercept;else{t=new a.default(t),i&&t.addColumn(new Array(t.length).fill(1));const r=new a.SVD(t,{autoTranspose:!0}).solve(e);if(this.weights=r.to2DArray(),this.inputs=t[0].length,this.outputs=e[0].length,i&&this.inputs--,this.intercept=i,s){const n=t.mmul(r),i=new a.default(e).addM(n.neg()).to2DArray().map(t=>Math.pow(t[0],2)).reduce((t,e)=>t+e)/(e.length-t.columns);this.stdError=Math.sqrt(i),this.stdErrorMatrix=t.transposeView().mmul(t).pseudoInverse().mul(i),this.stdErrors=this.stdErrorMatrix.diagonal().map(t=>Math.sqrt(t)),this.tStats=this.weights.map((t,e)=>0===this.stdErrors[e]?0:t[0]/this.stdErrors[e])}}}predict(t){if(Array.isArray(t)){if("number"==typeof t[0])return this._predict(t);if(Array.isArray(t[0])){const e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=this._predict(t[r]);return e}}throw new TypeError("x must be a matrix or array of numbers")}_predict(t){const e=new Array(this.outputs);if(this.intercept)for(let t=0;t<this.outputs;t++)e[t]=this.weights[this.inputs][t];else e.fill(0);for(let r=0;r<this.inputs;r++)for(let n=0;n<this.outputs;n++)e[n]+=this.weights[r][n]*t[r];return e}score(){throw new Error("score method is not implemented yet")}toJSON(){return{name:"multivariateLinearRegression",weights:this.weights,inputs:this.inputs,outputs:this.outputs,intercept:this.intercept,summary:this.statistics?{regressionStatistics:{standardError:this.stdError,observations:this.outputs},variables:this.weights.map((t,e)=>({label:e===this.weights.length-1?"Intercept":"X Variable ".concat(e+1),coefficients:t,standardError:this.stdErrors[e],tStat:this.tStats[e]}))}:void 0}}static load(t){if("multivariateLinearRegression"!==t.name)throw new Error("not a MLR model");return new c(!0,t)}}class f extends o{constructor(t,e,r){if(super(),!0===t)this.A=e.A,this.M=e.M;else{if(t.length!==e.length)throw new RangeError("input and output array have a different length");var n=new h(t,e,[r]);this.A=n.coefficients[0],this.M=r}}_predict(t){return this.A*Math.pow(t,this.M)}toJSON(){return{name:"potentialRegression",A:this.A,M:this.M}}toString(t){return"f(x) = "+n(this.A,t)+" * x^"+this.M}toLaTeX(t){return this.M>=0?"f(x) = "+n(this.A,t)+"x^{"+this.M+"}":"f(x) = \\frac{"+n(this.A,t)+"}{x^{"+-this.M+"}}"}static load(t){if("potentialRegression"!==t.name)throw new TypeError("not a potential regression model");return new f(!0,t)}}var g=r(10),d=r.n(g);const m={lambda:.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class p extends o{constructor(t,e,r){if(super(),!0===t)this.alpha=e.alpha,this.inputs=e.inputs,this.kernelType=e.kernelType,this.kernelOptions=e.kernelOptions,this.kernel=new d.a(e.kernelType,e.kernelOptions);else{r=Object.assign({},m,r);const n=new d.a(r.kernelType,r.kernelOptions),i=n.compute(t),o=t.length;i.add(a.Matrix.eye(o,o).mul(r.lambda)),this.alpha=Object(a.solve)(i,e),this.inputs=t,this.kernelType=r.kernelType,this.kernelOptions=r.kernelOptions,this.kernel=n}}_predict(t){return this.kernel.compute([t],this.inputs).mmul(this.alpha)[0]}toJSON(){return{name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}static load(t){if("kernelRidgeRegression"!==t.name)throw new TypeError("not a KRR model");return new p(!0,t)}}const v={order:2};class w extends o{constructor(t,e,r){super(),!0===t?(this.coefficients=a.Matrix.columnVector(e.coefficients),this.order=e.order,e.r&&(this.r=e.r,this.r2=e.r2),e.chi2&&(this.chi2=e.chi2)):(r=Object.assign({},v,r),this.order=r.order,this.coefficients=[],this.X=t,this.y=e,this.train(this.X,this.y,r))}train(t,e){if(a.Matrix.isMatrix(t)||(t=new a.Matrix(t)),a.Matrix.isMatrix(e)||(e=a.Matrix.columnVector(e)),e.rows!==t.rows&&(e=e.transpose()),2!==t.columns)throw new RangeError("You give X with "+t.columns+" columns and it must be 2");if(t.rows!==e.rows)throw new RangeError("X and y must have the same rows");var r=t.rows,n=(this.order+2)*(this.order+1)/2;this.coefficients=new Array(n);var i=t.getColumnVector(0),o=t.getColumnVector(1),s=1/i.clone().apply(x).max(),h=1/o.clone().apply(x).max(),u=1/e.clone().apply(x).max();i.mulColumn(0,s),o.mulColumn(0,h),e.mulColumn(0,u);for(var l=new a.Matrix(r,n),c=0,f=0;f<=this.order;++f)for(var g=this.order-f,d=0;d<=g;++d){var m=y(i,f).mulColumnVector(y(o,d));l.setColumn(c,m),c++}var p=new a.SVD(l.transpose(),{computeLeftSingularVectors:!0,computeRightSingularVectors:!0,autoTranspose:!1}),v=a.Matrix.rowVector(p.diagonal);v=v.apply(function(t,e){this[t][e]>=1e-15?this[t][e]=1/this[t][e]:this[t][e]=0});var w=a.Matrix.zeros(r,n);for(f=0;f<n;++f)w[f][f]=v[0][f];v=w;var b=p.rightSingularVectors,M=p.leftSingularVectors;for(this.coefficients=M.mmul(v.transpose()).mmul(b.transpose()).mmul(e),c=0,f=0;f<=n;++f)for(g=this.order-f,d=0;d<=g;++d)this.coefficients[c][0]=this.coefficients[c][0]*Math.pow(s,f)*Math.pow(h,d)/u,c++}_predict(t){for(var e=t[0],r=t[1],n=0,i=0,o=0;o<=this.order;o++)for(var s=0;s<=this.order-o;s++)n+=Math.pow(e,o)*Math.pow(r,s)*this.coefficients[i][0],i++;return n}toJSON(){return{name:"polyfit2D",order:this.order,coefficients:this.coefficients}}static load(t){if("polyfit2D"!==t.name)throw new TypeError("not a polyfit2D model");return new w(!0,t)}}function y(t,e){for(var r=t.clone(),n=0;n<t.rows;++n)r[n][0]=Math.pow(r[n][0],e);return r}function x(t,e){this[t][e]=Math.abs(this[t][e])}const b=r(3).array.median;class M extends o{constructor(t,e){super(),!0===t?(this.slope=e.slope,this.intercept=e.intercept,this.coefficients=e.coefficients):(i(t,e),function(t,e,r){let n=e.length,i=new Array(n*n),o=0;for(let t=0;t<n;++t)for(let s=t+1;s<n;++s)e[t]!==e[s]&&(i[o++]=(r[s]-r[t])/(e[s]-e[t]));i.length=o;let s=b(i),a=new Array(n);for(let t=0;t<n;++t)a[t]=r[t]-s*e[t];t.slope=s,t.intercept=b(a),t.coefficients=[t.intercept,t.slope]}(this,t,e))}toJSON(){return{name:"TheilSenRegression",slope:this.slope,intercept:this.intercept}}_predict(t){return this.slope*t+this.intercept}computeX(t){return(t-this.intercept)/this.slope}toString(t){var e="f(x) = ";if(this.slope){var r=n(this.slope,t);if(e+=(Math.abs(r-1)<1e-5?"":r+" * ")+"x",this.intercept){var i=Math.abs(this.intercept);e+=" "+(i===this.intercept?"+":"-")+" "+n(i,t)}}else e+=n(this.intercept,t);return e}toLaTeX(t){return this.toString(t)}static load(t){if("TheilSenRegression"!==t.name)throw new TypeError("not a Theil-Sen model");return new M(!0,t)}}class S extends o{constructor(t,e,r){super(),!0===t?(this.degree=e.degree,this.powers=e.powers,this.coefficients=e.coefficients):(i(t,e),function(t,e,r,n){let i=new Array(n);for(let t=0;t<n;t++)i[t]=t;const o=function(t,e,r){for(var n=Math.floor(t.length/r),i=new Array(n),o=0;o<t.length;o++){for(var s=Math.floor(Math.random()*n),a=0;a<t.length;){if(!i[s]){i[s]=[{x:t[o],y:e[o]}];break}if(i[s].length<r){i[s].push({x:t[o],y:e[o]});break}a++,s=(s+1)%n}if(a===t.length)return i}return i}(e,r,n);for(var s,a=0;a<o.length;a++){for(var h=o[a],u=A(h,i),l=e.slice(),c=0;c<e.length;c++)l[c]=r[c]-E(e[c],i,u),l[c]={residual:l[c]*l[c],coefficients:u};var f=R(l);(!s||f.residual<s.residual)&&(s=f)}t.degree=n,t.powers=i,t.coefficients=s.coefficients}(this,t,e,r))}toJSON(){return{name:"robustPolynomialRegression",degree:this.degree,powers:this.powers,coefficients:this.coefficients}}_predict(t){return E(t,this.powers,this.coefficients)}toString(t){return this._toFormula(t,!1)}toLaTeX(t){return this._toFormula(t,!0)}_toFormula(t,e){let r="^",i="",o=" * ";e&&(r="^{",i="}",o="");let s="",a="";for(let e=0;e<this.coefficients.length;e++)a="",0!==this.coefficients[e]&&(a=0===this.powers[e]?n(this.coefficients[e],t):1===this.powers[e]?n(this.coefficients[e],t)+o+"x":n(this.coefficients[e],t)+o+"x"+r+this.powers[e]+i,this.coefficients[e]>0&&e!==this.coefficients.length-1?a=" + "+a:e!==this.coefficients.length-1&&(a=" "+a)),s=a+s;return"+"===s.charAt(0)&&(s=s.slice(1)),"f(x) = "+s}static load(t){if("robustPolynomialRegression"!==t.name)throw new TypeError("not a RobustPolynomialRegression model");return new S(!0,t)}}function A(t,e){for(var r=t.slice(),n=t.slice(),i=0;i<r.length;i++){n[i]=[t[i].y],r[i]=new Array(e.length);for(var o=0;o<e.length;o++)r[i][o]=Math.pow(t[i].x,e[o])}return Object(a.solve)(r,n).to1DArray()}function E(t,e,r){let n=0;for(let i=0;i<e.length;i++)n+=r[i]*Math.pow(t,e[i]);return n}function R(t){t.sort((t,e)=>t.residual-e.residual);var e=t.length,r=Math.floor(e/2);return e%2==0?t[r-1]:t[r]}r.d(e,"NLR",function(){return k}),r.d(e,"NonLinearRegression",function(){return k}),r.d(e,"SimpleLinearRegression",function(){return s}),r.d(e,"SLR",function(){return s}),r.d(e,"PolynomialRegression",function(){return h}),r.d(e,"ExponentialRegression",function(){return u}),r.d(e,"PowerRegression",function(){return l}),r.d(e,"MultivariateLinearRegression",function(){return c}),r.d(e,"KernelRidgeRegression",function(){return p}),r.d(e,"KRR",function(){return p}),r.d(e,"PolinomialFitting2D",function(){return w}),r.d(e,"TheilSenRegression",function(){return M}),r.d(e,"RobustPolynomialRegression",function(){return S});const k={PotentialRegression:f}},function(t,e,r){!function(){function e(t){for(var e=0,i=t.length-1,o=void 0,s=void 0,a=void 0,h=n(e,i);;){if(i<=e)return t[h];if(i==e+1)return t[e]>t[i]&&r(t,e,i),t[h];for(t[o=n(e,i)]>t[i]&&r(t,o,i),t[e]>t[i]&&r(t,e,i),t[o]>t[e]&&r(t,o,e),r(t,o,e+1),s=e+1,a=i;;){do{s++}while(t[e]>t[s]);do{a--}while(t[a]>t[e]);if(a<s)break;r(t,s,a)}r(t,e,a),a<=h&&(e=s),a>=h&&(i=a-1)}}var r=function(t,e,r){var n;return n=[t[r],t[e]],t[e]=n[0],t[r]=n[1],n},n=function(t,e){return~~((t+e)/2)};t.exports?t.exports=e:window.median=e}()},function(t,e,r){"use strict";const n=r(8),i=r(142),o=e;o.PCA=r(43),o.HClust=r(44),o.KMeans=r(141),o.SVM=r(53),o.NaiveBayes=r(144),o.KNN=r(145),o.PLS=r(143),o.CrossValidation=r(64),o.ConfusionMatrix=r(24),o.DecisionTreeClassifier=n.DecisionTreeClassifier,o.RandomForestClassifier=i.RandomForestClassifier,o.FNN=r(66),o.SOM=r(68);const s=r(40);o.SimpleLinearRegression=s.SimpleLinearRegression,o.PolynomialRegression=s.PolynomialRegression,o.MultivariateLinearRegression=s.MultivariateLinearRegression,o.PowerRegression=s.PowerRegression,o.ExponentialRegression=s.ExponentialRegression,o.TheilSenRegression=s.TheilSenRegression,o.RobustPolynomialRegression=s.RobustPolynomialRegression,o.DecisionTreeRegression=n.DecisionTreeRegression,o.RandomForestRegression=i.RandomForestRegression,o.levenbergMarquardt=r(70);const a=r(0);o.Matrix=a.Matrix,o.SVD=a.SVD,o.EVD=a.EVD,o.CholeskyDecomposition=a.CholeskyDecomposition,o.LuDecomposition=a.LuDecomposition,o.QrDecomposition=a.QrDecomposition,o.SparseMatrix=r(71),o.Kernel=r(10),o.Distance=r(29).distance,o.Similarity=r(29).similarity,o.distanceMatrix=r(23),o.XSadd=r(19).default,o.Performance=r(120),o.savitzkyGolay=r(122),o.savitzkyGolayGeneralized=r(123),o.BitArray=r(124),o.HashTable=r(14),o.padArray=r(39),o.binarySearch=r(6),o.numSort=r(7),o.Random=r(11).default,o.ArrayUtils=r(126),o.Regression=r(40),o.MatrixUtil=r(0),o.ArrayStat=r(3).array,o.MatrixStat=r(3).matrix,o.Array={min:r(17).default,max:r(9).default,median:r(18).default,mean:r(5).default,mode:r(130).default,normed:r(131).default,rescale:r(13).default,sequentialFill:r(132).default,standardDeviation:r(133).default,variance:r(20).default},o.ArrayXY={centroidsMerge:r(134).default,closestX:r(135).default,maxMerge:r(136).default,maxY:r(137).default,sortX:r(138).default,uniqueX:r(139).default,weightedMerge:r(140).default}},function(t,e,r){"use strict";const n=r(0),i=n.Matrix,o=n.EVD,s=n.SVD,a=r(4),h=a.mean,u=a.standardDeviation,l={isCovarianceMatrix:!1,center:!0,scale:!1};class c{constructor(t,e){if(!0===t){const t=e;return this.center=t.center,this.scale=t.scale,this.means=t.means,this.stdevs=t.stdevs,this.U=i.checkMatrix(t.U),void(this.S=t.S)}if(e=Object.assign({},l,e),this.center=!1,this.scale=!1,this.means=null,this.stdevs=null,e.isCovarianceMatrix)this._computeFromCovarianceMatrix(t);else if("boolean"==typeof e.useCovarianceMatrix?e.useCovarianceMatrix:t.length>t[0].length){const r=(t=this._adjust(t,e)).transposeView().mmul(t).div(t.rows-1);this._computeFromCovarianceMatrix(r)}else{t=this._adjust(t,e);var r=new s(t,{computeLeftSingularVectors:!1,computeRightSingularVectors:!0,autoTranspose:!0});this.U=r.rightSingularVectors;const i=r.diagonal,o=new Array(i.length);for(var n=0;n<i.length;n++)o[n]=i[n]*i[n]/(t.length-1);this.S=o}}static load(t){if("PCA"!==t.name)throw new RangeError("Invalid model: "+t.name);return new c(!0,t)}predict(t){const e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).nComponents,r=void 0===e?this.U.columns:e;t=new i(t),this.center&&(t.subRowVector(this.means),this.scale&&t.divRowVector(this.stdevs));var n=t.mmul(this.U);return n.subMatrix(0,n.rows-1,0,r-1)}getExplainedVariance(){for(var t=0,e=0;e<this.S.length;e++)t+=this.S[e];return this.S.map(e=>e/t)}getCumulativeVariance(){for(var t=this.getExplainedVariance(),e=1;e<t.length;e++)t[e]+=t[e-1];return t}getEigenvectors(){return this.U}getEigenvalues(){return this.S}getStandardDeviations(){return this.S.map(t=>Math.sqrt(t))}getLoadings(){return this.U.transpose()}toJSON(){return{name:"PCA",center:this.center,scale:this.scale,means:this.means,stdevs:this.stdevs,U:this.U,S:this.S}}_adjust(t,e){if(this.center=!!e.center,this.scale=!!e.scale,t=new i(t),this.center){const e=h(t),n=this.scale?u(t,e,!0):null;if(this.means=e,t.subRowVector(e),this.scale){for(var r=0;r<n.length;r++)if(0===n[r])throw new RangeError("Cannot scale the dataset (standard deviation is zero at index "+r);this.stdevs=n,t.divRowVector(n)}}return t}_computeFromCovarianceMatrix(t){const e=new o(t,{assumeSymmetric:!0});this.U=e.eigenvectorMatrix;for(var r=0;r<this.U.length;r++)this.U[r].reverse();this.S=e.realEigenvalues.reverse()}}t.exports=c},function(t,e,r){"use strict";e.agnes=r(45),e.diana=r(52)},function(t,e,r){"use strict";const n=r(2),i=r(22),o=r(15),s=r(23);function a(t,e,r){for(var n=1e101,i=0;i<t.length;i++)for(var o=0;o<e.length;o++){var s=r[t[i]][e[o]];n=Math.min(s,n)}return n}function h(t,e,r){for(var n=-1,i=0;i<t.length;i++)for(var o=0;o<e.length;o++){var s=r[t[i]][e[o]];n=Math.max(s,n)}return n}function u(t,e,r){for(var n=0,i=0;i<t.length;i++)for(var o=0;o<e.length;o++)n+=r[t[i]][e[o]];return n/(t.length*e.length)}function l(t,e,r){for(var n=new Array(t.length*e.length),i=0;i<t.length;i++)for(var o=0;o<e.length;o++)n[i*e.length+o]=r[t[i]][e[o]];return function(t,e){void 0===e&&(e=!1);e||(t=[].concat(t).sort(f));var r=t.length,n=Math.floor(r/2);return r%2==0?.5*(t[n-1]+t[n]):t[n]}(n)}function c(t,e,r){return l(t,e,r)*t.length*e.length/(t.length+e.length)}function f(t,e){return t-e}var g={disFunc:n,kind:"single",isDistanceMatrix:!1};t.exports=function(t,e){e=Object.assign({},g,e);var r=t.length,n=t;if(e.isDistanceMatrix||(n=s(t,e.disFunc)),"string"==typeof e.kind)switch(e.kind){case"single":e.kind=a;break;case"complete":e.kind=h;break;case"average":e.kind=u;break;case"centroid":e.kind=l;break;case"ward":e.kind=c;break;default:throw new RangeError("Unknown kind of similarity")}else if("function"!=typeof e.kind)throw new TypeError("Undefined kind of similarity");for(var f=new Array(r),d=0;d<n.length;d++)f[d]=new i(d);for(var m=1e6,p={},v=0;f.length>1;){p={},m=1e6;for(var w=0;w<f.length;w++)for(var y=w+1;y<f.length;y++){var x,b;if(f[w]instanceof i)x=[f[w].index];else{x=new Array(f[w].index.length);for(var M=0;M<x.length;M++)x[M]=f[w].index[M].index}if(f[y]instanceof i)b=[f[y].index];else{b=new Array(f[y].index.length);for(var S=0;S<b.length;S++)b[S]=f[y].index[S].index}(v=e.kind(x,b,n).toFixed(4))in p?p[v].push([f[w],f[y]]):p[v]=[[f[w],f[y]]],m=Math.min(v,m)}for(var A,E=p[m.toFixed(4)],R=new Array(E.length),k=0;E.length>0;){A=E.shift();for(var O=0;O<E.length;O++)if(E[O].filter(function(t){return-1!==A.indexOf(t)}).length>0){var C=E[O].filter(function(t){return-1===A.indexOf(t)});A=A.concat(C),E.splice(O--,1)}R[k++]=A}R.length=k;for(var T=0;T<R.length;T++){var P=new o;P.children=R[T].concat(),P.distance=m,P.index=new Array(r);for(var N=0,_=0;_<R[T].length;_++)R[T][_]instanceof i?P.index[N++]=R[T][_]:(N+=R[T][_].index.length,P.index=R[T][_].index.concat(P.index)),f.splice(f.indexOf(R[T][_]),1);P.index.length=N,f.push(P)}}return f[0]}},function(t,e,r){t.exports=r(47)},function(t,e,r){var n,i,o;(function(){var r,s,a,h,u,l,c,f,g,d,m,p,v,w,y;a=Math.floor,d=Math.min,s=function(t,e){return t<e?-1:t>e?1:0},g=function(t,e,r,n,i){var o;if(null==r&&(r=0),null==i&&(i=s),r<0)throw new Error("lo must be non-negative");for(null==n&&(n=t.length);r<n;)i(e,t[o=a((r+n)/2)])<0?n=o:r=o+1;return[].splice.apply(t,[r,r-r].concat(e)),e},l=function(t,e,r){return null==r&&(r=s),t.push(e),w(t,0,t.length-1,r)},u=function(t,e){var r,n;return null==e&&(e=s),r=t.pop(),t.length?(n=t[0],t[0]=r,y(t,0,e)):n=r,n},f=function(t,e,r){var n;return null==r&&(r=s),n=t[0],t[0]=e,y(t,0,r),n},c=function(t,e,r){var n;return null==r&&(r=s),t.length&&r(t[0],e)<0&&(e=(n=[t[0],e])[0],t[0]=n[1],y(t,0,r)),e},h=function(t,e){var r,n,i,o,h,u;for(null==e&&(e=s),h=[],n=0,i=(o=function(){u=[];for(var e=0,r=a(t.length/2);0<=r?e<r:e>r;0<=r?e++:e--)u.push(e);return u}.apply(this).reverse()).length;n<i;n++)r=o[n],h.push(y(t,r,e));return h},v=function(t,e,r){var n;if(null==r&&(r=s),-1!==(n=t.indexOf(e)))return w(t,0,n,r),y(t,n,r)},m=function(t,e,r){var n,i,o,a,u;if(null==r&&(r=s),!(i=t.slice(0,e)).length)return i;for(h(i,r),o=0,a=(u=t.slice(e)).length;o<a;o++)n=u[o],c(i,n,r);return i.sort(r).reverse()},p=function(t,e,r){var n,i,o,a,l,c,f,m,p;if(null==r&&(r=s),10*e<=t.length){if(!(o=t.slice(0,e).sort(r)).length)return o;for(i=o[o.length-1],a=0,c=(f=t.slice(e)).length;a<c;a++)r(n=f[a],i)<0&&(g(o,n,0,null,r),o.pop(),i=o[o.length-1]);return o}for(h(t,r),p=[],l=0,m=d(e,t.length);0<=m?l<m:l>m;0<=m?++l:--l)p.push(u(t,r));return p},w=function(t,e,r,n){var i,o,a;for(null==n&&(n=s),i=t[r];r>e&&n(i,o=t[a=r-1>>1])<0;)t[r]=o,r=a;return t[r]=i},y=function(t,e,r){var n,i,o,a,h;for(null==r&&(r=s),i=t.length,h=e,o=t[e],n=2*e+1;n<i;)(a=n+1)<i&&!(r(t[n],t[a])<0)&&(n=a),t[e]=t[n],n=2*(e=n)+1;return t[e]=o,w(t,h,e,r)},r=function(){function t(t){this.cmp=null!=t?t:s,this.nodes=[]}return t.push=l,t.pop=u,t.replace=f,t.pushpop=c,t.heapify=h,t.updateItem=v,t.nlargest=m,t.nsmallest=p,t.prototype.push=function(t){return l(this.nodes,t,this.cmp)},t.prototype.pop=function(){return u(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return f(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return c(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return h(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return v(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),i=[],void 0===(o="function"==typeof(n=function(){return r})?n.apply(e,i):n)||(t.exports=o)}).call(this)},function(t,e,r){(function(t){var n=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},i=/%[sdj%]/g;e.format=function(t){if(!v(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(a(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,o=n.length,s=String(t).replace(i,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}}),h=n[r];r<o;h=n[++r])m(h)||!x(h)?s+=" "+h:s+=" "+a(h);return s},e.deprecate=function(r,n){if(void 0!==t&&!0===t.noDeprecation)return r;if(void 0===t)return function(){return e.deprecate(r,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),i=!0}return r.apply(this,arguments)}};var o,s={};function a(t,r){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(r)?n.showHidden=r:r&&e._extend(n,r),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=h),l(n,t,n.depth)}function h(t,e){var r=a.styles[e];return r?"["+a.colors[r][0]+"m"+t+"["+a.colors[r][1]+"m":t}function u(t,e){return t}function l(t,r,n){if(t.customInspect&&r&&S(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return v(i)||(i=l(t,i,n)),i}var o=function(t,e){if(w(e))return t.stylize("undefined","undefined");if(v(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(p(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(m(e))return t.stylize("null","null")}(t,r);if(o)return o;var s=Object.keys(r),a=function(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),M(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(r);if(0===s.length){if(S(r)){var h=r.name?": "+r.name:"";return t.stylize("[Function"+h+"]","special")}if(y(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(b(r))return t.stylize(Date.prototype.toString.call(r),"date");if(M(r))return c(r)}var u,x="",A=!1,E=["{","}"];(g(r)&&(A=!0,E=["[","]"]),S(r))&&(x=" [Function"+(r.name?": "+r.name:"")+"]");return y(r)&&(x=" "+RegExp.prototype.toString.call(r)),b(r)&&(x=" "+Date.prototype.toUTCString.call(r)),M(r)&&(x=" "+c(r)),0!==s.length||A&&0!=r.length?n<0?y(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),u=A?function(t,e,r,n,i){for(var o=[],s=0,a=e.length;s<a;++s)k(e,String(s))?o.push(f(t,e,r,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(t,e,r,n,i,!0))}),o}(t,r,n,a,s):s.map(function(e){return f(t,r,n,a,e,A)}),t.seen.pop(),function(t,e,r){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(u,x,E)):E[0]+x+E[1]}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,i,o){var s,a,h;if((h=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=h.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):h.set&&(a=t.stylize("[Setter]","special")),k(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(h.value)<0?(a=m(r)?l(t,h.value,null):l(t,h.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),w(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function g(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function m(t){return null===t}function p(t){return"number"==typeof t}function v(t){return"string"==typeof t}function w(t){return void 0===t}function y(t){return x(t)&&"[object RegExp]"===A(t)}function x(t){return"object"==typeof t&&null!==t}function b(t){return x(t)&&"[object Date]"===A(t)}function M(t){return x(t)&&("[object Error]"===A(t)||t instanceof Error)}function S(t){return"function"==typeof t}function A(t){return Object.prototype.toString.call(t)}function E(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(r){if(w(o)&&(o=t.env.NODE_DEBUG||""),r=r.toUpperCase(),!s[r])if(new RegExp("\\b"+r+"\\b","i").test(o)){var n=t.pid;s[r]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",r,n,t)}}else s[r]=function(){};return s[r]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=g,e.isBoolean=d,e.isNull=m,e.isNullOrUndefined=function(t){return null==t},e.isNumber=p,e.isString=v,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=w,e.isRegExp=y,e.isObject=x,e.isDate=b,e.isError=M,e.isFunction=S,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=r(50);var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,r;console.log("%s - %s",(t=new Date,r=[E(t.getHours()),E(t.getMinutes()),E(t.getSeconds())].join(":"),[t.getDate(),R[t.getMonth()],r].join(" ")),e.format.apply(e,arguments))},e.inherits=r(51),e._extend=function(t,e){if(!e||!x(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var O="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function C(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(O&&t[O]){var e;if("function"!=typeof(e=t[O]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,O,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise(function(t,n){e=t,r=n}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(t,n){t?r(t):e(n)});try{t.apply(this,i)}catch(t){r(t)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),O&&Object.defineProperty(e,O,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,n(t))},e.promisify.custom=O,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};e.apply(this,r).then(function(e){t.nextTick(s,null,e)},function(e){t.nextTick(C,e,s)})}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,n(e)),r}}).call(this,r(49))},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var h,u=[],l=!1,c=-1;function f(){l&&h&&(l=!1,h.length?u=h.concat(u):c=-1,u.length&&g())}function g(){if(!l){var t=a(f);l=!0;for(var e=u.length;e;){for(h=u,u=[];++c<e;)h&&h[c].run();c=-1,e=u.length}h=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new d(t,e)),1!==u.length||l||a(g)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){"use strict";const n=r(2),i=r(22),o=r(15);function s(t,e,r){for(var n=1e101,i=0;i<t.length;i++)for(var o=i;o<e.length;o++){var s=r(t[i],e[o]);n=Math.min(s,n)}return n}function a(t,e,r){for(var n=-1,i=0;i<t.length;i++)for(var o=i;o<e.length;o++){var s=r(t[i],e[o]);n=Math.max(s,n)}return n}function h(t,e,r){for(var n=0,i=0;i<t.length;i++)for(var o=0;o<e.length;o++)n+=r(t[i],e[o]);return n/(t.length*e.length)}function u(t,e,r){for(var n=0,i=0,o=0,s=0,a=0;a<t.length;a++)n+=t[a][0],i+=t[a][1];for(var h=0;h<e.length;h++)o+=e[h][0],s+=e[h][1];return r([n/=t.length,i/=t.length],[o/=e.length,s/=e.length])}function l(t,e,r){for(var n=0,i=0,o=0,s=0,a=0;a<t.length;a++)n+=t[a][0],i+=t[a][1];for(var h=0;h<e.length;h++)o+=e[h][0],s+=e[h][1];return r([n/=t.length,i/=t.length],[o/=e.length,s/=e.length])*t.length*e.length/(t.length+e.length)}function c(t,e,r){for(var n={d:0,p:0},i=new Array(t[0].length),o=0;o<t[0].length;o++)i[o]=e[t[0][o]];for(var s,a,h=new Array(t[1].length),u=0;u<t[1].length;u++)h[u]=e[t[1][u]];for(var l=0;l<i.length;l++){s=0;for(var c=0;c<i.length;c++)l!==c&&(s+=r(i[l],i[c]));s/=i.length-1,a=0;for(var f=0;f<h.length;f++)a+=r(i[l],h[f]);s-(a/=h.length)>n.d&&(n.d=s-a,n.p=l)}return n}var f={dist:n,kind:"single"};function g(t,e,r){for(var n=0,i=0,o=0;o<t.length;o++)for(var s=o;s<t.length;s++)n+=r(e[t[o].index],e[t[s].index]),i++;return n/i}t.exports=function(t,e){if("string"==typeof(e=Object.assign({},f,e)).kind)switch(e.kind){case"single":e.kind=s;break;case"complete":e.kind=a;break;case"average":e.kind=h;break;case"centroid":e.kind=u;break;case"ward":e.kind=l;break;default:throw new RangeError("Unknown kind of similarity")}else if("function"!=typeof e.kind)throw new TypeError("Undefined kind of similarity");var r,n,d,m,p,v=new o;v.children=new Array(t.length),v.index=new Array(t.length);for(var w=0;w<t.length;w++)v.children[w]=new i(w),v.index[w]=new i(w);v.distance=g(v.index,t,e.dist);for(var y=[v];y.length>0;){n=0,d=0;for(var x=0;x<y.length;x++){r=0;for(var b=0;b<y[x].length;b++)for(var M=b+1;M<y[x].length;M++)r=Math.max(e.dist(t[y[x].index[b].index],t[y[x].index[M].index]),r);r>n&&(n=r,d=x)}if(n=0,2===y[d].index.length)y[d].children=[y[d].index[0],y[d].index[1]],y[d].distance=e.dist(t[y[d].index[0].index],t[y[d].index[1].index]);else if(3===y[d].index.length){y[d].children=[y[d].index[0],y[d].index[1],y[d].index[2]];var S=[e.dist(t[y[d].index[0].index],t[y[d].index[1].index]),e.dist(t[y[d].index[1].index],t[y[d].index[2].index])];y[d].distance=(S[0]+S[1])/2}else{for(var A=new o,E=new o,R=[new Array(y[d].index.length),[]],k=0;k<R[0].length;k++)R[0][k]=k;for(var O=0;O<R[0].length;O++){m=0;for(var C=0;C<R[0].length;C++)O!==C&&(m+=e.dist(t[y[d].index[R[0][C]].index],t[y[d].index[R[0][O]].index]));(m/=R[0].length-1)>n&&(n=m,p=O)}for(R[1]=[p],R[0].splice(p,1),m=c(R,t,e.dist);m.d>0;)R[1].push(R[0][m.p]),R[0].splice(m.p,1),m=c(R,t,e.dist);var T=new Array(R[0].length);A.index=new Array(R[0].length);for(var P=0;P<T.length;P++)T[P]=t[y[d].index[R[0][P]].index],A.index[P]=y[d].index[R[0][P]],A.children[P]=y[d].index[R[0][P]];var N=new Array(R[1].length);E.index=new Array(R[1].length);for(var _=0;_<N.length;_++)N[_]=t[y[d].index[R[1][_]].index],E.index[_]=y[d].index[R[1][_]],E.children[_]=y[d].index[R[1][_]];A.distance=g(A.index,t,e.dist),E.distance=g(E.index,t,e.dist),y.push(A),y.push(E),y[d].children=[A,E]}y.splice(d,1)}return v}},function(t,e,r){"use strict";const n=r(10),i=r(3).array;var o={C:1,tol:1e-4,maxPasses:10,maxIterations:1e4,kernel:"linear",alphaTol:1e-6,random:Math.random,whitening:!0};function s(t){this.options=Object.assign({},o,t),this.kernel=new n(this.options.kernel,this.options.kernelOptions),this.b=0}s.prototype.train=function(t,e){if(t.length!==e.length)throw new Error("Features and labels should have the same length");if(t.length<2)throw new Error("Cannot train with less than 2 observations");if(this._trained=!1,this._loaded=!1,this.N=e.length,this.D=t[0].length,this.options.whitening){this.X=new Array(this.N);for(var r=0;r<this.N;r++)this.X[r]=new Array(this.D);this.minMax=new Array(this.D);for(var n=0;n<this.D;n++){var o=new Array(this.N);for(r=0;r<this.N;r++)o[r]=t[r][n];for(this.minMax[n]=i.minMax(o),r=0;r<this.N;r++)this.X[r][n]=(t[r][n]-this.minMax[n].min)/(this.minMax[n].max-this.minMax[n].min)}}else this.X=t;this.Y=e,this.b=0,this.W=void 0;var s=this.kernel.compute(this.X),a=e.length,h=new Array(a).fill(0);this.alphas=h;for(var u=0;u<a;u++)h[u]=0;for(var l=0,c=0,f=0,g=0,d=0,m=0,p=0,v=0,w=0,y=0,x=0;g<this.options.maxPasses&&f<this.options.maxIterations;){var b=0;for(r=0;r<a;r++)if(d=this._marginOnePrecomputed(r,s)-e[r],e[r]*d<-this.options.tol&&h[r]<this.options.C||e[r]*d>this.options.tol&&h[r]>0){for(n=r;n===r;)n=Math.floor(this.options.random()*a);if(m=this._marginOnePrecomputed(n,s)-e[n],p=h[r],v=h[n],e[r]===e[n]?(w=Math.max(0,p+v-this.options.C),y=Math.min(this.options.C,p+v)):(w=Math.max(0,v-p),y=Math.min(this.options.C,this.options.C+v+p)),Math.abs(w-y)<1e-4)continue;if((x=2*s[r][n]-s[r][r]-s[n][n])>=0)continue;var M=h[n]-e[n]*(d-m)/x;if(M>y?M=y:M<w&&(M=w),Math.abs(v-M)<.001)continue;h[n]=M,h[r]=h[r]+e[r]*e[n]*(v-M),l=this.b-d-e[r]*(h[r]-p)*s[r][r]-e[n]*(h[n]-v)*s[r][n],c=this.b-m-e[r]*(h[r]-p)*s[r][n]-e[n]*(h[n]-v)*s[n][n],this.b=(l+c)/2,h[r]<this.options.C&&h[r]>0&&(this.b=l),h[n]<this.options.C&&h[n]>0&&(this.b=c),b+=1}f++,0===b?g+=1:g=0}if(f===this.options.maxIterations)throw new Error("max iterations reached");if(this.iterations=f,"linear"===this.options.kernel){this.W=new Array(this.D);for(var S=0;S<this.D;S++){this.W[S]=0;for(var A=0;A<a;A++)this.W[S]+=e[A]*h[A]*this.X[A][S]}}var E=[],R=[],k=[];for(this._supportVectorIdx=[],r=0;r<this.N;r++)this.alphas[r]>this.options.alphaTol&&(E.push(this.X[r]),R.push(e[r]),k.push(this.alphas[r]),this._supportVectorIdx.push(r));this.X=E,this.Y=R,this.N=E.length,this.alphas=k,this._trained=!0},s.prototype.predictOne=function(t){return this.marginOne(t)>0?1:-1},s.prototype.predict=function(t){if(!this._trained&&!this._loaded)throw new Error("Cannot predict, you need to train the SVM first");return Array.isArray(t)&&Array.isArray(t[0])?t.map(this.predictOne.bind(this)):this.predictOne(t)},s.prototype.marginOne=function(t,e){this.options.whitening&&!e&&(t=this._applyWhitening(t));var r,n=this.b;if("linear"===this.options.kernel&&this.W)for(r=0;r<this.W.length;r++)n+=this.W[r]*t[r];else for(r=0;r<this.N;r++)n+=this.alphas[r]*this.Y[r]*this.kernel.compute([t],[this.X[r]])[0][0];return n},s.prototype._marginOnePrecomputed=function(t,e){var r,n=this.b;for(r=0;r<this.N;r++)n+=this.alphas[r]*this.Y[r]*e[t][r];return n},s.prototype.margin=function(t){return Array.isArray(t)?t.map(this.marginOne.bind(this)):this.marginOne(t)},s.prototype.supportVectors=function(){if(!this._trained&&!this._loaded)throw new Error("Cannot get support vectors, you need to train the SVM first");if(this._loaded&&"linear"===this.options.kernel)throw new Error("Cannot get support vectors from saved linear model, you need to train the SVM to have them");return this._supportVectorIdx},s.load=function(t){this._loaded=!0,this._trained=!1;var e=new s(t.options);return"linear"===t.options.kernel?(e.W=t.W.slice(),e.D=e.W.length):(e.X=t.X.slice(),e.Y=t.Y.slice(),e.alphas=t.alphas.slice(),e.N=e.X.length,e.D=e.X[0].length),e.minMax=t.minMax,e.b=t.b,e._loaded=!0,e._trained=!1,e},s.prototype.toJSON=function(){if(!this._trained&&!this._loaded)throw new Error("Cannot export, you need to train the SVM first");var t={};return t.options=Object.assign({},this.options),t.b=this.b,t.minMax=this.minMax,"linear"===t.options.kernel?t.W=this.W.slice():(t.X=this.X.slice(),t.Y=this.Y.slice(),t.alphas=this.alphas.slice()),t},s.prototype._applyWhitening=function(t){if(!this.minMax)throw new Error("Could not apply whitening");for(var e=new Array(t.length),r=0;r<t.length;r++)e[r]=(t[r]-this.minMax[r].min)/(this.minMax[r].max-this.minMax[r].min);return e},t.exports=s},function(t,e,r){"use strict";const n=r(2).squared,i={sigma:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.sigma=t.sigma,this.divisor=2*t.sigma*t.sigma}compute(t,e){const r=n(t,e);return Math.exp(-r/this.divisor)}}},function(t,e,r){"use strict";const n={degree:1,constant:1,scale:1};t.exports=class{constructor(t){t=Object.assign({},n,t),this.degree=t.degree,this.constant=t.constant,this.scale=t.scale}compute(t,e){for(var r=0,n=0;n<t.length;n++)r+=t[n]*e[n];return Math.pow(this.scale*r+this.constant,this.degree)}}},function(t,e,r){"use strict";const n={sigma:1,degree:1};t.exports=class{constructor(t){t=Object.assign({},n,t),this.sigma=t.sigma,this.degree=t.degree}compute(t,e){for(var r=0,n=Math.min(t.length,e.length),i=1;i<=n;++i)r+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(t[i-1],i)-Math.pow(e[i-1],i),2)),this.degree);return r}}},function(t,e,r){"use strict";const n=r(2).squared,i={sigma:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.sigma=t.sigma}compute(t,e){return 1/(1+n(t,e)/(this.sigma*this.sigma))}}},function(t,e,r){"use strict";const n=r(2),i={sigma:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.sigma=t.sigma,this.divisor=2*t.sigma*t.sigma}compute(t,e){const r=n(t,e);return Math.exp(-r/this.divisor)}}},function(t,e,r){"use strict";t.exports=class{compute(t,e){for(var r=Math.min(t.length,e.length),n=0,i=0;i<r;++i)n+=Math.min(t[i],e[i]);return n}}},function(t,e,r){"use strict";const n=r(2),i={sigma:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.sigma=t.sigma}compute(t,e){const r=n(t,e);return Math.exp(-r/this.sigma)}}},function(t,e,r){"use strict";const n=r(2).squared,i={constant:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.constant=t.constant}compute(t,e){return Math.sqrt(n(t,e)+this.constant*this.constant)}}},function(t,e,r){"use strict";const n=r(2).squared,i={constant:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.constant=t.constant}compute(t,e){const r=n(t,e);return 1-r/(r+this.constant)}}},function(t,e,r){"use strict";const n={alpha:.01,constant:-Math.E};t.exports=class{constructor(t){t=Object.assign({},n,t),this.alpha=t.alpha,this.constant=t.constant}compute(t,e){for(var r=0,n=0;n<t.length;n++)r+=t[n]*e[n];return Math.tanh(this.alpha*r+this.constant)}}},function(t,e,r){"use strict";const n=r(24),i={},o=r(65);function s(t,e){if(t.length!==e.length)throw new Error("features and labels should have the same length")}function a(t,e){return new Array(t).fill(0).map(()=>new Array(e).fill(0))}function h(t){var e=new Set;for(let r=0;r<t.length;r++)e.add(t[r]);return Array.from(e)}function u(t,e,r,n,i,o,s,a){const h=f(e,r,i,o),u=h.testFeatures,l=h.trainFeatures,g=h.testLabels,d=h.trainLabels;var m;t.prototype.train?(m=new t(n)).train(l,d):m=new t(l,d,n),c(s,g,m.predict(u),a)}function l(t,e,r,n,i,o,s){const a=f(t,e,r,n),h=a.testFeatures,u=a.trainFeatures;c(i,a.testLabels,s(u,a.trainLabels,h),o)}function c(t,e,r,n){for(var i=0;i<r.length;i++){const o=n.indexOf(e[i]),s=n.indexOf(r[i]);(o<0||s<0)&&console.warn("ignore unknown predicted label ".concat(r[i])),t[o][s]++}}function f(t,e,r,n){return{testFeatures:r.map(function(e){return t[e]}),trainFeatures:n.map(function(e){return t[e]}),testLabels:r.map(function(t){return e[t]}),trainLabels:n.map(function(t){return e[t]})}}i.leaveOneOut=function(t,e,r,n){if("function"==typeof r){var o=r;return r=e,e=t,i.leavePOut(e,r,1,o)}return i.leavePOut(t,e,r,n,1)},i.leavePOut=function(t,e,r,i,c){if("function"==typeof i){var f=i;c=r,r=e,e=t}s(e,r);const g=h(r),d=a(g.length,g.length);var m=e.length,p=o(c,m),v=new Array(m);for(let t=0;t<m;t++)v[t]=t;for(const n of p){var w=v.slice();for(let t=n.length-1;t>=0;t--)w.splice(n[t],1);f?l(e,r,n,w,d,g,f):u(t,e,r,i,n,w,d,g)}return new n(d,g)},i.kFold=function(t,e,r,i,o){if("function"==typeof i){var c=i;o=r,r=e,e=t}s(e,r);const f=h(r),g=a(f.length,f.length);for(var d=e.length,m=new Array(d),p=0;p<d;p++)m[p]=p;for(var v=Math.floor(d/o),w=[],y=[];m.length;){var x=Math.floor(Math.random()*m.length);w.push(m[x]),m.splice(x,1),w.length===v&&(y.push(w),w=[])}for(w.length&&y.push(w),y=y.slice(0,o),p=0;p<y.length;p++){for(var b=y[p],M=[],S=0;S<y.length;S++)S!==p&&(M=M.concat(y[S]));c?l(e,r,b,M,g,f,c):u(t,e,r,i,b,M,g,f)}return new n(g,f)},t.exports=i},function(t,e,r){!function(){"use strict";var e=function(t,e){return t(e={exports:{}},e.exports),e.exports}(function(t){!function(e){var r,n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag",u=e.regeneratorRuntime;if(u)t.exports=u;else{(u=e.regeneratorRuntime=t.exports).wrap=y;var l="suspendedStart",c="suspendedYield",f="executing",g="completed",d={},m={};m[s]=function(){return this};var p=Object.getPrototypeOf,v=p&&p(p(T([])));v&&v!==n&&i.call(v,s)&&(m=v);var w=S.prototype=b.prototype=Object.create(m);M.prototype=w.constructor=S,S.constructor=M,S[h]=M.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===M||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,h in t||(t[h]="GeneratorFunction")),t.prototype=Object.create(w),t},u.awrap=function(t){return{__await:t}},A(E.prototype),E.prototype[a]=function(){return this},u.AsyncIterator=E,u.async=function(t,e,r,n){var i=new E(y(t,e,r,n));return u.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},A(w),w[h]="Generator",w[s]=function(){return this},w.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},u.values=T,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return a.type="throw",a.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),d}}}function y(t,e,r,n){var i=e&&e.prototype instanceof b?e:b,o=Object.create(i.prototype),s=new C(n||[]);return o._invoke=function(t,e,r){var n=l;return function(i,o){if(n===f)throw new Error("Generator is already running");if(n===g){if("throw"===i)throw o;return P()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=R(s,r);if(a){if(a===d)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var h=x(t,e,r);if("normal"===h.type){if(n=r.done?g:c,h.arg===d)continue;return{value:h.arg,done:r.done}}"throw"===h.type&&(n=g,r.method="throw",r.arg=h.arg)}}}(t,r,s),o}function x(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function b(){}function M(){}function S(){}function A(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function E(t){var e;this._invoke=function(r,n){function o(){return new Promise(function(e,o){!function e(r,n,o,s){var a=x(t[r],t,n);if("throw"!==a.type){var h=a.arg,u=h.value;return u&&"object"==typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,o,s)},function(t){e("throw",t,o,s)}):Promise.resolve(u).then(function(t){h.value=t,o(h)},s)}s(a.arg)}(r,n,e,o)})}return e=e?e.then(o,o):o()}}function R(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,R(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=x(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function T(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())}),r=function(){return this}()||Function("return this")(),n=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=n&&r.regeneratorRuntime;r.regeneratorRuntime=void 0;var o=e;if(n)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}var s=o,a={mode:"index"};t.exports=s.mark(function t(e,r,n){var i,o,h,u,l,c,f,g,d;return s.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(d=function(){var t,e,r;for(e=1;u[e]<=0;)e++;if(0===u[e-1]){for(t=e-1;1!==t;t--)u[t]=-1;u[e]=0,l=f=0,u[1]=1,c=e-1}else{e>1&&(u[e-1]=0);do{e++}while(u[e]>0);for(r=e-1,t=e;0===u[t];)u[t++]=-1;if(-1===u[t])u[t]=u[r],f=u[r]-1,l=t-1,c=r-1,u[r]=-1;else{if(t===u[0])return 0;u[e]=u[t],f=u[t]-1,u[t]=0,l=e-1,c=t-1}}return 1},n=Object.assign({},a,n),i=new Array(r),o=new Array(e),h=new Array(r),u=new Array(r+2),g=0;g<r;g++)i[g]=g,h[g]=g<r-e?0:1;for(g=0;g<e;g++)o[g]=r-e+g;for(g=0;g<u.length;g++)u[g]=0===g?r+1:g<=r-e?0:g<=r?g-r+e:-2;if("index"!==n.mode){t.next=20;break}return t.next=12,o.slice();case 12:if(!d()){t.next=18;break}return o[f]=i[l],t.next=16,o.slice();case 16:t.next=12;break;case 18:t.next=33;break;case 20:if("mask"!==n.mode){t.next=32;break}return t.next=23,h.slice();case 23:if(!d()){t.next=30;break}return h[l]=1,h[c]=0,t.next=28,h.slice();case 28:t.next=23;break;case 30:t.next=33;break;case 32:throw new Error("Invalid mode");case 33:case"end":return t.stop()}},t,this)})}()},function(t,e,r){"use strict";const n=r(0).Matrix,i=r(25),o=r(67),s=r(26),a=r(27);class h{constructor(t){if((t=t||{}).model){this.hiddenLayers=t.hiddenLayers,this.iterations=t.iterations,this.learningRate=t.learningRate,this.regularization=t.regularization,this.dicts=t.dicts,this.activation=t.activation,this.activationParam=t.activationParam,this.model=new Array(t.layers.length);for(var e=0;e<this.model.length-1;++e)this.model[e]=i.load(t.layers[e]);this.model[this.model.length-1]=o.load(t.layers[this.model.length-1])}else this.hiddenLayers=t.hiddenLayers||[10],this.iterations=t.iterations||50,this.learningRate=t.learningRate||.01,this.regularization=t.regularization||.01,this.activation=t.activation||"tanh",this.activationParam=t.activationParam||1,this.activation in Object.keys(a)||(this.activation="tanh")}buildNetwork(t,e){var r=this.hiddenLayers.length-1+2;this.model=new Array(r),this.model[0]=new i({inputSize:t,outputSize:this.hiddenLayers[0],activation:this.activation,activationParam:this.activationParam,regularization:this.regularization,epsilon:this.learningRate});for(var n=1;n<this.hiddenLayers.length;++n)this.model[n]=new i({inputSize:this.hiddenLayers[n-1],outputSize:this.hiddenLayers[n],activation:this.activation,activationParam:this.activationParam,regularization:this.regularization,epsilon:this.learningRate});this.model[r-1]=new o({inputSize:this.hiddenLayers[this.hiddenLayers.length-1],outputSize:e,activation:this.activation,activationParam:this.activationParam,regularization:this.regularization,epsilon:this.learningRate})}train(t,e){t=n.checkMatrix(t),this.dicts=s.dictOutputs(e);var r=t.columns,i=Object.keys(this.dicts.inputs).length;this.buildNetwork(r,i);for(var o=0;o<this.iterations;++o){var a=this.propagate(t);this.backpropagation(t,e,a)}}propagate(t){for(var e=t,r=0;r<this.model.length;++r)e=this.model[r].forward(e);return e.divColumnVector(s.sumRow(e))}backpropagation(t,e,r){for(var n=0;n<r.length;++n)r[n][this.dicts.inputs[e[n]]]-=1;var i=r;for(n=this.model.length-1;n>=0;--n){var o=n>0?this.model[n-1].a:t;i=this.model[n].backpropagation(i,o)}for(n=0;n<this.model.length;++n)this.model[n].update()}predict(t){t=n.checkMatrix(t);for(var e=new Array(t.rows),r=this.propagate(t),i=0;i<t.rows;++i)e[i]=this.dicts.outputs[r.maxRowIndex(i)[1]];return e}toJSON(){for(var t={model:"FNN",hiddenLayers:this.hiddenLayers,iterations:this.iterations,learningRate:this.learningRate,regularization:this.regularization,activation:this.activation,activationParam:this.activationParam,dicts:this.dicts,layers:new Array(this.model.length)},e=0;e<this.model.length;++e)t.layers[e]=this.model[e].toJSON();return t}static load(t){if("FNN"!==t.model)throw new RangeError("the current model is not a feed forward network");return new h(t)}}t.exports=h},function(t,e,r){"use strict";var n=r(25);class i extends n{constructor(t){super(t),this.activationFunction=function(t,e){this[t][e]=Math.exp(this[t][e])}}static load(t){if("Layer"!==t.model)throw new RangeError("the current model is not a Layer model");return new i(t)}}t.exports=i},function(module,exports,__webpack_require__){"use strict";var NodeSquare=__webpack_require__(28),NodeHexagonal=__webpack_require__(69),defaultOptions={fields:3,randomizer:Math.random,distance:squareEuclidean,iterations:10,learningRate:.1,gridType:"rect",torus:!0,method:"random"};function SOM(t,e,r,n){for(var i in this.x=t,this.y=e,r=r||{},this.options={},defaultOptions)r.hasOwnProperty(i)?this.options[i]=r[i]:this.options[i]=defaultOptions[i];if("number"==typeof this.options.fields)this.numWeights=this.options.fields;else{if(!Array.isArray(this.options.fields))throw new Error("Invalid fields definition");this.numWeights=this.options.fields.length;var o=getConverters(this.options.fields);this.extractor=o.extractor,this.creator=o.creator}if("rect"===this.options.gridType)this.nodeType=NodeSquare,this.gridDim={x:t,y:e};else{this.nodeType=NodeHexagonal;var s=this.x-Math.floor(this.y/2);this.gridDim={x:s,y:this.y,z:-(0-s-this.y)}}if(this.torus=this.options.torus,this.distanceMethod=this.torus?"getDistanceTorus":"getDistance",this.distance=this.options.distance,this.maxDistance=getMaxDistance(this.distance,this.numWeights),!0!==n){if(!(t>0&&e>0))throw new Error("x and y must be positive");this.times={findBMU:0,adjust:0},this.randomizer=this.options.randomizer,this.iterationCount=0,this.iterations=this.options.iterations,this.startLearningRate=this.learningRate=this.options.learningRate,this.mapRadius=Math.floor(Math.max(t,e)/2),this.algorithmMethod=this.options.method,this._initNodes(),this.done=!1}else this.done=!0}function getConverters(t){for(var e=t.length,r=new Array(e),n=new Array(e),i=0;i<e;i++)r[i]=getNormalizer(t[i].range),n[i]=getDenormalizer(t[i].range);return{extractor:function(n){for(var i=new Array(e),o=0;o<e;o++)i[o]=r[o](n[t[o].name]);return i},creator:function(r){for(var i={},o=0;o<e;o++)i[t[o].name]=n[o](r[o]);return i}}}function getNormalizer(t){return function(e){return(e-t[0])/(t[1]-t[0])}}function getDenormalizer(t){return function(e){return t[0]+e*(t[1]-t[0])}}function squareEuclidean(t,e){for(var r=0,n=0,i=t.length;n<i;n++)r+=(t[n]-e[n])*(t[n]-e[n]);return r}function getRandomValue(t,e){return t[Math.floor(e()*t.length)]}function getMaxDistance(t,e){for(var r=new Array(e),n=new Array(e),i=0;i<e;i++)r[i]=0,n[i]=1;return t(r,n)}SOM.load=function loadModel(model,distance){if("SOM"===model.name){var x=model.data.length,y=model.data[0].length;distance?model.options.distance=distance:model.options.distance&&(model.options.distance=eval("("+model.options.distance+")"));var som=new SOM(x,y,model.options,!0);som.nodes=new Array(x);for(var i=0;i<x;i++){som.nodes[i]=new Array(y);for(var j=0;j<y;j++)som.nodes[i][j]=new som.nodeType(i,j,model.data[i][j],som)}return som}throw new Error("expecting a SOM model")},SOM.prototype.export=function(t){if(!this.done)throw new Error("model is not ready yet");var e={name:"SOM"};e.options={fields:this.options.fields,gridType:this.options.gridType,torus:this.options.torus},e.data=new Array(this.x);for(var r=0;r<this.x;r++){e.data[r]=new Array(this.y);for(var n=0;n<this.y;n++)e.data[r][n]=this.nodes[r][n].weights}return t&&(e.options.distance=this.distance.toString()),e},SOM.prototype._initNodes=function(){var t,e,r,n=Date.now();for(this.nodes=new Array(this.x),t=0;t<this.x;t++)for(this.nodes[t]=new Array(this.y),e=0;e<this.y;e++){var i=new Array(this.numWeights);for(r=0;r<this.numWeights;r++)i[r]=this.randomizer();this.nodes[t][e]=new this.nodeType(t,e,i,this)}this.times.initNodes=Date.now()-n},SOM.prototype.setTraining=function(t){if(this.trainingSet)throw new Error("training set has already been set");var e,r=Date.now(),n=t,i=t.length;if(this.extractor)for(n=new Array(i),e=0;e<i;e++)n[e]=this.extractor(t[e]);this.numIterations=this.iterations*i,"random"===this.algorithmMethod?this.timeConstant=this.numIterations/Math.log(this.mapRadius):this.timeConstant=i/Math.log(this.mapRadius),this.trainingSet=n,this.times.setTraining=Date.now()-r},SOM.prototype.trainOne=function(){return!this.done&&(this.numIterations-- >0?("random"===this.algorithmMethod?(t=this.mapRadius*Math.exp(-this.iterationCount/this.timeConstant),e=getRandomValue(this.trainingSet,this.randomizer),this._adjust(e,t),this.learningRate=this.startLearningRate*Math.exp(-this.iterationCount/this.numIterations)):(r=-Math.floor(this.iterationCount/this.trainingSet.length),t=this.mapRadius*Math.exp(r/this.timeConstant),e=this.trainingSet[this.iterationCount%this.trainingSet.length],this._adjust(e,t),(this.iterationCount+1)%this.trainingSet.length==0&&(this.learningRate=this.startLearningRate*Math.exp(r/Math.floor(this.numIterations/this.trainingSet.length)))),this.iterationCount++,!0):(this.done=!0,!1));var t,e,r},SOM.prototype._adjust=function(t,e){var r,n,i,o,s=Date.now(),a=this._findBestMatchingUnit(t),h=Date.now();this.times.findBMU+=h-s;var u=Math.floor(e),l=a.x-u,c=a.x+u,f=a.y-u,g=a.y+u;for(r=l;r<=c;r++){var d=r;for(r<0?d+=this.x:r>=this.x&&(d-=this.x),n=f;n<=g;n++){var m=n;n<0?m+=this.y:n>=this.y&&(m-=this.y),(i=a[this.distanceMethod](this.nodes[d][m]))<e&&(o=Math.exp(-i/(2*e)),this.nodes[d][m].adjustWeights(t,this.learningRate,o))}}this.times.adjust+=Date.now()-h},SOM.prototype.train=function(t){if(!this.done)for(this.setTraining(t);this.trainOne(););},SOM.prototype.getConvertedNodes=function(){for(var t=new Array(this.x),e=0;e<this.x;e++){t[e]=new Array(this.y);for(var r=0;r<this.y;r++){var n=this.nodes[e][r];t[e][r]=this.creator?this.creator(n.weights):n.weights}}return t},SOM.prototype._findBestMatchingUnit=function(t){for(var e,r,n=1/0,i=0;i<this.x;i++)for(var o=0;o<this.y;o++)(r=this.distance(this.nodes[i][o].weights,t))<n&&(n=r,e=this.nodes[i][o]);return e},SOM.prototype.predict=function(t,e){if("boolean"==typeof t&&(e=t,t=null),t||(t=this.trainingSet),Array.isArray(t)&&(Array.isArray(t[0])||"object"==typeof t[0])){var r=this;return t.map(function(t){return r._predict(t,e)})}return this._predict(t,e)},SOM.prototype._predict=function(t,e){Array.isArray(t)||(t=this.extractor(t));var r=this._findBestMatchingUnit(t),n=[r.x,r.y];return e&&(n[2]=r.getPosition(t)),n},SOM.prototype.getQuantizationError=function(){for(var t=this.getFit(),e=t.length,r=0,n=0;n<e;n++)r+=t[n];return r/e},SOM.prototype.getFit=function(t){t||(t=this.trainingSet);for(var e,r=t.length,n=new Array(r),i=0;i<r;i++)e=this._findBestMatchingUnit(t[i]),n[i]=Math.sqrt(this.distance(t[i],e.weights));return n},module.exports=SOM},function(t,e,r){var n=r(28);function i(t,e,r,i){n.call(this,t,e,r,i),this.hX=t-Math.floor(e/2),this.z=0-this.hX-e}i.prototype=new n,i.prototype.constructor=i,i.prototype.getDistance=function(t){return Math.max(Math.abs(this.hX-t.hX),Math.abs(this.y-t.y),Math.abs(this.z-t.z))},i.prototype.getDistanceTorus=function(t){var e=Math.abs(this.hX-t.hX),r=Math.abs(this.y-t.y),n=Math.abs(this.z-t.z);return Math.max(Math.min(e,this.som.gridDim.x-e),Math.min(r,this.som.gridDim.y-r),Math.min(n,this.som.gridDim.z-n))},i.prototype.getPosition=function(){throw new Error("Unimplemented : cannot get position of the points for hexagonal grid")},t.exports=i},function(t,e,r){"use strict";var n=r(0);function i(t,e,r){var n=0;const i=r(e);for(var o=0;o<t.x.length;o++)n+=Math.abs(t.y[o]-i(t.x[o]));return n}function o(t,e,r,i,o){var s=n.Matrix.eye(e.length).mul(r*i*i),a=t.x.length,h=new Array(a);const u=o(e);for(var l=0;l<a;l++)h[l]=u(t.x[l]);var c=function(t,e,r,i,o){const s=r.length,a=t.x.length;for(var h=new Array(s),u=0;u<s;u++){h[u]=new Array(a);var l=r.concat();l[u]+=i;for(var c=o(l),f=0;f<a;f++)h[u][f]=e[f]-c(t.x[f])}return new n.Matrix(h)}(t,h,e,i,o),f=function(t,e){const r=t.x.length;for(var i=new Array(r),o=0;o<r;o++)i[o]=t.y[o]-e[o];return new n.Matrix([i])}(t,h).transposeView(),g=n.inverse(s.add(c.mmul(c.transposeView())));return(e=(e=new n.Matrix([e])).sub(g.mmul(c).mmul(f).mul(i).transposeView())).to1DArray()}t.exports=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.maxIterations,s=void 0===n?100:n,a=r.gradientDifference,h=void 0===a?.1:a,u=r.damping,l=void 0===u?0:u,c=r.errorTolerance,f=void 0===c?.01:c,g=r.initialValues;if(l<=0)throw new Error("The damping option must be a positive number");if(!t.x||!t.y)throw new Error("The data parameter must have x and y elements");if(!Array.isArray(t.x)||t.x.length<2||!Array.isArray(t.y)||t.y.length<2)throw new Error("The data parameter elements must be an array with more than 2 points");if(t.x.length!==t.y.length)throw new Error("The data parameter elements must have the same size");var d=g||new Array(e.length).fill(1);if(!Array.isArray(d))throw new Error("initialValues must be an array");for(var m=i(t,d,e),p=m<=f,v=0;v<s&&!p;v++)p=(m=i(t,d=o(t,d,l,h,e),e))<=f;return{parameterValues:d,parameterError:m,iterations:v}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SparseMatrix",function(){return SparseMatrix});var ml_hash_table__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),ml_hash_table__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(ml_hash_table__WEBPACK_IMPORTED_MODULE_0__);class SparseMatrix{constructor(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t instanceof SparseMatrix){const e=t;this._init(e.rows,e.columns,e.elements.clone(),e.threshold)}else if(Array.isArray(t)){const s=t;t=s.length,r=e||{},e=s[0].length,this._init(t,e,new ml_hash_table__WEBPACK_IMPORTED_MODULE_0___default.a(r),r.threshold);for(var n=0;n<t;n++)for(var i=0;i<e;i++){var o=s[n][i];this.threshold&&Math.abs(o)<this.threshold&&(o=0),0!==o&&this.elements.set(n*e+i,s[n][i])}}else this._init(t,e,new ml_hash_table__WEBPACK_IMPORTED_MODULE_0___default.a(r),r.threshold)}_init(t,e,r,n){this.rows=t,this.columns=e,this.elements=r,this.threshold=n||0}static eye(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;const r=Math.min(t,e),n=new SparseMatrix(t,e,{initialCapacity:r});for(var i=0;i<r;i++)n.set(i,i,1);return n}clone(){return new SparseMatrix(this)}to2DArray(){const t=new Array(this.rows);for(var e=0;e<this.rows;e++){t[e]=new Array(this.columns);for(var r=0;r<this.columns;r++)t[e][r]=this.get(e,r)}return t}isSquare(){return this.rows===this.columns}isSymmetric(){if(!this.isSquare())return!1;var t=!0;return this.forEachNonZero((e,r,n)=>this.get(r,e)!==n?(t=!1,!1):n),t}bandWidth(){let t=this.columns,e=-1;return this.forEachNonZero((r,n,i)=>{let o=r-n;return t=Math.min(t,o),e=Math.max(e,o),i}),e-t}isBanded(t){return this.bandWidth()<=t}get cardinality(){return this.elements.size}get size(){return this.rows*this.columns}get(t,e){return this.elements.get(t*this.columns+e)}set(t,e,r){return this.threshold&&Math.abs(r)<this.threshold&&(r=0),0===r?this.elements.remove(t*this.columns+e):this.elements.set(t*this.columns+e,r),this}mmul(t){this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");const e=this.rows,r=t.columns,n=new SparseMatrix(e,r);return this.forEachNonZero((e,r,i)=>(t.forEachNonZero((t,o,s)=>(r===t&&n.set(e,o,n.get(e,o)+i*s),s)),i)),n}kroneckerProduct(t){const e=this.rows,r=this.columns,n=t.rows,i=t.columns,o=new SparseMatrix(e*n,r*i,{initialCapacity:this.cardinality*t.cardinality});return this.forEachNonZero((e,r,s)=>(t.forEachNonZero((t,a,h)=>(o.set(n*e+t,i*r+a,s*h),h)),s)),o}forEachNonZero(t){return this.elements.forEachPair((e,r)=>{const n=e/this.columns|0,i=e%this.columns;let o=t(n,i,r);return!1!==o&&(this.threshold&&Math.abs(o)<this.threshold&&(o=0),o!==r&&(0===o?this.elements.remove(e,!0):this.elements.set(e,o)),!0)}),this.elements.maybeShrinkCapacity(),this}getNonZeros(){const t=this.cardinality,e=new Array(t),r=new Array(t),n=new Array(t);var i=0;return this.forEachNonZero((t,o,s)=>(e[i]=t,r[i]=o,n[i]=s,i++,s)),{rows:e,columns:r,values:n}}setThreshold(t){return 0!==t&&t!==this.threshold&&(this.threshold=t,this.forEachNonZero((t,e,r)=>r)),this}transpose(){let t=new SparseMatrix(this.columns,this.rows,{initialCapacity:this.cardinality});return this.forEachNonZero((e,r,n)=>(t.set(r,e,n),n)),t}}SparseMatrix.prototype.klass="Matrix",SparseMatrix.identity=SparseMatrix.eye,SparseMatrix.prototype.tensorProduct=SparseMatrix.prototype.kroneckerProduct;var inplaceOperator="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",inplaceOperatorScalar="\n(function %name%S(value) {\n    this.forEachNonZero((i, j, v) => v %op% value);\n    return this;\n})\n",inplaceOperatorMatrix="\n(function %name%M(matrix) {\n    matrix.forEachNonZero((i, j, v) => {\n        this.set(i, j, this.get(i, j) %op% v);\n        return v;\n    });\n    return this;\n})\n",staticOperator="\n(function %name%(matrix, value) {\n    var newMatrix = new SparseMatrix(matrix);\n    return newMatrix.%name%(value);\n})\n",inplaceMethod="\n(function %name%() {\n    this.forEachNonZero((i, j, v) => %method%(v));\n    return this;\n})\n",staticMethod="\n(function %name%(matrix) {\n    var newMatrix = new SparseMatrix(matrix);\n    return newMatrix.%name%();\n})\n";const operators=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]];for(const operator of operators)for(let i=1;i<operator.length;i++)SparseMatrix.prototype[operator[i]]=eval(fillTemplateFunction(inplaceOperator,{name:operator[i],op:operator[0]})),SparseMatrix.prototype[operator[i]+"S"]=eval(fillTemplateFunction(inplaceOperatorScalar,{name:operator[i]+"S",op:operator[0]})),SparseMatrix.prototype[operator[i]+"M"]=eval(fillTemplateFunction(inplaceOperatorMatrix,{name:operator[i]+"M",op:operator[0]})),SparseMatrix[operator[i]]=eval(fillTemplateFunction(staticOperator,{name:operator[i]}));var methods=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(t){methods.push(["Math."+t,t])});for(const method of methods)for(let i=1;i<method.length;i++)SparseMatrix.prototype[method[i]]=eval(fillTemplateFunction(inplaceMethod,{name:method[i],method:method[0]})),SparseMatrix[method[i]]=eval(fillTemplateFunction(staticMethod,{name:method[i]}));function fillTemplateFunction(t,e){for(const r in e)t=t.replace(new RegExp("%"+r+"%","g"),e[r]);return t}},function(t,e){t.exports=function(t,e){t=t||0;for(var r=new Array(t),n=0;n<t;n++)r[n]=e;return r}},function(t,e,r){const n=r(6),i=r(7).asc,o=[2147483647,5,11,23,47,97,197,397,797,1597,3203,6421,12853,25717,51437,102877,205759,411527,823117,1646237,3292489,6584983,13169977,26339969,52679969,105359939,210719881,421439783,842879579,1685759167,433,877,1759,3527,7057,14143,28289,56591,113189,226379,452759,905551,1811107,3622219,7244441,14488931,28977863,57955739,115911563,231823147,463646329,927292699,1854585413,953,1907,3821,7643,15287,30577,61169,122347,244703,489407,978821,1957651,3915341,7830701,15661423,31322867,62645741,125291483,250582987,501165979,1002331963,2004663929,1039,2081,4177,8363,16729,33461,66923,133853,267713,535481,1070981,2141977,4283963,8567929,17135863,34271747,68543509,137087021,274174111,548348231,1096696463,31,67,137,277,557,1117,2237,4481,8963,17929,35863,71741,143483,286973,573953,1147921,2295859,4591721,9183457,18366923,36733847,73467739,146935499,293871013,587742049,1175484103,599,1201,2411,4831,9677,19373,38747,77509,155027,310081,620171,1240361,2480729,4961459,9922933,19845871,39691759,79383533,158767069,317534141,635068283,1270136683,311,631,1277,2557,5119,10243,20507,41017,82037,164089,328213,656429,1312867,2625761,5251529,10503061,21006137,42012281,84024581,168049163,336098327,672196673,1344393353,3,7,17,37,79,163,331,673,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,43,89,179,359,719,1439,2879,5779,11579,23159,46327,92657,185323,370661,741337,1482707,2965421,5930887,11861791,23723597,47447201,94894427,189788857,379577741,759155483,1518310967,379,761,1523,3049,6101,12203,24407,48817,97649,195311,390647,781301,1562611,3125257,6250537,12501169,25002389,50004791,100009607,200019221,400038451,800076929,1600153859,13,29,59,127,257,521,1049,2099,4201,8419,16843,33703,67409,134837,269683,539389,1078787,2157587,4315183,8630387,17260781,34521589,69043189,138086407,276172823,552345671,1104691373,19,41,83,167,337,677,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,53,107,223,449,907,1823,3659,7321,14653,29311,58631,117269,234539,469099,938207,1876417,3752839,7505681,15011389,30022781,60045577,120091177,240182359,480364727,960729461,1921458943];o.sort(i),e.nextPrime=function(t){let e=n(o,t,i);return e<0&&(e=~e),o[e]},e.largestPrime=2147483647},function(t,e,r){"use strict";t.exports=Number.isNaN||function(t){return t!=t}},function(t,e,r){"use strict";e.additiveSymmetric=r(76),e.avg=r(77),e.bhattacharyya=r(78),e.canberra=r(79),e.chebyshev=r(80),e.clark=r(81),e.czekanowski=r(82),e.dice=r(31),e.divergence=r(83),e.euclidean=r(2),e.fidelity=r(84),e.gower=r(85),e.harmonicMean=r(86),e.hellinger=r(87),e.innerProduct=r(88),e.intersection=r(32),e.jaccard=r(33),e.jeffreys=r(89),e.jensenDifference=r(90),e.jensenShannon=r(91),e.kdivergence=r(92),e.kulczynski=r(34),e.kullbackLeibler=r(93),e.kumarHassebrook=r(94),e.kumarJohnson=r(95),e.lorentzian=r(96),e.manhattan=r(97),e.matusita=r(98),e.minkowski=r(99),e.motyka=r(35),e.neyman=r(100),e.pearson=r(101),e.probabilisticSymmetric=r(102),e.ruzicka=r(103),e.soergel=r(104),e.sorensen=r(105),e.squared=r(106),e.squaredChord=r(36),e.squaredEuclidean=r(2).squared,e.taneja=r(107),e.tanimoto=r(108),e.topsoe=r(109),e.tree=r(110),e.waveHedges=r(111)},function(t,e){t.exports=function(t,e){for(var r=0,n=t.length,i=0;r<n;r++)i+=(t[r]-e[r])*(t[r]-e[r])*(t[r]+e[r])/(t[r]*e[r]);return 2*i}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0,s=0;s<r;s++)i+=o=Math.abs(t[s]-e[s]),n<o&&(n=o);return(n+i)/2}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=Math.sqrt(t[i]*e[i]);return-Math.log(n)}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=Math.abs(t[i]-e[i])/(t[i]+e[i]);return n}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0;o<r;o++)n<(i=Math.abs(t[o]-e[o]))&&(n=i);return n}},function(t,e){t.exports=function(t,e){for(var r=0,n=t.length,i=0;r<n;r++)i+=Math.sqrt((t[r]-e[r])*(t[r]-e[r])/((t[r]+e[r])*(t[r]+e[r])));return 2*i}},function(t,e,r){"use strict";const n=r(30);t.exports=function(t,e){return 1-n(t,e)}},function(t,e){t.exports=function(t,e){for(var r=0,n=t.length,i=0;r<n;r++)i+=(t[r]-e[r])*(t[r]-e[r])/((t[r]+e[r])*(t[r]+e[r]));return 2*i}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=Math.sqrt(t[i]*e[i]);return n}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=Math.abs(t[i]-e[i]);return n/r}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=t[i]*e[i]/(t[i]+e[i]);return 2*n}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=Math.sqrt(t[i]*e[i]);return 2*Math.sqrt(1-n)}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=t[i]*e[i];return n}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=(t[i]-e[i])*Math.log(t[i]/e[i]);return n}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=(t[i]*Math.log(t[i])+e[i]*Math.log(e[i]))/2-(t[i]+e[i])/2*Math.log((t[i]+e[i])/2);return n}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0;o<r;o++)n+=t[o]*Math.log(2*t[o]/(t[o]+e[o])),i+=e[o]*Math.log(2*e[o]/(t[o]+e[o]));return(n+i)/2}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=t[i]*Math.log(2*t[i]/(t[i]+e[i]));return n}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=t[i]*Math.log(t[i]/e[i]);return n}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0,s=0;s<r;s++)n+=t[s]*e[s],i+=t[s]*t[s],o+=e[s]*e[s];return n/(i+o-n)}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=Math.pow(t[i]*t[i]-e[i]*e[i],2)/(2*Math.pow(t[i]*e[i],1.5));return n}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=Math.log(Math.abs(t[i]-e[i])+1);return n}},function(t,e){t.exports=function(t,e){for(var r=0,n=t.length,i=0;r<n;r++)i+=Math.abs(t[r]-e[r]);return i}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=Math.sqrt(t[i]*e[i]);return Math.sqrt(2-2*n)}},function(t,e){t.exports=function(t,e,r){for(var n=0,i=t.length,o=0;n<i;n++)o+=Math.pow(Math.abs(t[n]-e[n]),r);return Math.pow(o,1/r)}},function(t,e){t.exports=function(t,e){for(var r=0,n=t.length,i=0;r<n;r++)i+=(t[r]-e[r])*(t[r]-e[r])/t[r];return i}},function(t,e){t.exports=function(t,e){for(var r=0,n=t.length,i=0;r<n;r++)i+=(t[r]-e[r])*(t[r]-e[r])/e[r];return i}},function(t,e){t.exports=function(t,e){for(var r=0,n=t.length,i=0;r<n;r++)i+=(t[r]-e[r])*(t[r]-e[r])/(t[r]+e[r]);return 2*i}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0;o<r;o++)n+=Math.min(t[o],e[o]),i+=Math.max(t[o],e[o]);return n/i}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0;o<r;o++)n+=Math.abs(t[o]-e[o]),i+=Math.max(t[o],e[o]);return n/i}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0;o<r;o++)n+=Math.abs(t[o]-e[o]),i+=t[o]+e[o];return n/i}},function(t,e){t.exports=function(t,e){for(var r=0,n=t.length,i=0;r<n;r++)i+=(t[r]-e[r])*(t[r]-e[r])/(t[r]+e[r]);return i}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=(t[i]+e[i])/2*Math.log((t[i]+e[i])/(2*Math.sqrt(t[i]*e[i])));return n}},function(t,e,r){var n=r(37);t.exports=function(t,e,r){if(r)return 1-n(t,e,r);for(var i=t.length,o=0,s=0,a=0,h=0;h<i;h++)o+=t[h],s+=e[h],a+=Math.min(t[h],e[h]);return(o+s-2*a)/(o+s-a)}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=t[i]*Math.log(2*t[i]/(t[i]+e[i]))+e[i]*Math.log(2*e[i]/(t[i]+e[i]));return n}},function(t,e,r){"use strict";function n(t,e,r,i,o,s){if(s=s||.01,!(i-r<(o=o||.16))){for(var a=0,h=0;t[h]<i;h++)t[h]>r&&(a+=e[h]);if(!(a<s)){for(var u=0,l=0;t[l]<i;l++)t[h]>r&&(u+=t[l]*e[l]);if(!((u/=a)-r<1e-5||i-u<1e-5))return u-r<o/4?n(t,e,u,i,o,s):i-u<o/4?n(t,e,r,u,o,s):{sum:a,center:u,left:n(t,e,r,u,o,s),right:n(t,e,u,i,o,s)}}}}var i={minWindow:.16,threshold:.01,alpha:.1,beta:.33,gamma:.001};t.exports={calc:function(t,e,r,o,s){for(var a in s=s||{},i)s.hasOwnProperty(a)||(s[a]=i[a]);return function t(e,r,n,i,o){return void 0===e||void 0===r?0:i*(n*Math.min(e.sum,r.sum)/Math.max(e.sum,r.sum)+(1-n)*Math.exp(-o*Math.abs(e.center-r.center)))+(1-i)*(t(e.left,r.left,n,i,o)+t(e.right,r.right,n,i,o))}(t.sum?t:n(t.x,t.y,r,o,s.minWindow,s.threshold),e.sum?e:n(e.x,e.y,r,o,s.minWindow,s.threshold),s.alpha,s.beta,s.gamma)},createTree:n}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=1-Math.min(t[i],e[i])/Math.max(t[i],e[i]);return n}},function(t,e,r){"use strict";e.cosine=r(38),e.czekanowski=r(30),e.dice=r(113),e.intersection=r(114),e.jaccard=r(115),e.kulczynski=r(116),e.motyka=r(117),e.pearson=r(118),e.squaredChord=r(119),e.tanimoto=r(37)},function(t,e,r){var n=r(31);t.exports=function(t,e){return 1-n(t,e)}},function(t,e,r){var n=r(32);t.exports=function(t,e){return 1-n(t,e)}},function(t,e,r){var n=r(33);t.exports=function(t,e){return 1-n(t,e)}},function(t,e,r){var n=r(34);t.exports=function(t,e){return 1/n(t,e)}},function(t,e,r){var n=r(35);t.exports=function(t,e){return 1-n(t,e)}},function(t,e,r){"use strict";var n=r(3).array,i=r(38);t.exports=function(t,e){for(var r=n.mean(t),o=n.mean(e),s=new Array(t.length),a=new Array(e.length),h=0;h<s.length;h++)s[h]=t[h]-r,a[h]=e[h]-o;return i(s,a)}},function(t,e,r){var n=r(36);t.exports=function(t,e){return 1-n(t,e)}},function(t,e,r){"use strict";const n=r(121);class i{constructor(t,e,r){if(r=r||{},t.length!==e.length||t[0].length!==e[0].length)throw new Error("dimensions of prediction and target do not match");const n=t.length,i=t[0].length,o=!r.max,s=[];if(r.all)for(var a=0;a<n;a++)for(var h=0;h<i;h++)s.push({pred:t[a][h],targ:e[a][h]});else{if(n<3||n!==i)throw new Error('When "all" option is false, the prediction matrix must be square and have at least 3 columns');for(a=0;a<n-1;a++)for(h=a+1;h<i;h++)s.push({pred:t[a][h],targ:e[a][h]})}o?s.sort((t,e)=>t.pred-e.pred):s.sort((t,e)=>e.pred-t.pred);const u=this.cutoffs=[o?Number.MIN_VALUE:Number.MAX_VALUE],l=this.fp=[0],c=this.tp=[0];var f=0,g=0,d=s[0].pred,m=0,p=0;for(a=0;a<s.length;a++)s[a].pred!==d&&(u.push(d),l.push(p),c.push(m),d=s[a].pred),s[a].targ?(f++,m++):(g++,p++);u.push(d),l.push(p),c.push(m);const v=u.length,w=this.fn=new Array(v),y=this.tn=new Array(v),x=this.nPosPred=new Array(v),b=this.nNegPred=new Array(v);for(a=0;a<v;a++)w[a]=f-c[a],y[a]=g-l[a],x[a]=c[a]+l[a],b[a]=y[a]+w[a];this.nPos=f,this.nNeg=g,this.nSamples=f+g}getMeasure(t){if("string"!=typeof t)throw new Error("No measure specified");if(!n[t])throw new Error("The specified measure (".concat(t,") does not exist"));return n[t](this)}getAURC(){const t=this.cutoffs.length,e=new Array(t),r=new Array(t);for(var n=0;n<t;n++)e[n]=this.fp[n]/this.nNeg,r[n]=this.tp[n]/this.nPos;var i=0;for(n=1;n<t;n++)i+=.5*(e[n]-e[n-1])*(r[n]+r[n-1]);return i}getAUDC(){const t=this.cutoffs.length,e=new Array(t),r=new Array(t);for(var n=0;n<t;n++)e[n]=this.fn[n]/this.nPos,r[n]=this.fp[n]/this.nNeg;var i=0;for(n=1;n<t;n++)i+=.5*(e[n]+e[n-1])*(r[n]-r[n-1]);return i}getDistribution(t){t=t||{};for(var e=this.cutoffs.length,r=t.xMin||Math.floor(100*this.cutoffs[e-1])/100,n=t.xMax||Math.ceil(100*this.cutoffs[1])/100,i=t.interval||Math.floor((n-r)/20*1e7-1)/1e7,o=[],s=[],a=[],h=[],u=[],l=this.tp[e-1],c=0,f=this.fp[e-1],g=0,d=r,m=e-1;d<=n;d+=i){for(;this.cutoffs[m]<d;)m--;o.push(d);var p=l-c-this.tp[m],v=f-g-this.fp[m];c+=p,g+=v,s.push(v),a.push(p),h.push(100-(f-this.fp[m])/f*100),u.push(100-(l-this.tp[m])/l*100)}return{xLabels:o,interValues:s,intraValues:a,interCumPercent:h,intraCumPercent:u}}}i.names={acc:"Accuracy",err:"Error rate",fpr:"False positive rate",tpr:"True positive rate",fnr:"False negative rate",tnr:"True negative rate",ppv:"Positive predictive value",npv:"Negative predictive value",pcfall:"Prediction-conditioned fallout",pcmiss:"Prediction-conditioned miss",lift:"Lift value",rpp:"Rate of positive predictions",rnp:"Rate of negative predictions",threshold:"Threshold"},t.exports=i},function(t,e,r){"use strict";e.acc=(t=>{const e=t.cutoffs.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=(t.tn[n]+t.tp[n])/(e-1);return r}),e.err=(t=>{const e=t.cutoffs.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=t.fn[n]+t.fp[n]/(e-1);return r}),e.fpr=(t=>{const e=t.cutoffs.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=t.fp[n]/t.nNeg;return r}),e.tpr=(t=>{const e=t.cutoffs.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=t.tp[n]/t.nPos;return r}),e.fnr=(t=>{const e=t.cutoffs.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=t.fn[n]/t.nPos;return r}),e.tnr=(t=>{const e=t.cutoffs.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=t.tn[n]/t.nNeg;return r}),e.ppv=(t=>{const e=t.cutoffs.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=t.fp[n]+t.tp[n]!==0?t.tp[n]/(t.fp[n]+t.tp[n]):0;return r}),e.npv=(t=>{const e=t.cutoffs.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=t.fn[n]+t.tn[n]!==0?t.tn[n]/(t.fn[n]+t.tn[n]):0;return r}),e.pcfall=(t=>{const e=t.cutoffs.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=t.fp[n]+t.tp[n]!==0?1-t.tp[n]/(t.fp[n]+t.tp[n]):1;return r}),e.pcmiss=(t=>{const e=t.cutoffs.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=t.fn[n]+t.tn[n]!==0?1-t.tn[n]/(t.fn[n]+t.tn[n]):1;return r}),e.lift=(t=>{const e=t.cutoffs.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=0!==t.nPosPred[n]?t.tp[n]/t.nPos/(t.nPosPred[n]/t.nSamples):0;return r}),e.rpp=(t=>{const e=t.cutoffs.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=t.nPosPred[n]/t.nSamples;return r}),e.rnp=(t=>{const e=t.cutoffs.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=t.nNegPred[n]/t.nSamples;return r}),e.threshold=(t=>{const e=t.cutoffs.slice();return e[0]=e[1],e})},function(t,e,r){"use strict";var n=r(0),i=n.Matrix,o=n.inverse,s=r(39),a=r(16),h={windowSize:5,derivative:1,polynomial:2,pad:"none",padValue:"replicate"};t.exports=function(t,e,r){if((r=a({},h,r)).windowSize%2==0||r.windowSize<5||!Number.isInteger(r.windowSize))throw new RangeError("Invalid window size (should be odd and at least 5 integer number)");if(r.derivative<0||!Number.isInteger(r.derivative))throw new RangeError("Derivative should be a positive integer");if(r.polynomial<1||!Number.isInteger(r.polynomial))throw new RangeError("Polynomial should be a positive integer");var n,u,l=Math.floor(r.windowSize/2);"pre"===r.pad&&(t=s(t,{size:l,value:r.padValue}));var c=new Array(t.length-2*l);if(5!==r.windowSize||2!==r.polynomial||1!==r.derivative&&2!==r.derivative){for(var f=i.ones(r.windowSize,r.polynomial+1),g=-(r.windowSize-1)/2,d=0;d<f.length;d++)for(var m=0;m<f[d].length;m++)g+1===0&&0===m||(f[d][m]=Math.pow(g+d,m));var p=f.transposeView();n=(n=o(p.mmul(f)).mmul(p))[r.derivative],u=1}else 1===r.derivative?(n=[-2,-1,0,1,2],u=10):(n=[2,-1,-2,-1,2],u=7);for(var v=u*Math.pow(e,r.derivative),w=l;w<t.length-l;w++){for(var y=0,x=0;x<n.length;x++)y+=n[x]*t[x+w-l]/v;c[w-l]=y}return"post"===r.pad&&(c=s(c,{size:l,value:r.padValue})),c}},function(t,e,r){var n=r(16),i=(r(3),{windowSize:9,derivative:0,polynomial:3});function o(t,e,r,n){for(var i=0,o=0,s=e-r;s<e+r;s++)s>=0&&s<t.length-1&&(i+=t[s+1]-t[s],o++);return Math.pow(i/o,n)}function s(t,e,r,n){return r>0?(4*r-2)/(r*(2*e-r+1))*(t*s(t,e,r-1,n)+n*s(t,e,r-1,n-1))-(r-1)*(2*e+r)/(r*(2*e-r+1))*s(t,e,r-2,n):0==r&&0==n?1:0}function a(t,e){var r=1;if(t>=e)for(var n=t-e+1;n<=t;n++)r*=n;return r}function h(t,e,r,n,i){for(var o=0,h=0;h<=n;h++)o+=(2*h+1)*(a(2*r,h)/a(2*r+h+1,h+1))*s(t,r,h,0)*s(e,r,h,i);return o}t.exports=function(t,e,r){if((r=n({},i,r)).windowSize%2==0||r.windowSize<5||!Number.isInteger(r.windowSize))throw new RangeError("Invalid window size (should be odd and at least 5 integer number)");if(r.windowSize>t.length)throw new RangeError("Window size is higher than the data length "+r.windowSize+">"+t.length);if(r.derivative<0||!Number.isInteger(r.derivative))throw new RangeError("Derivative should be a positive integer");if(r.polynomial<1||!Number.isInteger(r.polynomial))throw new RangeError("Polynomial should be a positive integer");r.polynomial>=6&&console.warn("You should not use polynomial grade higher than 5 if you are not sure that your data arises from such a model. Possible polynomial oscillation problems");var s=r.windowSize,a=Math.floor(s/2),u=t.length,l=new Array(u),c=function(t,e,r){for(var n=new Array(t),i=Math.floor(t/2),o=-i;o<=i;o++){n[o+i]=new Array(t);for(var s=-i;s<=i;s++)n[o+i][s+i]=h(s,o,i,e,r)}return n}(s,r.polynomial,r.derivative),f=0,g=!0;"[object Array]"===Object.prototype.toString.call(e)?g=!1:f=Math.pow(e,r.derivative);for(var d=0;d<a;d++){for(var m=c[a-d-1],p=c[a+d+1],v=0,w=0,y=0;y<s;y++)v+=m[y]*t[y],w+=p[y]*t[u-s+y-1];g?(l[a-d-1]=v/f,l[u-a+d]=w/f):(f=o(e,a-d-1,a,r.derivative),l[a-d-1]=v/f,f=o(e,u-a+d,a,r.derivative),l[u-a+d]=w/f)}var x=c[a];for(d=s;d<u+1;d++){var b=0;for(y=0;y<s;y++)b+=x[y]*t[y+d-s];g||(f=o(e,d-a-1,a,r.derivative)),l[d-a-1]=b/f}return l}},function(t,e,r){"use strict";var n=r(125);function i(t){for(var e="",r=0;r<t.length;r++){var n=(t[r]>>>0).toString(2);e+="00000000000000000000000000000000".substr(n.length)+n}return e}t.exports={count:function(t){for(var e=0,r=0;r<t.length;r++)e+=n[255&t[r]]+n[t[r]>>8&255]+n[t[r]>>16&255]+n[t[r]>>24&255];return e},and:function(t,e){for(var r=new Array(t.length),n=0;n<t.length;n++)r[n]=t[n]&e[n];return r},or:function(t,e){for(var r=new Array(t.length),n=0;n<t.length;n++)r[n]=t[n]|e[n];return r},xor:function(t,e){for(var r=new Array(t.length),n=0;n<t.length;n++)r[n]=t[n]^e[n];return r},not:function(t){for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=~t[r];return e},getBit:function(t,e){var r=1<<31-e%32;return Boolean(t[e>>5]&r)},setBit:function(t,e,r){var n=e>>5,i=1<<31-e%32;return t[n]=r?i|t[n]:~i&t[n],t},toBinaryString:i,parseBinaryString:function(t){for(var e=t.length/32,r=new Array(e),n=0;n<e;n++)r[n]=0|parseInt(t.substr(32*n,32),2);return r},toHexString:function(t){for(var e="",r=0;r<t.length;r++){var n=(t[r]>>>0).toString(16);e+="00000000".substr(n.length)+n}return e},parseHexString:function(t){for(var e=t.length/8,r=new Array(e),n=0;n<e;n++)r[n]=0|parseInt(t.substr(8*n,8),16);return r},toDebug:function(t){for(var e=i(t),r="",n=0;n<t.length;n++){r+="0000".substr((32*n).toString(16).length)+(32*n).toString(16)+":";for(var o=0;o<32;o+=4)r+=" "+e.substr(32*n+o,4);n<t.length-1&&(r+="\n")}return r}}},function(t,e){for(var r=new Array(256),n=0;n<256;n++){for(var i=n,o=0;i;)i&=i-1,o++;r[n]=o}t.exports=r},function(t,e,r){"use strict";t.exports=e=r(127),e.getEquallySpacedData=r(128).getEquallySpacedData,e.SNV=r(129).SNV},function(t,e,r){"use strict";const n=r(3).array;function i(t){for(var e=new Array(t[0].length),r=0;r<e.length;++r)e[r]=new Array(t.length);for(r=0;r<t.length;++r)for(var n=0;n<t[0].length;++n)e[n][r]=t[r][n];return e}t.exports={coordArrayToPoints:function(t,e){if(t.length%e!=0)throw new RangeError("Dimensions number must be accordance with the size of the array.");for(var r=t.length/e,n=new Array(r),i=0,o=0;o<t.length;o+=e){for(var s=new Array(e),a=0;a<e;++a)s[a]=t[o+a];n[i]=s,i++}return n},coordArrayToCoordMatrix:function(t,e){if(t.length%e!=0)throw new RangeError("Dimensions number must be accordance with the size of the array.");for(var r=new Array(e),n=t.length/e,i=0;i<r.length;i++)r[i]=new Array(n);for(i=0;i<t.length;i+=e)for(var o=0;o<e;++o){var s=Math.floor(i/e);r[o][s]=t[i+o]}return r},coordMatrixToCoordArray:function(t){for(var e=new Array(t.length*t[0].length),r=0,n=0;n<t[0].length;++n)for(var i=0;i<t.length;++i)e[r]=t[i][n],++r;return e},coordMatrixToPoints:i,pointsToCoordArray:function(t){for(var e=new Array(t.length*t[0].length),r=0,n=0;n<t.length;++n)for(var i=0;i<t[0].length;++i)e[r]=t[n][i],++r;return e},pointsToCoordMatrix:i,applyDotProduct:function(t,e){var r,n;t.length<=e.length?(n=t,r=e):(n=e,r=t);for(var i=r.length-n.length+1,o=new Array(i),s=0;s<i;++s){for(var a=0,h=0;h<n.length;++h)a+=n[h]*r[s+h];o[s]=a}return o},scale:function t(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=r.min,o=r.max;var s=r.inPlace?e:new Array(e.length),a=n.minMax(e);if("number"==typeof o)if("number"==typeof i){let t=(o-i)/(a.max-a.min);for(let r=0;r<s.length;r++)s[r]=(e[r]-a.min)*t+i}else if(0!==a.max){let t=o/a.max;for(let r=0;r<s.length;r++)s[r]=e[r]*t}else r.min=a.min,s=t(e,r);else if("number"==typeof i)if(0!==a.min){let t=i/a.min;for(let r=0;r<s.length;r++)s[r]=e[r]*t}else r.max=a.max,s=t(e,r);return s}}},function(t,e,r){"use strict";function n(t,e,r,n){return.5*r*e*e+n*e-(.5*r*t*t+n*t)}e.getEquallySpacedData=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i=t.length;t.length>1&&t[0]>t[1]&&(t=t.slice().reverse(),e=e.slice().reverse());var o=r.from,s=void 0===o?t[0]:o,a=r.to,h=void 0===a?t[i-1]:a,u=r.variant,l=void 0===u?"smooth":u,c=r.numberOfPoints,f=void 0===c?100:c;if(i!==e.length)throw new RangeError("the x and y vector doesn't have the same size.");if("number"!=typeof s||isNaN(s))throw new RangeError("'from' option must be a number");if("number"!=typeof h||isNaN(h))throw new RangeError("'to' option must be a number");var g=s>h;if(g){var d=[h,s];s=d[0],h=d[1]}if("number"!=typeof f||isNaN(f))throw new RangeError("'numberOfPoints' option must be a number");if(f<1)throw new RangeError("the number of points must be at least 1");var m="slot"===l?function(t,e,r,n,i){var o=t.length,s=(n-r)/(i-1),a=s/2,h=t[t.length-1]-t[t.length-2],u=r-a,l=new Array(i),c=u,f=u+s,g=-Number.MAX_VALUE,d=0,m=t[0],p=e[0],v=0,w=!0,y=0,x=0,b=1,M=0;t:for(;;){if(g>=m)throw new Error("x must be an increasing serie");for(;g-f>0;){if(w&&(x++,w=!1),l[M]=x<=0?0:y/x,++M===i)break t;c=f,f+=s,y=0,x=0}g>c&&(y+=d,x++),(g===-Number.MAX_VALUE||v>1)&&x--,g=m,d=p,b<o?(m=t[b],p=e[b],b++):(m+=h,p=0,v++)}return l}(t,e,s,h,f):function(t,e,r,i,o){var s=t.length,a=(i-r)/(o-1),h=a/2,u=new Array(o),l=t[1]-t[0],c=t[s-1]-t[s-2],f=r-h,g=r+h,d=Number.MIN_VALUE,m=0,p=t[0]-l,v=0,w=0,y=0,x=0,b=0,M=0,S=0,A=0;t:for(;;){for(d<=f&&f<=p&&(E=n(0,f-d,y,m),b=w+E);p-g>=0;){var E=n(0,g-d,y,m);if(M=w+E,u[A++]=(M-b)/a,A===o)break t;f=g,g+=a,b=M}w+=n(d,p,y,x),d=p,m=v,S<s?(p=t[S],v=e[S],S++):S===s&&(p+=c,v=0),x=-(y=(v-m)/(p-d))*d+m}return u}(t,e,s,h,f);return g?m.reverse():m},e.integral=n},function(t,e,r){"use strict";e.SNV=function(t){for(var e=n.mean(t),r=n.standardDeviation(t),i=t.slice(),o=0;o<t.length;o++)i[o]=(i[o]-e)/r;return i};var n=r(3).array},function(t,e,r){"use strict";r.r(e);var n=r(1),i=r.n(n);e.default=function(t){if(!i()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var e=0,r=0,n=0,o={},s=0;s<t.length;++s){var a=t[s];(n=o[a])?(o[a]++,n++):o[a]=n=1,n>r&&(r=n,e=t[s])}return e}},function(t,e,r){"use strict";r.r(e),e.default=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).algorithm,r=void 0===e?"absolute":e;if(!Array.isArray(t))throw new Error("input must be an array");if(0===t.length)throw new Error("input must not be empty");switch(r.toLowerCase()){case"absolute":var n=function(t){for(var e=0,r=0;r<t.length;r++)e+=Math.abs(t[r]);return e}(t);return 0===n?t.slice(0):t.map(function(t){return t/n});default:throw new Error("norm: unknown algorithm: ".concat(r))}}},function(t,e,r){"use strict";r.r(e);var n=r(1),i=r.n(n);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==o(t)||i()(t)||(e=t,t=[]),!i()(t))throw new TypeError("input must be an array");var r=e,n=r.from,s=void 0===n?0:n,a=r.to,h=void 0===a?10:a,u=r.size,l=void 0===u?t.length:u,c=r.step;if(l&&c)throw new Error("step is defined by the array size");if(l||(l=c?Math.floor((h-s)/c)+1:h-s+1),!c&&l&&(c=(h-s)/(l-1)),Array.isArray(t)){t.length=0;for(var f=0;f<l;f++)t.push(s),s+=c}else{if(t.length!==l)throw new Error("sequentialFill typed array must have the correct length");for(var g=0;g<l;g++)t[g]=s,s+=c}return t}},function(t,e,r){"use strict";r.r(e);var n=r(20);e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Math.sqrt(Object(n.default)(t,e))}},function(t,e,r){"use strict";function n(t,e){const r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).window,n=void 0===r?.01:r;for(var i={x:e.slice(),y:new Array(e.length).fill(0)},o=0,s=0;o<t.x.length&&s<e.length;){var a=t.x[o]-e[s];Math.abs(a)<n?i.y[s]+=t.y[o++]:a<0?o++:s++}return i}r.r(e),r.d(e,"default",function(){return n})},function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return s});var n=r(6),i=r.n(n),o=r(7);function s(t,e){const r=t.x,n=t.y,s=e.target,a=void 0===s?r[0]:s,h=e.reverse;let u;return(u=void 0!==h&&h?i()(r,a,o.desc):i()(r,a,o.asc))>=0?{x:r[u],y:n[u]}:0!==(u=~u)&&Math.abs(r[u]-a)>.5||u===r.length?{x:r[u-1],y:n[u-1]}:{x:r[u],y:n[u]}}},function(t,e,r){"use strict";function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.x,n=t.y,i=e.groupWidth,o=void 0===i?.001:i;for(var s={x:[],y:[]},a={x:[],y:[]},h=0,u=0;u<r.length;)0===h||r[u]-s.x[h-1]>o?(a.x.push(r[u]),a.y.push(n[u]),s.x.push(r[u]),s.y.push(n[u]),u++,h++):(n[u]>a.y[h-1]&&(a.x[h-1]=r[u],a.y[h-1]=n[u]),s.x[h-1]=r[u],s.y[h-1]+=n[u],u++);return s.x=a.x.slice(),s}r.r(e),r.d(e,"default",function(){return n})},function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return s});var n=r(6),i=r.n(n),o=r(7);function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.x,n=t.y;let i=e.from,o=void 0===i?{index:0}:i,s=e.to,h=void 0===s?{index:r.length}:s,u=e.reverse,l=void 0!==u&&u;void 0!==o.value&&void 0===o.index&&(o.index=a(o.value,r,l)),void 0!==h.value&&void 0===h.index&&(h.index=a(h.value,r,l));for(var c,f=Number.MIN_VALUE,g=o.index;g<h.index;g++)f<n[g]&&(f=n[g],c=g);return{index:c,value:f}}function a(t,e,r){let n;if((n=r?i()(e,t,o.desc):i()(e,t,o.asc))<0)throw new Error("the value ".concat(t," doesn't belongs to the abscissa value"));return n}},function(t,e,r){"use strict";function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.x,n=t.y,i=e.reverse;var o;o=void 0!==i&&i?(t,e)=>e.x-t.x:(t,e)=>t.x-e.x;for(var s=r.map((t,e)=>({x:t,y:n[e]})).sort(o),a={x:r.slice(),y:n.slice()},h=0;h<r.length;h++)a.x[h]=s[h].x,a.y[h]=s[h].y;return a}r.r(e),r.d(e,"default",function(){return n})},function(t,e,r){"use strict";function n(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=t.x,r=t.y;if(e.length<2)return;if(e.length!==r.length)throw new Error("The X and Y arrays mush have the same length");let n=e[0],i=0;for(let t=1;t<e.length;t++)n!==e[t]&&(i++,n=e[t],e[i]=e[t],t!==i&&(r[i]=0)),t!==i&&(r[i]+=r[t]);e.length=i+1,r.length=i+1}r.r(e),r.d(e,"default",function(){return n})},function(t,e,r){"use strict";function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.x,n=t.y,i=e.groupWidth,o=void 0===i?.001:i;for(var s={x:[],y:[]},a={x:[],y:[]},h=0,u=0;u<r.length;)0===h||r[u]-s.x[h-1]>o?(a.x.push(r[u]*n[u]),a.y.push(n[u]),s.x.push(r[u]),s.y.push(n[u]),u++,h++):(a.x[h-1]+=r[u]*n[u],a.y[h-1]+=n[u],s.x[h-1]=r[u],s.y[h-1]+=n[u],u++);for(var l=0;l<s.x.length;l++)s.x[l]=a.x[l]/a.y[l];return s}r.r(e),r.d(e,"default",function(){return n})},function(t,e,r){"use strict";function n(t,e){let r=0;for(let n=0;n<t.length;n++)r+=(t[n]-e[n])*(t[n]-e[n]);return r}function i(t,e){let r=0;for(let n=0;n<t.length;n++)r+=(t[n]-e[n])*(t[n]-e[n]);return r}r.r(e);const o={distanceFunction:i};function s(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;const n=r.distanceFunction||o.distanceFunction,i=r.similarityFunction||o.similarityFunction;let s=-1;if("function"==typeof i){let r=Number.MIN_VALUE;for(let n=0;n<t.length;n++){const o=i(e,t[n]);o>r&&(r=o,s=n)}}else{if("function"!=typeof n)throw new Error("A similarity or distance function it's required");{let r=Number.MAX_VALUE;for(let i=0;i<t.length;i++){const o=n(e,t[i]);o<r&&(r=o,s=i)}}}return s}function a(t,e,r,n){for(var i=0;i<t.length;i++)r[i]=s(e,t[i],{distanceFunction:n});return r}var h=r(11),u=r(0);function l(t,e){const r=new u.Matrix(t.length,e.length);for(let i=0;i<t.length;i++)for(let o=0;o<e.length;o++)r.set(i,o,n(t.getRow(i),e.getRow(o)));return r}function c(t){let e=[];for(let r=0;r<t;r++)e.push(r);return e}function f(t){let e=[t[0]];for(let r=1;r<t.length;r++)e[r]=e[r-1]+t[r];return e}const g=Symbol("distance");class d{constructor(t,e,r,n,i){this.clusters=t,this.centroids=e,this.converged=r,this.iterations=n,this[g]=i}nearest(t){const e=new Array(t.length);return a(t,this.centroids.map(function(t){return t.centroid}),e,this[g])}computeInformation(t){for(var e=this.centroids.map(function(t){return{centroid:t,error:0,size:0}}),r=0;r<t.length;r++)e[this.clusters[r]].error+=this[g](t[r],this.centroids[this.clusters[r]]),e[this.clusters[r]].size++;for(var n=0;n<this.centroids.length;n++)e[n].size?e[n].error/=e[n].size:e[n].error=null;return new d(this.clusters,e,this.converged,this.iterations,this[g])}}r.d(e,"default",function(){return v});const m={maxIterations:100,tolerance:1e-6,withIterations:!1,initialization:"kmeans++",distanceFunction:n};function p(t,e,r,n,i,o){var s=function(t,e,r,n){const i=e[0].length;for(var o=new Array(n),s=new Array(n),a=0;a<n;a++){o[a]=new Array(i),s[a]=0;for(var h=0;h<i;h++)o[a][h]=0}for(var u=0;u<e.length;u++){s[r[u]]++;for(var l=0;l<i;l++)o[r[u]][l]+=e[u][l]}for(var c=0;c<n;c++)for(var f=0;f<i;f++)s[c]?o[c][f]/=s[c]:o[c][f]=t[c][f];return o}(t,e,r=a(e,t,r,i.distanceFunction),n),h=function(t,e,r,n){for(var i=0;i<t.length;i++)if(r(t[i],e[i])>n)return!1;return!0}(s,t,i.distanceFunction,i.tolerance);return new d(r,s,h,o,i.distanceFunction)}function v(t,e,r){if(r=Object.assign({},m,r),e<=0||e>t.length||!Number.isInteger(e))throw new Error("K should be a positive integer smaller than the number of points");var i;if(Array.isArray(r.initialization)){if(r.initialization.length!==e)throw new Error("The initial centers should have the same length as K");i=r.initialization}else switch(r.initialization){case"kmeans++":i=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=(t=new u.Matrix(t)).length,o=new h.default(r.seed),s=[],a=r.localTrials||2+Math.floor(Math.log(e)),g=o.randInt(i);s.push(t[g].slice());let d=[t.map(t=>n(t,s[0]))],m=[f(d[0])];const p=1/m[0][i-1];let v=u.Matrix.mul(d,p);for(let r=1;r<e;r++){const e=o.choice(i,{replace:!0,size:a,probabilities:v[0]}),n=l(t.selection(e,c(t[0].length)),t);let h,g,p;for(let t=0;t<a;t++){const r=u.Matrix.min(d,[n[t]]),i=r.sum();(void 0===h||i<g)&&(h=e[t],g=i,p=r)}s[r]=t[h].slice(),m=[f((d=p)[0])],v=u.Matrix.mul(d,1/m[0][i-1])}return s}(t,e,r);break;case"random":i=function(t,e,r){return new h.default(r).choice(t,{size:e})}(t,e,r.seed);break;case"mostDistant":i=function(t,e,r,n){const i=new h.default(n);var o=new Array(e);if(o[0]=Math.floor(i.random()*t.length),e>1){for(var s={dist:-1,index:-1},a=0;a<t.length;++a)r[o[0]][a]>s.dist&&(s.dist=r[o[0]][a],s.index=a);if(o[1]=s.index,e>2)for(var u=2;u<e;++u){for(var l={dist:-1,index:-1},c=0;c<t.length;++c){for(var f={dist:Number.MAX_VALUE,index:-1},g=0;g<u;++g)r[g][c]<f.dist&&-1===o.indexOf(c)&&(f={dist:r[g][c],index:c});f.dist!==Number.MAX_VALUE&&f.dist>l.dist&&(l=Object.assign({},f))}o[u]=l.index}}return o.map(e=>t[e])}(t,e,function(t,e){for(var r=new Array(t.length),n=0;n<t.length;++n)for(var i=n;i<t.length;++i){r[n]||(r[n]=new Array(t.length)),r[i]||(r[i]=new Array(t.length));const o=e(t[n],t[i]);r[n][i]=o,r[i][n]=o}return r}(t,r.distanceFunction),r.seed);break;default:throw new Error('Unknown initialization method: "'.concat(r.initialization,'"'))}0===r.maxIterations&&(r.maxIterations=Number.MAX_VALUE);var o=new Array(t.length);if(r.withIterations)return function*(t,e,r,n,i){for(var o,s=!1,a=0;!s&&a<i.maxIterations;)o=p(t,e,r,n,i,++a),yield o.computeInformation(e),s=o.converged,t=o.centroids}(i,t,o,e,r);for(var s,a=!1,g=0;!a&&g<r.maxIterations;)a=(s=p(i,t,o,e,r,++g)).converged,i=s.centroids;return s.computeInformation(t)}},function(t,e,r){"use strict";r.r(e);var n=r(8),i=r(0),o=r(12),s=r.n(o);function a(t,e,r){var n=s.a.engines.mt19937(),o=s.a.integer(0,t.rows-1);if(void 0===r)n=n.autoSeed();else{if(!Number.isInteger(r))throw new RangeError("Expected seed must be undefined or integer not ".concat(r));n=n.seed(r)}for(var a=new Array(t.rows),h=new Array(t.rows),u=0;u<t.rows;++u){var l=o(n);a[u]=t[l],h[u]=e[l]}return{X:new i.default(a),y:h}}function h(t,e,r,n){if(t.columns<e)throw new RangeError("N should be less or equal to the number of columns of X");var o=s.a.integer(0,t.columns-1),a=s.a.engines.mt19937();if(void 0===n)a=a.autoSeed();else{if(!Number.isInteger(n))throw new RangeError("Expected seed must be undefined or integer not ".concat(n));a=a.seed(n)}var h=new i.default(t.rows,e);if(r)for(var u=new Array(e),l=0;l<e;++l){var c=o(a);u[l]=c,h.setColumn(l,t.getColumn(c))}else{for(u=new Set,c=o(a),l=0;l<e;++l){for(;u.has(c);)c=o(a);h.setColumn(l,t.getColumn(c)),u.add(c)}u=Array.from(u)}return{X:h,usedIndex:u}}class u{constructor(t,e){if(!0===t){this.replacement=e.replacement,this.maxFeatures=e.maxFeatures,this.nEstimators=e.nEstimators,this.treeOptions=e.treeOptions,this.isClassifier=e.isClassifier,this.seed=e.seed,this.n=e.n,this.indexes=e.indexes,this.useSampleBagging=e.useSampleBagging;var r=this.isClassifier?n.DecisionTreeClassifier:n.DecisionTreeRegression;this.estimators=e.estimators.map(t=>r.load(t))}else this.replacement=t.replacement,this.maxFeatures=t.maxFeatures,this.nEstimators=t.nEstimators,this.treeOptions=t.treeOptions,this.isClassifier=t.isClassifier,this.seed=t.seed,this.useSampleBagging=t.useSampleBagging}train(t,e){if(t=i.Matrix.checkMatrix(t),this.maxFeatures=this.maxFeatures||t.columns,(r=this.maxFeatures)>0&&r<=1)this.n=Math.floor(t.columns*this.maxFeatures);else{if(!Number.isInteger(this.maxFeatures))throw new RangeError("Cannot process the maxFeatures parameter ".concat(this.maxFeatures));if(this.maxFeatures>t.columns)throw new RangeError("The maxFeatures parameter should be less than ".concat(t.columns));this.n=this.maxFeatures}var r;if(this.isClassifier)var o=n.DecisionTreeClassifier;else o=n.DecisionTreeRegression;this.estimators=new Array(this.nEstimators),this.indexes=new Array(this.nEstimators);for(var s=0;s<this.nEstimators;++s){var u=this.useSampleBagging?a(t,e,this.seed):{X:t,y:e},l=u.X,c=u.y;l=(u=h(l,this.n,this.replacement,this.seed)).X,this.indexes[s]=u.usedIndex,this.estimators[s]=new o(this.treeOptions),this.estimators[s].train(l,c)}}selection(t){throw new Error("Abstract method 'selection' not implemented!")}predict(t){var e=new Array(this.nEstimators);t=i.Matrix.checkMatrix(t);for(var r=0;r<this.nEstimators;++r){var n=t.columnSelectionView(this.indexes[r]);e[r]=this.estimators[r].predict(n)}e=new i.WrapperMatrix2D(e).transposeView();var o=new Array(e.rows);for(r=0;r<e.rows;++r)o[r]=this.selection(e.getRow(r));return o}toJSON(){return{indexes:this.indexes,n:this.n,replacement:this.replacement,maxFeatures:this.maxFeatures,nEstimators:this.nEstimators,treeOptions:this.treeOptions,isClassifier:this.isClassifier,seed:this.seed,estimators:this.estimators.map(t=>t.toJSON()),useSampleBagging:this.useSampleBagging}}}const l={maxFeatures:1,replacement:!0,nEstimators:10,seed:42,useSampleBagging:!1};class c extends u{constructor(t,e){!0===t?super(!0,e.baseModel):((t=Object.assign({},l,t)).isClassifier=!0,super(t))}selection(t){return(e=t).sort((t,r)=>e.filter(e=>e===t).length-e.filter(t=>t===r).length).pop();var e}toJSON(){return{baseModel:super.toJSON(),name:"RFClassifier"}}static load(t){if("RFClassifier"!==t.name)throw new RangeError("Invalid model: ".concat(t.name));return new c(!0,t)}}var f=r(5),g=r(18);const d={mean:f.default,median:g.default},m={maxFeatures:1,replacement:!1,nEstimators:10,treeOptions:{},selectionMethod:"mean",seed:42,useSampleBagging:!1};class p extends u{constructor(t,e){if(!0===t)super(!0,e.baseModel),this.selectionMethod=e.selectionMethod;else{if("mean"!==(t=Object.assign({},m,t)).selectionMethod&&"median"!==t.selectionMethod)throw new RangeError("Unsupported selection method ".concat(t.selectionMethod));t.isClassifier=!1,super(t),this.selectionMethod=t.selectionMethod}}selection(t){return d[this.selectionMethod](t)}toJSON(){return{baseModel:super.toJSON(),selectionMethod:this.selectionMethod,name:"RFRegression"}}static load(t){if("RFRegression"!==t.name)throw new RangeError("Invalid model: ".concat(t.name));return new p(!0,t)}}r.d(e,"RandomForestClassifier",function(){return c}),r.d(e,"RandomForestRegression",function(){return p})},function(t,e,r){"use strict";r.r(e);var n=r(0),i=r(4),o=r.n(i);function s(t){return Math.sqrt(t.clone().apply(a).sum())}function a(t,e){return this[t][e]=this[t][e]*this[t][e],this}function h(t,e){if(e)for(var r=0;r<t.length;++r)for(var i=0;i<t[r].length;++i){var o=t[r][i];t[r][i]=null!==o?new n.default(t[r][i]):void 0}else for(r=0;r<t.length;++r)t[r]=new n.default(t[r]);return t}class u{constructor(t,e){if(!0===t)this.meanX=e.meanX,this.stdDevX=e.stdDevX,this.meanY=e.meanY,this.stdDevY=e.stdDevY,this.PBQ=n.default.checkMatrix(e.PBQ),this.R2X=e.R2X,this.scale=e.scale,this.scaleMethod=e.scaleMethod,this.tolerance=e.tolerance;else{var r=t.tolerance,i=void 0===r?1e-5:r,o=t.scale,s=void 0===o||o;this.tolerance=i,this.scale=s,this.latentVectors=t.latentVectors}}train(t,e){if(t=n.default.checkMatrix(t),e=n.default.checkMatrix(e),t.length!==e.length)throw new RangeError("The number of X rows must be equal to the number of Y rows");this.meanX=o.a.mean(t),this.stdDevX=o.a.standardDeviation(t,this.meanX,!0),this.meanY=o.a.mean(e),this.stdDevY=o.a.standardDeviation(e,this.meanY,!0),this.scale&&(t=t.clone().subRowVector(this.meanX).divRowVector(this.stdDevX),e=e.clone().subRowVector(this.meanY).divRowVector(this.stdDevY)),void 0===this.latentVectors&&(this.latentVectors=Math.min(t.length-1,t[0].length));for(var r=t.rows,i=t.columns,a=e.rows,h=e.columns,u=t.clone().mul(t).sum(),c=e.clone().mul(e).sum(),f=this.tolerance,g=this.latentVectors,d=n.default.zeros(r,g),m=n.default.zeros(i,g),p=n.default.zeros(a,g),v=n.default.zeros(h,g),w=n.default.zeros(g,g),y=m.clone(),x=0;s(e)>f&&x<g;){for(var b=t.transpose(),M=e.transpose(),S=l(t.clone().mulM(t)),A=l(e.clone().mulM(e)),E=t.getColumnVector(S),R=e.getColumnVector(A),k=n.default.zeros(r,1);s(E.clone().sub(k))>f;){var O=b.mmul(R);O.div(s(O)),k=E,E=t.mmul(O);var C=M.mmul(E);C.div(s(C)),R=e.mmul(C)}k=E;var T=b.mmul(k),P=k.transpose().mmul(k)[0][0],N=T.div(P),_=s(N);N.div(_),k.mul(_),O.mul(_),T=R.transpose().mmul(k),P=k.transpose().mmul(k)[0][0];var z=T.div(P)[0][0];t.sub(k.mmul(N.transpose())),e.sub(k.clone().mul(z).mmul(C.transpose())),d.setColumn(x,k),m.setColumn(x,N),p.setColumn(x,R),v.setColumn(x,C),y.setColumn(x,O),w[x][x]=z,x++}x--,d=d.subMatrix(0,d.rows-1,0,x),m=m.subMatrix(0,m.rows-1,0,x),p=p.subMatrix(0,p.rows-1,0,x),v=v.subMatrix(0,v.rows-1,0,x),y=y.subMatrix(0,y.rows-1,0,x),w=w.subMatrix(0,x,0,x),this.ssqYcal=c,this.E=t,this.F=e,this.T=d,this.P=m,this.U=p,this.Q=v,this.W=y,this.B=w,this.PBQ=m.mmul(w).mmul(v.transpose()),this.R2X=k.transpose().mmul(k).mmul(N.transpose().mmul(N)).div(u)[0][0]}predict(t){var e=n.default.checkMatrix(t);this.scale&&(e=e.subRowVector(this.meanX).divRowVector(this.stdDevX));var r=e.mmul(this.PBQ);return r=r.mulRowVector(this.stdDevY).addRowVector(this.meanY)}getExplainedVariance(){return this.R2X}toJSON(){return{name:"PLS",R2X:this.R2X,meanX:this.meanX,stdDevX:this.stdDevX,meanY:this.meanY,stdDevY:this.stdDevY,PBQ:this.PBQ,tolerance:this.tolerance,scale:this.scale}}static load(t){if("PLS"!==t.name)throw new RangeError("Invalid model: "+t.name);return new u(!0,t)}}function l(t){return t.sum("column").maxIndex()[0]}class c{constructor(t,e){if(!0===t)this.trainingSet=new n.Matrix(e.trainingSet),this.YLoadingMat=new n.Matrix(e.YLoadingMat),this.SigmaPow=new n.Matrix(e.SigmaPow),this.YScoreMat=new n.Matrix(e.YScoreMat),this.predScoreMat=h(e.predScoreMat,!1),this.YOrthLoadingVec=h(e.YOrthLoadingVec,!1),this.YOrthEigen=e.YOrthEigen,this.YOrthScoreMat=h(e.YOrthScoreMat,!1),this.toNorm=h(e.toNorm,!1),this.TURegressionCoeff=h(e.TURegressionCoeff,!1),this.kernelX=h(e.kernelX,!0),this.kernel=e.kernel,this.orthogonalComp=e.orthogonalComp,this.predictiveComp=e.predictiveComp;else{if(void 0===t.predictiveComponents)throw new RangeError("no predictive components found!");if(void 0===t.orthogonalComponents)throw new RangeError("no orthogonal components found!");if(void 0===t.kernel)throw new RangeError("no kernel found!");this.orthogonalComp=t.orthogonalComponents,this.predictiveComp=t.predictiveComponents,this.kernel=t.kernel}}train(t,e){t=n.Matrix.checkMatrix(t),e=n.Matrix.checkMatrix(e),this.trainingSet=t.clone();var r=this.kernel.compute(t),i=n.Matrix.eye(r.rows,r.rows,1),o=r;(r=new n.Matrix(this.orthogonalComp+1,this.orthogonalComp+1))[0][0]=o;var s=new n.SingularValueDecomposition(e.transpose().mmul(r[0][0]).mmul(e),{computeLeftSingularVectors:!0,computeRightSingularVectors:!1}),a=s.leftSingularVectors,h=s.diagonalMatrix;a=a.subMatrix(0,a.rows-1,0,this.predictiveComp-1),h=h.subMatrix(0,this.predictiveComp-1,0,this.predictiveComp-1);var u=e.mmul(a),l=new Array(this.orthogonalComp+1),c=new Array(this.orthogonalComp+1),f=new Array(this.orthogonalComp),g=new Array(this.orthogonalComp),d=new Array(this.orthogonalComp),m=new Array(this.orthogonalComp),p=n.Matrix.pow(h,-.5);p.apply(function(t,e){this[t][e]===1/0&&(this[t][e]=0)});for(var v=0;v<this.orthogonalComp;++v){l[v]=r[0][v].transpose().mmul(u).mmul(p);var w=l[v].transpose();c[v]=Object(n.inverse)(w.mmul(l[v])).mmul(w).mmul(u);var y=(s=new n.SingularValueDecomposition(w.mmul(n.Matrix.sub(r[v][v],l[v].mmul(w))).mmul(l[v]),{computeLeftSingularVectors:!0,computeRightSingularVectors:!1})).leftSingularVectors,x=s.diagonalMatrix;g[v]=y.subMatrix(0,y.rows-1,0,0),d[v]=x[0][0],f[v]=n.Matrix.sub(r[v][v],l[v].mmul(w)).mmul(l[v]).mmul(g[v]).mul(Math.pow(d[v],-.5));var b=f[v].transpose();m[v]=n.Matrix.sqrt(b.mmul(f[v])),f[v]=f[v].divRowVector(m[v]);var M=n.Matrix.sub(i,f[v].mmul(f[v].transpose()));r[0][v+1]=r[0][v].mmul(M),r[v+1][v+1]=M.mmul(r[v][v]).mmul(M)}var S=l[this.orthogonalComp]=r[0][this.orthogonalComp].transpose().mmul(u).mmul(p),A=S.transpose();c[this.orthogonalComp]=Object(n.inverse)(A.mmul(S)).mmul(A).mmul(u),this.YLoadingMat=a,this.SigmaPow=p,this.YScoreMat=u,this.predScoreMat=l,this.YOrthLoadingVec=g,this.YOrthEigen=d,this.YOrthScoreMat=f,this.toNorm=m,this.TURegressionCoeff=c,this.kernelX=r}predict(t){var e=this.kernel.compute(t,this.trainingSet),r=e;(e=new n.Matrix(this.orthogonalComp+1,this.orthogonalComp+1))[0][0]=r;var i,o=new Array(this.orthogonalComp),s=new Array(this.orthogonalComp);for(i=0;i<this.orthogonalComp;++i){s[i]=e[i][0].mmul(this.YScoreMat).mmul(this.SigmaPow),o[i]=n.Matrix.sub(e[i][i],s[i].mmul(this.predScoreMat[i].transpose())).mmul(this.predScoreMat[i]).mmul(this.YOrthLoadingVec[i]).mul(Math.pow(this.YOrthEigen[i],-.5)),o[i]=o[i].divRowVector(this.toNorm[i]);var a=this.YOrthScoreMat[i].transpose();e[i+1][0]=n.Matrix.sub(e[i][0],o[i].mmul(a).mmul(this.kernelX[0][i].transpose()));var h=n.Matrix.sub(e[i][0],e[i][i].mmul(this.YOrthScoreMat[i]).mmul(a)),u=o[i].mmul(a).mmul(this.kernelX[i][i]),l=u.mmul(this.YOrthScoreMat[i]).mmul(a);e[i+1][i+1]=h.sub(u).add(l)}return s[i]=e[i][0].mmul(this.YScoreMat).mmul(this.SigmaPow),{prediction:s[i].mmul(this.TURegressionCoeff[i]).mmul(this.YLoadingMat.transpose()),predScoreMat:s,predYOrthVectors:o}}toJSON(){return{name:"K-OPLS",YLoadingMat:this.YLoadingMat,SigmaPow:this.SigmaPow,YScoreMat:this.YScoreMat,predScoreMat:this.predScoreMat,YOrthLoadingVec:this.YOrthLoadingVec,YOrthEigen:this.YOrthEigen,YOrthScoreMat:this.YOrthScoreMat,toNorm:this.toNorm,TURegressionCoeff:this.TURegressionCoeff,kernelX:this.kernelX,trainingSet:this.trainingSet,orthogonalComp:this.orthogonalComp,predictiveComp:this.predictiveComp}}static load(t,e){if("K-OPLS"!==t.name)throw new RangeError("Invalid model: "+t.name);if(!e)throw new RangeError("You must provide a kernel for the model!");return t.kernel=e,new c(!0,t)}}r.d(e,"PLS",function(){return u}),r.d(e,"KOPLS",function(){return c})},function(t,e,r){"use strict";r.r(e);var n=r(0),i=r(3),o=r.n(i);function s(t,e){for(var r=t.columns,i=0,o=new Array(1e4),s=0;s<e.length;s++)void 0===o[e[s]]&&(o[e[s]]=0,i++),o[e[s]]++;var a=new Array(i),h=new Array(i);for(s=0;s<i;++s)a[s]=new n.default(o[s],r),h[s]=0;for(s=0;s<t.rows;++s)a[e[s]].setRow(h[e[s]],t.getRow(s)),h[e[s]]++;return a}class a{constructor(t,e){t&&(this.means=e.means,this.calculateProbabilities=e.calculateProbabilities)}train(t,e){var r=Math.sqrt(2*Math.PI);if((t=n.default.checkMatrix(t)).rows!==e.length)throw new RangeError("the size of the training set and the training labels must be the same.");var i=s(t,e),a=new Array(i.length);this.means=new Array(i.length);for(var h=0;h<i.length;++h){var u=o.a.matrix.mean(i[h]),l=o.a.matrix.standardDeviation(i[h],u),c=Math.log(i[h].rows/t.rows);a[h]=new Array(u.length+1),a[h][0]=c;for(var f=1;f<u.length+1;++f){var g=l[f-1];a[h][f]=[1/(r*g),-2*g*g]}this.means[h]=u}this.calculateProbabilities=a}predict(t){if(t[0].length===this.calculateProbabilities[0].length)throw new RangeError("the dataset must have the same features as the training set");for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=h(t[r],this.means,this.calculateProbabilities);return e}toJSON(){return{modelName:"NaiveBayes",means:this.means,calculateProbabilities:this.calculateProbabilities}}static load(t){if("NaiveBayes"!==t.modelName)throw new RangeError("The current model is not a Multinomial Naive Bayes, current model:",t.name);return new a(!0,t)}}function h(t,e,r){for(var n=0,i=-1,o=0;o<r.length;++o){for(var s=r[o][0],a=1;a<r[0][1].length+1;++a)s+=u(t[a-1],e[o][a-1],r[o][a][0],r[o][a][1]);(s=Math.exp(s))>n&&(n=s,i=o)}return i}function u(t,e,r,n){return t-=e,Math.log(r*Math.exp(t*t/n))}class l{constructor(t){t&&(this.conditionalProbability=n.default.checkMatrix(t.conditionalProbability),this.priorProbability=n.default.checkMatrix(t.priorProbability))}train(t,e){if((t=n.default.checkMatrix(t)).rows!==e.length)throw new RangeError("the size of the training set and the training labels must be the same.");var r=s(t,e);this.priorProbability=new n.default(r.length,1);for(var i=0;i<r.length;++i)this.priorProbability[i][0]=Math.log(r[i].length/t.rows);var o=t.columns;for(this.conditionalProbability=new n.default(r.length,o),i=0;i<r.length;++i){var a=n.default.checkMatrix(r[i]),h=a.sum()+o;this.conditionalProbability.setRow(i,a.sum("column").add(1).div(h).apply(c))}}predict(t){t=n.default.checkMatrix(t);for(var e=new Array(t.rows),r=0;r<t.rows;++r){var i=t.getRowVector(r);e[r]=this.conditionalProbability.clone().mulRowVector(i).sum("row").add(this.priorProbability).maxIndex()[0]}return e}toJSON(){return{name:"MultinomialNB",priorProbability:this.priorProbability,conditionalProbability:this.conditionalProbability}}static load(t){if("MultinomialNB"!==t.name)throw new RangeError("".concat(t.name," is not a Multinomial Naive Bayes"));return new l(t)}}function c(t,e){this[t][e]=Math.log(this[t][e])}r.d(e,"GaussianNB",function(){return a}),r.d(e,"MultinomialNB",function(){return l})},function(t,e,r){"use strict";
/*
 * Original code from:
 *
 * k-d Tree JavaScript - V 1.01
 *
 * https://github.com/ubilabs/kd-tree-javascript
 *
 * @author Mircea Pricop <pricop@ubilabs.net>, 2012
 * @author Martin Kleppe <kleppe@ubilabs.net>, 2012
 * @author Ubilabs http://ubilabs.net, 2012
 * @license MIT License <http://www.opensource.org/licenses/mit-license.php>
 */
function n(t,e,r){this.obj=t,this.left=null,this.right=null,this.parent=r,this.dimension=e}r.r(e);class i{constructor(t,e){if(Array.isArray(t)){this.dimensions=new Array(t[0].length);for(var r=0;r<this.dimensions.length;r++)this.dimensions[r]=r;this.root=function t(e,r,i,o){const s=r%o.length;if(0===e.length)return null;if(1===e.length)return new n(e[0],s,i);e.sort((t,e)=>t[o[s]]-e[o[s]]);const a=Math.floor(e.length/2);const h=new n(e[a],s,i);h.left=t(e.slice(0,a),r+1,h,o);h.right=t(e.slice(a+1),r+1,h,o);return h}(t,0,null,this.dimensions)}else this.dimensions=t.dimensions,this.root=t,function t(e){e.left&&(e.left.parent=e,t(e.left));e.right&&(e.right.parent=e,t(e.right))}(this.root);this.metric=e}toJSON(){const t=function t(e){const r=new n(e.obj,e.dimension,null);e.left&&(r.left=t(e.left));e.right&&(r.right=t(e.right));return r}(this.root);return t.dimensions=this.dimensions,t}nearest(t,e,r){const n=this.metric,i=this.dimensions;var s;const a=new o(function(t){return-t[1]});if(r)for(s=0;s<e;s+=1)a.push([null,r]);this.root&&function r(o){const s=i[o.dimension],h=n(t,o.obj),u={};var l,c,f,g;function d(t,r){a.push([t,r]),a.size()>e&&a.pop()}for(g=0;g<i.length;g+=1)g===o.dimension?u[i[g]]=t[i[g]]:u[i[g]]=o.obj[i[g]];c=n(u,o.obj),null!==o.right||null!==o.left?(r(l=null===o.right?o.left:null===o.left?o.right:t[s]<o.obj[s]?o.left:o.right),(a.size()<e||h<a.peek()[1])&&d(o,h),(a.size()<e||Math.abs(c)<a.peek()[1])&&null!==(f=l===o.left?o.right:o.left)&&r(f)):(a.size()<e||h<a.peek()[1])&&d(o,h)}(this.root);const h=[];for(s=0;s<Math.min(e,a.content.length);s+=1)a.content[s][0]&&h.push([a.content[s][0].obj,a.content[s][1]]);return h}}class o{constructor(t){this.content=[],this.scoreFunction=t}push(t){this.content.push(t),this.bubbleUp(this.content.length-1)}pop(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t}peek(){return this.content[0]}size(){return this.content.length}bubbleUp(t){for(var e=this.content[t];t>0;){const r=Math.floor((t+1)/2)-1,n=this.content[r];if(!(this.scoreFunction(e)<this.scoreFunction(n)))break;this.content[r]=e,this.content[t]=n,t=r}}sinkDown(t){for(var e=this.content.length,r=this.content[t],n=this.scoreFunction(r);;){var i=2*(t+1),o=i-1,s=null;if(o<e){var a=this.content[o],h=this.scoreFunction(a);h<n&&(s=o)}if(i<e){var u=this.content[i];this.scoreFunction(u)<(null===s?n:h)&&(s=i)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=r,t=s}}}var s=r(2),a=r.n(s);r.d(e,"default",function(){return h});class h{constructor(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!0===t){const t=e;return this.kdTree=new i(t.kdTree,r),this.k=t.k,this.classes=new Set(t.classes),void(this.isEuclidean=t.isEuclidean)}const n=new Set(e),o=r.distance,s=void 0===o?a.a:o,h=r.k,u=void 0===h?n.size+1:h,l=new Array(t.length);for(var c=0;c<l.length;++c)l[c]=t[c].slice();for(c=0;c<e.length;++c)l[c].push(e[c]);this.kdTree=new i(l,s),this.k=u,this.classes=n,this.isEuclidean=s===a.a}static load(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a;if("KNN"!==t.name)throw new Error("invalid model: "+t.name);if(!t.isEuclidean&&e===a.a)throw new Error("a custom distance function was used to create the model. Please provide it again");if(t.isEuclidean&&e!==a.a)throw new Error("the model was created with the default distance function. Do not load it with another one");return new h(!0,t,e)}toJSON(){return{name:"KNN",kdTree:this.kdTree,k:this.k,classes:Array.from(this.classes),isEuclidean:this.isEuclidean}}predict(t){if(Array.isArray(t)){if("number"==typeof t[0])return u(this,t);if(Array.isArray(t[0])&&"number"==typeof t[0][0]){const r=new Array(t.length);for(var e=0;e<t.length;e++)r[e]=u(this,t[e]);return r}}throw new TypeError("dataset to predict must be an array or a matrix")}}function u(t,e){var r=t.kdTree.nearest(e,t.k),n={},i=-1,o=-1,s=r[0][0].length-1;for(var a of t.classes)n[a]=0;for(var h=0;h<r.length;++h){var u=r[h][0][s],l=++n[u];l>o&&(i=u,o=l)}return i}}])});
//# sourceMappingURL=ml.min.js.map